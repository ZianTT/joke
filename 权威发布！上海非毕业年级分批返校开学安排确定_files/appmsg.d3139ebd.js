var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(t,n,i)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i;export function __vite_legacy_guard(){import("data:text/javascript,")}import{n as r}from"./sprite.e3a96375.js";import{d,V as c,a as l,h as p,m as _}from"./vendor.df117507.js";import{w as m,u,o as g,s as h,B as f,C as y,M as b,g as v,P as x,a as k,b as I,A,p as E}from"./wxwork_hidden.ec24a5fa.js";import{C as T,D as j,U as C,u as S,c as B,A as R,m as N,T as q,$ as P,n as M,J as O,P as z,E as L,w as W,j as D,L as H,a as U,o as $,b as V,l as J,r as F,d as X,f as G,h as K,e as Q,V as Y,g as Z,i as ee,I as te,k as ne,p as ie,q as oe,s as ae,t as se,v as re,K as de,x as ce,y as le}from"./report.e48becac.js";import{c as pe,P as _e,V as me,q as ue,k as we}from"./voice_component.580bbc3e.js";import{D as ge,L as he}from"./lazyload_img.af9f8086.js";import{O as fe}from"./outer_link.a840838d.js";import{R as ye}from"./review_image.200fec41.js";import{P as be,u as ve}from"./pay_read_utils.007c377a.js";import{r as xe,R as ke,b as Ie,s as Ae}from"./loadscript.528caaeb.js";import{P as Ee,V as Te,T as je,B as Ce,l as Se,d as Be}from"./controller.2c3ab252.js";import"./modal.879910c9.js";var Re='<# if(cps_isready==true){ #>\n\x3c!--cps 数据ready--\x3e\n<# if(cps_state==\'no_cps\' ){ #>\n\x3c!--违规--\x3e\n<section class="cps_inner cps_inner_banner cps_inner_empty js_product_err_container js_banner_container">\n<p>此内容因违规，暂无法查看</p>\n</section>\n<# } else {#>\n\x3c!--正常--\x3e\n<section class="cps_inner cps_inner_banner js_product_container js_banner_container">\n  <div class="cps_inner_wrp js_product_loop_content">\n    <div class="cps_inner_content" role="button">\n      <figure class="cps_inner_image_container">\n        <span width="100%" class="js_cover cps_inner_image"\n          style="background: url(<#=img_url#>) no-repeat center; background-size: cover;"></span>\n      </figure>\n      <# if(is_ad==1){ #>\n      <span class="cps_inner_info_adTag js_cps_adTag">广告</span>\n      <# } #>\n      <div class="cps_inner_info_container">\n        <h2 class="cps_inner_info_title">\n          <#=title#>\n        </h2>\n        <div class="cps_inner_info">\n          <div class="cps_inner_info_hd">\n            <p class="cps_inner_info_desc c">\n              <#=desc#>\n            </p>\n            <div class="cps_inner_info_from">\n              <span class="cps_inner_ic_from" style="background: url(<#=source_logo_url#>) no-repeat center;\n                          background-size: contain;"></span>\n              <#=source_name#>\n            </div>\n          </div>\n          <div class="cps_inner_info_ft">\n            <span class="cps_inner_btn_cps_info <# if(is_ad == 1){ #>buy<# } #>">\n              \x3c!--<i class="cps_inner_ic_miniapp"></i><# if(is_ad == 1){ #>购买<# } else { #>详情<# } #>--\x3e\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</section>\n<# } #>\n<# }else{ #>\n<section class="cps_inner cps_inner_banner cps_inner_placeholder">\n  <div class="cps_inner_wrp">\n    \x3c!-- 数据加载成功模板 --\x3e\n    <div class="cps_inner_content" role="button">\n      <figure class="cps_inner_image_container">\n        <span width="100%" class="cps_inner_image"></span>\n      </figure>\n      <div class="cps_inner_info">\n        <div class="cps_inner_info_hd">\n          <h2 class="cps_inner_info_title"></h2>\n          <p class="cps_inner_info_desc d"></p>\n        </div>\n      </div>\n    </div>\n  </div>\n</section>\n<# } #>',Ne='\x3c!--卡片类型--\x3e\n<# if(cps_isready==true){ #>\n\x3c!--cps 数据ready--\x3e\n<# if(cps_state==\'no_cps\' ){ #>\n\x3c!--违规--\x3e\n<section class="cps_inner cps_inner_card cps_inner_empty js_product_err_container js_banner_container">\n<p>此内容因违规，暂无法查看</p>\n</section>\n<# } else {#>\n\x3c!--正常--\x3e\n<section class="js_product_container js_banner_container">\n<div class="js_product_loop_content">\n<div role="button" class="appmsg_card_context minishop_card minishop_card_large cps_card">\n  <div class="minishop_card_hd">\n    <span width="100%" aria-label="商品，" class="js_cover minishop_card_thumb"\n      style="background-image: url(<#=img_url#>);"></span>\n    <# if(is_ad==1){ #>\n    <span class="cps_card_tag js_cps_adTag">广告</span>\n    <# } #>\n  </div>\n  <div class="minishop_card_bd weui-flex__item">\n    <div class="minishop_main_context">\n      <h2\n        class="minishop_card_title <# if(typeof price !== \'undefined\' && pid_type !== \'book\' && pid_type !== \'movie\'){ #>line2<# } #>">\n        <#=title#>\n      </h2>\n      \x3c!--通用模版带金额，title 可以显示2行--\x3e\n      <div class="minishop_card_profile weui-flex">\n        <span class="minishop_card_profile_avatar"\n          style="background-image: url(<#=source_logo_url#>);"></span>\n        <strong class="minishop_card_profile_nickname">\n          <#=source_name#>\n        </strong>\n      </div>\n    </div>\n    <div class="minishop_extra_context weui-flex">\n      <# if(typeof price !==\'undefined\' && pid_type !==\'book\' && pid_type !==\'movie\' ){ #>\n      <em class="minishop_card_price">\n      <#=price#>\n      </em>\n      <# }else{ #>\n      &nbsp;\n      <# } #>\n      <button type="button" class="weui-btn weui-btn_mini weui-btn_orange">\n      <# if(is_ad==1){ #>购买<# } else { #>详情<# } #></span>\n    </div>\n  </div>\n</div>\n</div>\n</section>\n<# } #>\n<# }else{ #>\n<section class="cps_inner cps_inner_card cps_inner_placeholder">\n  <div class="cps_inner_wrp">\n    \x3c!-- 数据加载成功模板 --\x3e\n    <div class="cps_inner_content" role="button">\n      <figure class="cps_inner_image_container">\n        <span class="cps_inner_image"></span>\n      </figure>\n      <div class="cps_inner_info">\n        <div class="cps_inner_info_hd">\n          <h2 class="cps_inner_info_title"></h2>\n        </div>\n        <div class="cps_inner_info_ft"></div>\n      </div>\n    </div>\n  </div>\n</section>\n<# } #>',qe='<# if(cps_isready==true){ #>\n\x3c!--cps 数据ready--\x3e\n<# if(cps_state==\'no_cps\' ){ #>\n\x3c!--违规--\x3e\n<section class="cps_inner cps_inner_list cps_inner_empty js_product_err_container">\n<p>此内容因违规，暂无法查看</p>\n</section>\n<# } else { #>\n\x3c!--正常--\x3e\n<section\nclass="js_list_container js_product_container<# if(pid_type == \'book\' || pid_type != \'movie\'){ #> cps_inner_book<# } #>">\n<div role="button"\nclass="appmsg_card_context minishop_card cps_card minishop_card_small js_product_loop_content wx_tap_card">\n<div class="minishop_card_hd">\n  <span aria-label="商品，" class="minishop_card_thumb js_cover"\n    style="background-image: url(<#=img_url#>)"></span>\n  <# if(is_ad==1){ #>\n  <span class="cps_card_tag js_cps_adTag">广告</span>\n  <# } #>\n</div>\n<div class="minishop_card_bd weui-flex__item">\n  <div\n    class="minishop_main_context <# if(typeof price === \'undefined\' || pid_type === \'book\' || pid_type === \'movie\'){ #>has_desc<# } #>">\n    <h2 class="minishop_card_title">\n      <#=title#>\n    </h2>\n    <# if(typeof price===\'undefined\' || pid_type===\'book\' || pid_type===\'movie\' ){ #>\n    <p class="minishop_card_desc"><#=desc#></p>\n    <# } #>\n    <div class="minishop_card_profile weui-flex">\n      <span class="minishop_card_profile_avatar"\n        style="background-image: url(<#=source_logo_url#>);"></span>\n      <strong class="minishop_card_profile_nickname">\n        <#=source_name#>\n      </strong>\n    </div>\n  </div>\n\n  <div class="minishop_extra_context weui-flex">\n    <# if(typeof price !==\'undefined\' && pid_type !==\'book\' && pid_type !==\'movie\' ){ #>\n    <em class="minishop_card_price">\n    <#=price#>\n    </em>\n    <# }else{ #>\n    &nbsp;\n    <# } #>\n    <button class="weui-btn weui-btn_mini weui-btn_orange" type="button">\n      <# if(is_ad==1){ #>购买<# }else{ #>详情<# } #>\n    </button>\n  </div>\n</div>\n</div>\n</section>\n<# } #>\n<# }else{ #>\n<section class="cps_inner cps_inner_list cps_inner_placeholder">\n  <div class="cps_inner_wrp" data-templateid="" data-pid="{{pid1}}" data-order="" data-packid=""\n    data-wxaappid="{{wxa_appid1}}" data-wxapath="{{url_path1}}">\n    \x3c!-- 数据加载成功模板 --\x3e\n    <div class="cps_inner_content" role="button">\n      <figure class="cps_inner_image_container">\n        <span width="100%" class="cps_inner_image"></span>\n      </figure>\n      <div class="cps_inner_info">\n        <div class="cps_inner_info_hd">\n          <h2 class="cps_inner_info_title"></h2>\n        </div>\n        <div class="cps_inner_info_ft"></div>\n      </div>\n    </div>\n  </div>\n</section>\n<# } #>';const Pe=document.getElementById("js_tags_preview_toast");let Me=null;const Oe=(e,t)=>{B.report(20158,{bizuin:window.biz,msgid:1*window.mid,itemidx:1*window.idx,Scene:1*window.source,Subscene:1*window.subscene,SessionId:window.sessionid+"",EnterId:1*window.enterid,Actiontype:1*e,PublicTagList:t+""})};let ze=!1;var Le={init(e){if(1===window.reprint_style||2===window.reprint_style||3===window.reprint_style||ze||1*e.dataset.len==0)return;ze=!0;const t=e=>{if(window.is_temp_url)Pe&&(Pe.style.display="",Me&&clearTimeout(Me),Me=setTimeout((()=>{Pe.style.display="none",Me=null}),3e3));else{const t={};let n=e.url;e.tag_id?(Oe(2,e.tag_id),t.scene=window.source,t.subscene=window.subscene,t.sessionid=window.sessionid,t.enterid=window.enterid):pe({eventType:2,albumId:e.album_id,albumType:0,tagSrc:e.tag_source}),C.goUrl(n,Object.assign({},t,{scene:173,from_msgid:window.mid,from_itemidx:window.idx,count:3,nolastread:1}))}};if(T.hasClass(e,"js_single")){const n=e.querySelector(".js_tag").dataset;j.on(e,"click",(()=>t(n)))}else j.on(e,"click",(n=>{let i=n.target;i&&i!==e&&!T.hasClass(i,"js_tag")&&(i=i.parentNode),i&&T.hasClass(i,"js_tag")&&t(i.dataset)}));const n=t=>{const i=S.getInnerHeight()+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop);if(e.offsetTop<i){"function"!=typeof t&&j.off(window,"scroll",n);let i="";Array.prototype.forEach.call(e.getElementsByClassName("js_tag"),(e=>{const t=e.dataset;t.tag_id?(""!==i&&(i+="_"),i+=t.tag_id):pe({eventType:1,albumId:t.album_id,albumType:0,tagSrc:t.tag_source})})),i&&Oe(1,i)}else"function"==typeof t&&t()};n((()=>{j.on(window,"scroll",n)}))}};const We=[];function De(){try{!function(){window.location.href.indexOf("clearStorage=1")>=0&&(localStorage.removeItem("max-age-storage-test"),console.log("clear localStorage"));var e=window.user_uin||0;if(0!==e&&Math.floor(e/100)%1e3<1&&(R({type:"GET",url:"/mp/reportcache?type=1&random="+Math.random()}),(new Image).src="/mp/reportcache?type=2&uin="+uin,localStorage&&null==localStorage.getItem("max-age-storage-test"))){console.log("localStorage empty");try{localStorage.setItem("max-age-storage-test",!0),console.log("localStorage set success")}catch(t){}R({type:"GET",url:"/mp/reportcache?type=3&random="+Math.random()})}}(),"undefined"==typeof getComputedStyle&&document.body.currentStyle&&(window.getComputedStyle=function(e){return e.currentStyle}),function(){let e=window.user_uin||0;if(!(0!==e&&Math.floor(e/100)%1e3<10))return;let t=document.getElementsByTagName("img"),n=t.length,i=document.getElementById("img-content"),o=i.offsetWidth,a=0,s=0,r=getComputedStyle(i);a=parseInt(r.paddingLeft)+parseInt(r.paddingRight),o-=a,o||(o=window.innerWidth-30);for(let d=0;d<n;++d){if(!t[d].getAttribute("data-src"))continue;let e=1*t[d].getAttribute("data-w")||o,n=1*t[d].getAttribute("data-ratio");n&&n>0&&e>o&&s++}s>0&&We.push({idkey:28307,order:22,num:s})}(),function(){let e="/mp/jsmonitor?idkey=",t=[];for(let n=0,i=We.length;n<i;++n){let e=We[n],i=e.idkey.toString()+"_"+e.order.toString()+"_"+e.num.toString();t.push(i)}e+=t.join(";"),We.length>0&&((new Image).src=e)}()}catch(e){console.error(e)}}let He=!1;const Ue=navigator.userAgent.match(/MicroMessenger\/(\d+)\.(\d+)\.(\d+)/);if(Ue){const e=Number(Ue[1]),t=Number(Ue[2]),n=Number(Ue[3]);(e>6||6===e&&t>5||6===e&&5===t&&n>=3)&&(He=!0)}const $e={tagName:"mp-wxaproduct",isWechat:(N.isAndroid||N.isIOS)&&N.isWechat&&!N.isWxWork,isPcWechat:N.isWindowsWechat||N.isMacWechat,screen_height:S.getInnerHeight(),canJumpOnTap:He,commonReportData:{},minishopDom:[],appmsgType:1*window.appmsg_type||9},Ve=(e={})=>{const t=e.dom,n=e.minishopInfo;j.on(t,"tap",(function(e){e.stopPropagation(),e.preventDefault(),B.report(22042,Object.assign({},$e.commonReportData,{ActionType:2,toWxaAppId:n.appid,CardType:"large"===n.cardtype?1:0,ProductId:n.productId,isMassSend:$e.appmsgType})),((e={})=>{$e.isWechat||$e.isPcWechat?$e.canJumpOnTap?m.jumpUrl({options:{userName:e.username,scene:1058,sceneNote:encodeURIComponent(location.href),relativeURL:e.path},beforeJumpBackupPage:function(){},onJsapiCallback:function(e){"openWeApp:ok"===e.err_msg||console.error(e.err_msg)}}):console.log("cant jumpOnTap"):new _e({msg:"请使用微信打开。"})})(n)}),!0),j.on(t,"click",(e=>{e.preventDefault(),e.stopPropagation()}),!0)},Je=()=>{for(let e=0;e<$e.minishopDom.length;e++){const t=$e.minishopDom[e];if(1*t.getAttribute("data-hasreport")!=1){const e=document.documentElement.scrollTop||document.body.scrollTop,n=t.getAttribute("data-wxaproduct-productid")||"0",i=t.getAttribute("data-wxaproduct-appid")||"",o=t.getAttribute("data-wxaproduct-cardtype")||"mini";t.clientHeight+t.offsetTop>=e+t.clientHeight/2&&t.clientHeight+t.offsetTop<=e+t.clientHeight/2+$e.screen_height&&(t.setAttribute("data-hasreport",1),B.report(22042,Object.assign({},$e.commonReportData,{ActionType:1,toWxaAppId:i,CardType:"large"===o?1:0,ProductId:n,isMassSend:$e.appmsgType})))}}};j.on(window,"scroll",Je);const Fe=(e={})=>{if(e.node&&e.data&&e.data.headimg){const t=function(e){let t=e.node,n=e.data;return function(){let e=document.createElement("div");e.innerHTML=q.tmpl('<# if(cardtype === \'mini\') {#>\n<div role="button" class="appmsg_card_context wx_tap_card minishop_card minishop_card_small js_wx_tap_highlight" data-wxaproduct-productid="<#=productId#>" data-wxaproduct-appid="<#=appid#>" data-wxaproduct-cardtype="<#=cardtype#>">\n  <div class="minishop_card_hd">\n    <i aria-label="商品，" class="minishop_card_thumb" style="background-image:url(<#=headimg#>);"></i>\n  </div>\n  <div class="minishop_card_bd">\n    <div class="minishop_main_context">\n      <strong class="minishop_card_title"><#=title#></strong>\n      <# if(avatar && nickname) { #>\n      <div class="minishop_card_profile weui-flex">\n        <img class="minishop_card_profile_avatar" src="<#=avatar#>" alt="">\n        <strong class="minishop_card_profile_nickname"><#=nickname#></strong>\n      </div>\n      <# } #>\n    </div>\n    <div class="minishop_extra_context weui-flex">\n      <em class="minishop_card_price"><#=price#></em>\n      <button class="weui-btn weui-btn_xmini minishop_card_buy_btn" type="button"><i class="icon_minishop_card_buy"></i>购买</button>\n    </div>\n  </div>\n</div>\n<#} else { #>\n<div role="button" class="appmsg_card_context wx_tap_card minishop_card minishop_card_large js_wx_tap_highlight" data-wxaproduct-productid="<#=productId#>" data-wxaproduct-appid="<#=appid#>" data-wxaproduct-cardtype="<#=cardtype#>">\n  <div class="minishop_card_hd">\n    <i aria-label="商品，" class="minishop_card_thumb" style="background-image:url(<#=headimg#>);"></i>\n  </div>\n  <div class="minishop_card_bd weui-flex__item">\n    <div class="minishop_main_context">\n      <strong class="minishop_card_title"><#=title#></strong>\n      <# if(avatar && nickname) { #>\n      <div class="minishop_card_profile weui-flex">\n        <img class="minishop_card_profile_avatar" src="<#=avatar#>" alt="">\n        <strong class="minishop_card_profile_nickname"><#=nickname#></strong>\n      </div>\n      <# } #>\n    </div>\n    <div class="minishop_extra_context weui-flex">\n      <em class="minishop_card_price"><#=price#></em>\n      <button class="weui-btn weui-btn_xmini minishop_card_buy_btn" type="button"><i class="icon_minishop_card_buy"></i>购买</button>\n    </div>\n  </div>\n</div>\n<# } #>',n,!0).replace(/>\s*</g,"><").replace(/^\s+/,"").replace(/\s+$/,"");let i=e.firstChild;t.parentNode.insertBefore(i,t.nextSibling);let o=t.parentNode.querySelector('[data-preloadingid="'+n.productId+'"]');o&&o.parentNode.removeChild(o),Ve({dom:i,minishopInfo:n}),$e.minishopDom.push(i),Je()}}(e),n=function(){this.onload=null,this.onerror=null,t()};let i=new Image;i.onload=n,i.onerror=n,i.src=e.data.headimg}},Xe=e=>{R({url:`/mp/wapwxaproduct?action=batch_get_product&product_ids=${JSON.stringify({list:e})}`,type:"GET",dataType:"json",success(e){e&&e.base_resp&&1*e.base_resp.ret==0&&"[object Array]"===Object.prototype.toString.call(e.product_list)&&((e=[])=>{const t=document.querySelectorAll($e.tagName);for(let n=0,i=t.length;n<i;n++){let i=t[n];const o=decodeURIComponent(i.getAttribute("data-wxaproduct-productid")||""),a=e.find((e=>e.product_id===o))||{},s={productId:o,title:i.getAttribute("data-wxaproduct-title")||"",price:decodeURIComponent(i.getAttribute("data-wxaproduct-price")||""),headimg:decodeURIComponent(i.getAttribute("data-wxaproduct-headimg")||""),cardtype:decodeURIComponent(i.getAttribute("data-wxaproduct-cardtype")||""),avatar:a.avatar||"",nickname:a.nickname||"",appid:a.appid||decodeURIComponent(i.getAttribute("data-wxaproduct-appid")||""),path:a.path||"",username:a.username||""};Fe({data:s,node:i})}})(e.product_list)},error(e){console.error(e)}})};var Ge=(e={})=>{e.minishopCards&&($e.commonReportData={BizUin:1*d(e.biz),MsgId:window.parseInt(e.mid,10)||0,ItemIdx:window.parseInt(e.idx,10)||0,Scene:window.parseInt(e.source,10)||0,SubScene:window.parseInt(e.subscene,10)||0,EnterId:window.parseInt(e.enterid,10)||0},Xe(e.minishopCards.list),Je())},Ke='<span class="qa__card js_qa_card_inner">\n  <# if (qaDeleted) { #>\n    <span class="qa__card-deleted">讨论内容已被删除</span>\n  <# } else { #>\n    <span>\n      <span class="qa__card-hd">\n        <span class="qa__hd-notice"><#=nickname#> 发起了一个读者讨论</span>\n        <span class="qa__hd-question"><#==title#></span>\n      </span>\n      <# if (!answerCount) { #>\n        <# if (isLogin) { #>\n          \x3c!-- <# if (disableAnswerWord) { #>\n            <span class="qa__list-answer qa__list-answer_desc"><#=disableAnswerWord#></span>\n          <# } else { #>\n            <span class="qa__list-answer js_qa_write_answer">参与讨论</span>\n          <# } #> --\x3e\n          <span class="qa__list-answer qa__list-answer_desc">讨论已结束</span>\n        <# } #>\n      <# } else { #>\n        <span>\n          <span class="qa__list-hd">\n            <span class="qa__list-hd-title js_qa_list_head_title">精选讨论内容</span>\n            \x3c!-- <# if (isLogin) { #>\n              <# if (disableAnswerWord) { #>\n                <span class="qa__list-hd-desc"><#=disableAnswerWord#></span>\n              <# } else { #>\n                <span class="qa__list-hd-action js_qa_write_answer">参与讨论</span>\n              <# } #>\n            <# } #> --\x3e\n          </span>\n          <span class="qa__list js_qa_qna_answer_list"><#==answerListStr#></span>\n          <# if (leftAnswerCnt) { #>\n            <p class="qa__list-more js_more_answer_entry" data-count="<#=answerCount#>"><#=leftAnswerCnt#></p>\n          <# } #>\n        </span>\n      <# } #>\n    </span>\n  <# } #>\n</span>';const Qe=screen.height/4*3+"px",Ye={top:P.os.pc?"20%":screen.height/4-(screen.height-window.innerHeight)+"px",btnText:"提交",hasHeader:!0,clickMask2Hide:!0,animationType:"bottom",scroll2Hide:!0};function Ze(e,t,n,i){n=i?`${n}px`:n,e.style[t]=n}class et{constructor(e,t={}){t=Object.assign({},Ye,t);const n=document.createElement("div");n.innerHTML=q.tmpl('<div class="wx_bottom_modal_wrp <#=extClass#>">\n  <div\n    class="weui-half-screen-dialog wx_bottom_modal js_bottom_modal_content"\n    role="dialog"\n    aria-modal="true"\n    aria-hidden="true"\n    tabindex="0"\n    <# if (!autoHeight) { #>\n      style="max-height: none;"\n    <# } else { #>\n      style="max-height: <#=maxHeight#>;"\n    <# } #>\n  >\n    <# if (hasHeader) { #>\n      <div class="weui-half-screen-dialog__hd__wrp">\n        <div class="weui-half-screen-dialog__hd js_bottom_modal_hd">\n          <div class="weui-half-screen-dialog__hd__side">\n            <button class="weui-btn_icon js_close_bottom_modal weui-wa-hotarea">关闭<i class="weui-icon-half-screen-close"></i></button>\n          </div>\n\n          <div class="weui-half-screen-dialog__hd__main">\n            <strong class="weui-half-screen-dialog__title js_bottom_modal_title">标题</strong>\n          </div>\n\n          <div class="weui-half-screen-dialog__hd__side">\n            <# if (hasBtn) { #>\n              <# if (btnSlot) { #>\n                <div role="button" class="js_submit_bottom_modal weui-wa-hotarea">\n                  <#==btnSlot#>\n                </div>\n              <# } else { #>\n                <button class="weui-btn weui-btn_primary weui-btn_xmini js_submit_bottom_modal weui-wa-hotarea"><#=btnText#></button>\n              <# } #>\n            <# } #>\n            <button class="weui-btn_icon" style="display:none;">更多<i class="weui-icon-more"></i></button>\n          </div>\n        </div>\n      </div>\n    <# } #>\n    <div class="weui-half-screen-dialog__bd js_bottom_modal_bd">\n      <div role="alert" class="wx_bottom_modal_msg_wrp js_modal_loading" style="display: none;">\n        <div class="wx_bottom_modal_msg">\n          <i class="weui-loading" role="img" aria-label="加载中"></i>\n        </div>\n      </div>\n      \x3c!-- 上下拉加载loading --\x3e\n      <div role="alert" class="weui-loadmore js_pull_loading" style="display: none;">\n        <i class="weui-loading"></i>\n        <span class="weui-loadmore__tips">正在加载</span>\n      </div>\n\n      \x3c!-- 加载完成的dom，插到js_bottom_modal_bd下 --\x3e\n      <div role="option" class="weui-loadmore weui-loadmore_line weui-loadmore_dot js_modal_end_line" style="display: none;">\n        <div class="weui-hidden_abs">已无更多数据</div>\n        <span class="weui-loadmore__tips"></span>\n      </div>\n    </div>\n    <# if (hasFooter) { #>\n      <div class="weui-half-screen-dialog__ft js_bottom_modal_ft"></div>\n    <# } #>\n  </div>\n  <# if (hasMask) { #>\n    \x3c!-- 透明mask，用于防止点透 --\x3e\n    <div class="wx_bottom_modal_mask_fixed js_bottom_modal_mask_not_click"></div>\n\n    \x3c!-- 有底色的mask --\x3e\n    <div class="weui-mask wx_bottom_modal_mask js_bottom_modal_mask"></div>\n  <# } #>\n</div>',{hasBtn:t.hasBtn,btnText:t.btnText,extClass:t.extClass||"",hasMask:!t.removeMask,isTopic:!!t.isTopic,hasHeader:t.hasHeader,hasFooter:!!t.footerEl,btnSlot:t.btnSlot,autoHeight:t.autoHeight,maxHeight:Qe});const i=n.firstChild;this.scrollLock=!1,this.curScrollTop=0,this.touches={startX:0,startY:0,curX:0,curY:0,isScreenLeft:!1,direction:"",times:0},this.opt=t,this.rootEle=i,this.contentEle=e,this.contentAreaWrp=i.getElementsByClassName("js_bottom_modal_bd")[0],this.contentAreaWrp.appendChild(e),this.contentArea=i.getElementsByClassName("js_bottom_modal_content")[0],this.loading=this.rootEle.getElementsByClassName("js_modal_loading")[0],this.pullLoading=this.rootEle.getElementsByClassName("js_pull_loading")[0],this.endLine=this.rootEle.getElementsByClassName("js_modal_end_line")[0],this.enableGesture=!1,this.triggerEl=null,this.isAutoFocus=!0,t.removeMask||(this.maskEle=i.getElementsByClassName("js_bottom_modal_mask")[0],this.maskNotClick=i.getElementsByClassName("js_bottom_modal_mask_not_click")[0],t.transparentMask&&Ze(this.maskEle,"opacity",0)),t.hasHeader&&(this.headAreaWrp=i.getElementsByClassName("js_bottom_modal_hd")[0],this.submitBtn=this.headAreaWrp.getElementsByClassName("js_submit_bottom_modal")[0],this.closeBtn=this.headAreaWrp.getElementsByClassName("js_close_bottom_modal")[0],this.setTitle(t.title)),t.footerEl&&(this.footAreaWrp=i.querySelector(".js_bottom_modal_ft"),this.footAreaWrp.appendChild(t.footerEl)),"right"===t.animationType&&this.rootEle.classList.add("wx_bottom_modal_right"),document.body.appendChild(i),t.cb&&t.cb(),this.bindEvent()}bindEvent(){this.maskEle&&(this.opt.clickMask2Hide&&j.tap(this.maskEle,(()=>{this.hide()})),j.on(this.contentArea,"transitionend",(e=>{e.target!==this.contentArea||"transform"!==e.propertyName&&"-ms-transform"!==e.propertyName||(""!==this.contentArea.style.transform?this.contentArea.style.removeProperty("transform"):this.getShowStatus()?"function"==typeof this.opt.onShowAfterAnimation&&this.opt.onShowAfterAnimation():(Ze(this.maskNotClick,"visibility","hidden"),!this.opt.autoHeight&&Ze(this.contentArea,"top",this.opt.top)))})),j.tap(this.maskNotClick,(()=>setTimeout((()=>{this.hide(),Ze(this.maskNotClick,"visibility","hidden"),!this.opt.autoHeight&&Ze(this.contentArea,"top",this.opt.top)}),300))),j.on(this.maskEle,"touchmove",(e=>{e.preventDefault()}))),this.headAreaWrp&&(j.on(this.headAreaWrp,"touchstart",(e=>this.onTouchStart(e))),j.on(this.headAreaWrp,"touchmove",(e=>{e.preventDefault();const t=e.changedTouches[0];this.getTouchDirection(t)&&this.moveByDirection(t)})),j.on(this.headAreaWrp,"touchend",(e=>this.onTouchEnd(e)))),this.footAreaWrp&&(j.on(this.footAreaWrp,"touchstart",(e=>this.onTouchStart(e))),j.on(this.footAreaWrp,"touchmove",(e=>{e.preventDefault();const t=e.changedTouches[0];this.getTouchDirection(t)&&this.moveByDirection(t)})),j.on(this.footAreaWrp,"touchend",(e=>this.onTouchEnd(e)))),this.closeBtn&&j.on(this.closeBtn,"click",(()=>{this.hide()})),this.submitBtn&&j.on(this.submitBtn,"click",(()=>{T.hasClass(this.submitBtn,"weui-btn_disabled")||this.opt.btnClickCb&&this.opt.btnClickCb()})),j.on(this.contentAreaWrp,"scroll",(()=>{this.checkReachBoundary(),this.contentAreaWrp.scrollTop>0?T.addClass(this.contentArea,"weui-half-screen-dialog_headline"):T.removeClass(this.contentArea,"weui-half-screen-dialog_headline")})),this.headAreaWrp&&j.tap(this.headAreaWrp.getElementsByClassName("js_bottom_modal_title")[0],(()=>{this.opt.titleClickCb&&this.opt.titleClickCb()})),j.on(this.contentAreaWrp,"touchstart",(e=>this.onTouchStart(e))),j.on(this.contentAreaWrp,"touchmove",(e=>{const t=e.changedTouches[0];if(this.getTouchDirection(t)){if("Y"===this.touches.direction){const i=this.contentAreaWrp,o=t.pageY,a=o-this.touches.startY,s=i.scrollTop<=0&&a>0,r=(n=i,Math.ceil(n.scrollTop+n.offsetHeight)>=n.scrollHeight&&a<0);s||r?s&&!this.opt.onPullDownLoad&&(this.move(o),e.preventDefault()):this.resetMovement(),this.touches.curY=o}else e.preventDefault(),this.moveByDirection(t)}var n})),j.on(this.contentAreaWrp,"touchend",(e=>this.onTouchEnd(e))),j.on(window,"unload",(()=>{this.opt.removeMask||M.hide()}))}checkReachBoundary(e=!0,t=!0){this.scrollLock&&0!==this.contentAreaWrp.scrollTop||(this.scrollLock=!0,setTimeout((()=>{this.scrollLock=!1}),50),e&&!this.pullingDownLock&&this.contentAreaWrp.scrollTop<=0&&(this.opt.onPullDownLoad&&this.opt.onPullDownLoad(),this.pullingDownLock=!0),setTimeout((()=>{t&&!this.pullingUpLock&&this.contentAreaWrp.scrollTop+this.contentAreaWrp.offsetHeight+100>this.contentEle.offsetHeight&&(this.opt.onPullUpLoad&&this.opt.onPullUpLoad(),this.pullingUpLock=!0)}),100),this.opt.onScroll&&this.opt.onScroll(this.contentAreaWrp.scrollTop>this.curScrollTop?"up":"down"),this.curScrollTop=this.contentAreaWrp.scrollTop)}onTouchStart(e){const t=e.touches[0];this.touches={startX:t.pageX,startY:t.pageY,curX:t.pageX,curY:t.pageY,isScreenLeft:this.enableGesture&&t.pageX<=30,direction:"",times:0},this.contentArea.style.transition="none"}onTouchEnd(e){const t=this.touches.direction,n="X"===t?100:this.contentArea.offsetHeight/4,i=e.changedTouches[0][`page${t}`]-this.touches[`start${t}`],o=this.contentArea.dataset;this.contentArea.style.removeProperty("transition"),o.distance&&(i>n?this.hide():this.contentArea.style.transform="translateY(0)",delete o.distance)}getTouchDirection(e){if(this.touches.direction)return!0;if(!this.touches.isScreenLeft)return this.touches.direction="Y",!0;this.touches.times++;const t=Math.abs(e.pageX-this.touches.startX),n=Math.abs(e.pageY-this.touches.startY);return this.touches.times>=3?(this.touches.direction=t>=n?"X":"Y",!0):t>=5&&t>=n?(this.touches.direction="X",!0):n>=5&&(this.touches.direction="Y",!0)}moveByDirection(e){const t=this.touches.direction,n=e[`page${t}`];n-this.touches[`start${t}`]>0?this.move(n):this.resetMovement(),this.touches[`cur${t}`]=n}move(e){if(this.opt.sideslip2Hide&&"X"===this.touches.direction||this.opt.scroll2Hide&&"Y"===this.touches.direction){const t=this.contentArea.dataset;t.distance=1*(t.distance||0)+e-this.touches[`cur${this.touches.direction}`],this.contentArea.style.transform=`translateY(${t.distance}px)`}}resetMovement(){delete this.contentArea.dataset.distance,this.contentArea.style.removeProperty("transform")}show(e,t,n,i=!0){if(T.addClass(document.body,"page_no_scroll"),this.triggerEl=n||window.event&&window.event.target,this.isAutoFocus=i,this.getShowStatus())return;e||this.opt.autoHeight||(Ze(this.contentArea,"top",this.opt.top),console.log(this.contentArea.offsetHeight)),Ze(this.contentArea,"visibility","visible"),T.addClass(this.rootEle,"wx_bottom_modal_show");const o=document.getElementById("img-content");o&&o.setAttribute("aria-hidden","true"),this.setAriaHidden(!1),this.contentArea.focus(),this.maskEle&&this.opt.clickMask2Hide&&Ze(this.maskNotClick,"visibility","visible"),this.opt.removeMask||M.show({alpha:this.opt.transparentMask?0:.6,callback:e=>{e&&"function"==typeof this.opt.onShowNavShadow&&this.opt.onShowNavShadow()},onClick:()=>{this.hide()}}),this.opt.sideslip2Hide&&(P.os.ios?O.invoke("handleDeviceInfo",{action:"disableInteractivePop",disable:!0},(e=>{/:ok$/.test(e.err_msg)&&(this.enableGesture=!0)})):u.disable({onGoBack:()=>{this.hide()},onDisable:()=>{this.enableGesture=!0},onEnable:()=>{this.enableGesture=!1}})),e&&(T.addClass(this.rootEle,"wx_bottom_modal_form"),Ze(this.contentArea,"top","25px")),setTimeout((()=>{e||"right"===this.opt.animationType&&(Ze(this.contentArea,"-ms-transform","translateX(0)"),Ze(this.contentArea,"transform","translateX(0)"))})),e&&(setTimeout((()=>{"bottom"===this.opt.animationType?Ze(this.contentArea,"top","100%"):Ze(this.contentArea,"top",this.opt.top),console.log(this.contentArea.offsetHeight),T.removeClass(this.rootEle,"wx_bottom_modal_form"),setTimeout((()=>{Ze(this.contentArea,"top",this.opt.top),"right"===this.opt.animationType&&(Ze(this.contentArea,"-ms-transform","translateX(0)"),Ze(this.contentArea,"transform","translateX(0)"))}))}),50),P.os.ios?t.focus():(this.tmpInputEle||(this.tmpInputEle=t.cloneNode(!0)),this.tmpInputEle.style.opacity=0,this.tmpInputEle.style.position="fixed",this.tmpInputEle.style.top=0,this.tmpInputEle.style.zIndex="-1",document.body.appendChild(this.tmpInputEle),setTimeout((()=>{t.focus(),this.opt.makeInputEleBigger&&this.opt.makeInputEleBigger(),document.body.removeChild(this.tmpInputEle)}),300),this.tmpInputEle.focus()),P.os.ios&&!this.hasBindInputEvent&&this.opt.makeFakeInputEle&&this.opt.removeInputEle&&(this.hasBindInputEvent=!0,j.on(t,"focus",(()=>{setTimeout((()=>{t.style.opacity=1,this.opt.removeInputEle()}),50)})),j.on(t,"blur",(()=>{this.opt.makeFakeInputEle(),t.style.opacity=0})))),this.opt.onShow&&this.opt.onShow()}hide(e){if(T.removeClass(document.body,"page_no_scroll"),e&&Ze(this.maskNotClick,"visibility","hidden"),!this.getShowStatus())return;this.contentArea.style.removeProperty("-ms-transform"),this.contentArea.style.removeProperty("transform"),T.removeClass(this.rootEle,"wx_bottom_modal_show");const t=document.getElementById("img-content");t&&t.setAttribute("aria-hidden","false"),this.setAriaHidden(!0),this.isAutoFocus&&function(e){if(!(e&&e instanceof HTMLElement))return!1;const t=window.getComputedStyle(e);return 0!==t.width&&0!==t.height&&0!==t.opacity&&"none"!==t.display&&"hidden"!==t.visibility&&null!==e.offsetParent}(this.triggerEl)&&(this.triggerEl.setAttribute("tabindex","0"),this.triggerEl.focus()),this.opt.removeMask||M.hide(),this.opt.sideslip2Hide&&(P.os.ios?O.invoke("handleDeviceInfo",{action:"disableInteractivePop",disable:!1},(e=>{/:ok$/.test(e.err_msg)&&(this.enableGesture=!1)})):u.enable({onEnable:()=>{this.enableGesture=!1}})),this.opt.onHide&&this.opt.onHide()}disableBtn(){this.submitBtn&&T.addClass(this.submitBtn,"weui-btn_disabled")}enableBtn(){this.submitBtn&&T.removeClass(this.submitBtn,"weui-btn_disabled")}finishPullUpLoad(){this.pullingUpLock=!1}finishPullDownLoad(){this.pullingDownLock=!1}setTitle(e){this.headAreaWrp&&("string"==typeof e?this.headAreaWrp.getElementsByClassName("js_bottom_modal_title")[0].innerHTML=e:"object"==typeof e&&e.innerHTML&&(this.headAreaWrp.getElementsByClassName("js_bottom_modal_title")[0].innerHTML=e.innerHTML))}scrollTo(...e){this.contentAreaWrp.scrollTo(...e)}getRootEle(){return this.rootEle}getBdEle(){return this.contentAreaWrp}getScrollEle(){return this.contentAreaWrp}setCloseBtnStyle(e){if(this.closeBtn){const t=this.closeBtn.getElementsByTagName("i")[0],n="weui-icon-close-thin",i="weui-icon-back-arrow-thin";"back"===e?(T.removeClass(t,n),T.addClass(t,i)):(T.removeClass(t,i),T.addClass(t,n))}}getShowStatus(){return T.hasClass(this.rootEle,"wx_bottom_modal_show")}showLoading(){Ze(this.loading,"display","block")}hideLoading(){Ze(this.loading,"display","none")}showPullUpLoading(){this.contentAreaWrp.appendChild(this.pullLoading),Ze(this.pullLoading,"display","block")}hidePullUpLoading(){Ze(this.pullLoading,"display","none")}showPullDownLoading(){this.contentAreaWrp.insertBefore(this.pullLoading,this.contentAreaWrp.firstChild),Ze(this.pullLoading,"display","block")}hidePullDownLoading(){Ze(this.pullLoading,"display","none")}showEndLine(){this.contentAreaWrp.appendChild(this.endLine),Ze(this.endLine,"display","block")}setAriaHidden(e){this.contentArea.setAttribute("aria-hidden",e.toString())}disablePullDownLoad(){this.opt.onPullDownLoad=null}}function tt(e,t,n=0){return e.getElementsByClassName(t)[n]}const nt=document.getElementsByTagName("mp-qa")[0];let it,ot,at,st,rt,dt,lt,pt,_t,mt,ut={},wt=0,gt=0,ht=0,ft="";const yt={__biz:nt&&nt.dataset.bizuin,question_id:nt&&nt.dataset.id,qna_sn:nt&&function(e){let t;if(window.qnaCardData)try{t=JSON.parse(window.qnaCardData);const n=t.list;if(n&&n.length)for(let t=0;t<n.length;t++)if(e===n[t].question_id)return n[t].qna_sn}catch(n){console.error(n)}return""}(nt.dataset.id)},bt={};function vt(e){e&&(e.style.display="none")}function xt(e){e&&(e.style.display="block")}function kt(e,t){W.jsmonitor({id:223326,key:e,value:t})}function It(){window.weui.topTips("系统错误，请稍后再试")}function At(e={}){B.report(20883,Object.assign({Device:P.os.ios?1:P.os.android?2:-1,MsgId:1*yt.mid,ItemIdx:1*yt.idx,BizUin:ut.biz,ItemShowType:1*ut.itemShowType,SessionId:ut.sessionId,EnterId:1*ut.enterId,Scene:1*ut.scene,SubScene:1*ut.subScene,QaId:nt.dataset.id},e))}function Et(e,t,n){const i={replyListHtml:"",replyList:document.createDocumentFragment()};return e&&e.reply_list&&e.reply_list.length&&(i.leftReplyCount=e.left_reply_cnt,i.leftReplyTips="余下#value#条回复".replace("#value#",e.left_reply_cnt),e.reply_list.forEach((e=>{e.canOp=n,e.content=e.content.htmlEncode(),e.content=L.encode(e.content),e.likeNumFormated=C.formatReadNum(e.like_num),e.replyStatus=void 0===e.reply_status?1:e.reply_status,e.isLogin=it;const t=document.createElement("div");t.innerHTML=q.tmpl('<section class="qa__reply-item js_qa_reply_item<# if (is_my_reply) { #> js_qa_my_reply<# } #>">\n  <div class="qa__reply-hd">\n    <div class="qa__reply-nickname">\n      <# if (is_biz_reply) { #>\n        作者\n      <# } else { #>\n        <#=user_info.nickname#>\n      <# } #>\n    </div>\n    <div class="qa__item-action">\n      <# if (is_my_reply && canOp) { #>\n        <div class="qa__action js_delete_reply" data-id="<#=reply_id#>"><i class="icon_delete"></i></div>\n      <# } #>\n      \x3c!-- 精选之后的才能点赞 --\x3e\n      <# if (replyStatus && isLogin) { #>\n        <div class="qa__action qa__action-praise js_qa_like<# if (my_like_status) { #> praised<# } #>" data-type="2" data-id="<#=reply_id#>">\n          <i class="icon_praise_gray"></i>\n          <span class="js_like_num" data-num="<#=like_num#>">\n            <#=likeNumFormated#>\n          </span>\n        </div>\n      <# } #>\n      <# if (!replyStatus) { #>\n        <div class="qa__action qa__action_normal">未精选</div>\n      <# } #>\n    </div>\n  </div>\n  <p class="qa__reply-content js_qa_reply_content"><#=content#></p>\n</section>',e,!1),i.replyListHtml+=t.innerHTML,i.replyList.appendChild(t.firstChild)}))),i}function Tt(e,t,n=""){const i={answerListHtml:"",fragment:document.createDocumentFragment()};return e.forEach((e=>{e.likeNumFormated=C.formatReadNum(e.like_num),e.canOp=t,e.answer_sn=e.answer_sn||"",e.content=e.content.htmlEncode(),e.oriContent=e.content,e.content=L.encode(e.content),e.isLogin=it;const n=Et(e.reply_info,e.answer_id,t);Object.assign(e,n);const o=document.createElement("div");o.innerHTML=q.tmpl('<div class="qa__list-item js_qa_list_item">\n  \x3c!-- 层主头像 --\x3e\n  <section class="qa__item-avatar">\n    <img src="<#=user_info.headimg#>">\n  </section>\n  <section class="qa__item-bd">\n    <div class="qa__item-info">\n      \x3c!-- 层主昵称 --\x3e\n      <div class="qa__item-nickname">\n        <#=user_info.nickname#>\n      </div>\n      \x3c!-- 点赞 --\x3e\n      <div class="qa__item-action">\n        \x3c!-- span加praised点赞 --\x3e\n        <# if (is_my_answer && canOp) { #>\n          <div class="qa__action js_delete_answer" data-id="<#=answer_id#>"><i class="icon_delete"></i></div>\n        <# } #>\n        \x3c!-- 精选之后的才能点赞 --\x3e\n        <# if (answer_status && isLogin) { #>\n          <div class="qa__action qa__action-praise js_qa_like<# if (my_like_status) { #> praised<# } #>" data-type="1" data-id="<#=answer_id#>">\n            <i class="icon_praise_gray"></i>\n            <span class="js_like_num" data-num="<#=like_num#>">\n              <#=likeNumFormated#>\n            </span>\n          </div>\n        <# } #>\n        <# if (!answer_status) { #>\n          <div class="qa__action qa__action_normal">未精选</div>\n        <# } #>\n      </div>\n    </div>\n\n    \x3c!-- 回答内容 --\x3e\n    <p class="qa__item-content js_qa_item_content"><#=content#></p>\n    \x3c!-- <# if (is_my_answer && canOp) { #>\n    <div class="qa__action qa__action-reply js_write_reply" data-answerid="<#=answer_id#>" data-answersn="<#=answer_sn#>" <# if (replyListHtml) { #>style="display: none;"<# } #>><span>回复</span></div>\n    <# } #> --\x3e\n\n    \x3c!-- 回复 --\x3e\n    <section class="qa__reply">\n      <section class="js_qa_reply_list js_qa_reply_list_<#=answer_id#>">\n        <#=replyListHtml#>\n      </section>\n      <# if (replyListHtml && leftReplyCount) { #>\n        <p class="qa__reply-more js_get_more_reply js_get_more_reply_<#=answer_id#>" data-answerid="<#=answer_id#>" data-answersn="<#=answer_sn#>">\n          <#=leftReplyTips#>\n        </p>\n      <# } #>\n      \x3c!-- <# if (is_my_answer && canOp) { #>\n      <div class="qa__action qa__action-reply js_write_reply" data-answerid="<#=answer_id#>" data-answersn="<#=answer_sn#>" <# if (!replyListHtml) { #>style="display: none;"<# } #>><span>回复</span></div>\n      <# } #> --\x3e\n    </section>\n  </section>\n</div>',e,!1),i.answerListHtml+=o.innerHTML,i.fragment.appendChild(o.firstChild)})),"myAnswerList"===n?gt+=10:"answerList"===n&&(wt+=10),i}function jt(e={}){const t=Object.assign({action:e.action,limit:10,offset:e.offset},yt);R({url:z.join("/mp/qna",t),dataType:"json",success(t){let n;t&&(n=t.qna_info?t.qna_info.answer_info:t.answer_info,e.successCb(n,t))},complete(){e.complete&&e.complete()}})}function Ct(e,t){let n=0;for(;e.offsetParent&&e!==t;)n+=e.offsetTop,e=e.offsetParent;return n}function St(e,t,n){const i=e.dataset.answerid,o=n?Ct(e,at.getScrollEle()):0;R({url:z.join("/mp/qna",Object.assign({action:"get_more_reply",answer_id:i,answer_sn:e.dataset.answersn,limit:10},yt)),dataType:"json",success(t){if(t&&t.reply_info&&t.reply_info.reply_list&&t.reply_info.reply_list.length){const i=Et(t.reply_info,0,!0);i.replyListHtml?(tt(e.parentNode,"js_qa_reply_list").appendChild(i.replyList),i.leftReplyCount?e.innerHTML=i.leftReplyTips:vt(e),n&&at.scrollTo(0,o-48)):vt(e)}}})}function Bt(e){const t=tt(st,`js_get_more_reply_${e}`);t&&St(t,0,!0)}function Rt(){return tt(dt,"js_qa_input")}function Nt(){const e=Rt();return(e.value||e.innerHTML).trim()}function qt(){Nt()?rt.enableBtn():rt.disableBtn()}function Pt(e={}){jt({action:e.action,offset:e.offset,successCb(t,n){if(t&&t.answer_list&&t.answer_list.length){let n,i;"get_my_answer"===e.action?(n="myAnswerList",i=dt,xt(tt(dt,"js_qa_write_head"))):(n="answerList",i=st);tt(i,"js_qa_qna_answer_list").appendChild(Tt(t.answer_list,!0,n).fragment)}e.cb&&e.cb(t,n)}})}function Mt(){if(!dt)return;const e="回复: #value#".replace("#value#",L.encode(ft)),t=tt(dt,"js_reply_top_content");lt?(t.innerHTML=e,xt(t)):vt(t)}function Ot(e){tt(dt,"js_alert_toast_word").innerHTML=e,xt(tt(dt,"js_alert_toast")),setTimeout((()=>{vt(tt(dt,"js_alert_toast"))}),800)}function zt(){let e=0;const t=st.getElementsByClassName("js_qa_list_item");for(let n=0;n<t.length&&t[n].getBoundingClientRect().y<S.getInnerHeight();n++)e++;e>ht&&(ht=e)}function Lt(e,t){if(at)return at.show(),void(e&&t&&Bt(t));let n;st=nt.firstChild.cloneNode(!0);const i=tt(st,"qa__list-more"),o=tt(st,"js_qa_write_answer");i&&vt(i),o&&T.addClass(o,"modalWriteAnswerClass"),tt(st,"js_qa_qna_answer_list").innerHTML="",at=new et(st,{title:"读者讨论",extClass:"qa__card",onPullUpLoad(){n>0&&(at.showPullUpLoading(),Pt({action:"get_more_answer",offset:wt,cb(e,t){at.hidePullUpLoading(),e.left_answer_cnt||0!==t.base_resp.ret?at.finishPullUpLoad():at.showEndLine()}}))},cb(){Pt({action:"get_more_answer",offset:wt,cb(i){if(e&&t)Bt(t);else{const e=ot.dataset.count,t=Ct(tt(st,"js_qa_list_item",e),at.getScrollEle());at.scrollTo(0,t-96)}n=i.left_answer_cnt,n||at.showEndLine()}})},onScroll(){zt()},onHide(){zt(),At({EventType:3,Exposure:ht}),ht=0}}),at.show(),j.on(st,"tap",".js_get_more_reply",(e=>{St(e.delegatedTarget)}))}function Wt(e){let t;const n=lt?"写回复":"参与讨论";if(rt)return Mt(),rt.setTitle(n),e?rt.setCloseBtnStyle("back"):rt.setCloseBtnStyle("close"),void rt.show(!0,Rt());dt=document.createElement("div"),dt.innerHTML=q.tmpl('<div class="qa__modal-reply">\n  <div class="qa__modal-reply-msg js_reply_top_content"></div>\n  <div class="frm_textarea_box_wrp">\n    <span class="frm_textarea_box" style="position: relative; display: block;">\n      <div style="position: relative; height: 9.6em; overflow: hidden; font-size: 17px;">\n        <textarea class="frm_textarea js_qa_input" placeholder="内容被公众号精选后，将对所有人可见。" style="height: 9.6em; width: 100%; border: none; outline: none;"></textarea>\n      </div>\n      <div class="emotion_tool">\n        <span class="emotion_switch" style="display:none;"></span>\n        <span id="js_qa_emotion_switch" class="pic_emotion_switch_wrp">\n          <img class="pic_default" src="<#=window.icon_emotion_switch#>" alt="">\n          <img class="pic_active" src="<#=window.icon_emotion_switch_active#>" alt="">\n          <img class="pic_default_primary" src="<#=window.icon_emotion_switch_primary#>" alt="">\n          <img class="pic_active_primary" src="<#=window.icon_emotion_switch_active_primary#>" alt="">\n        </span>\n      </div>\n    </span>\n  </div>\n  <div class="emotion_panel" id="js_qa_emotion_panel">\n    <span class="emotion_panel_arrow_wrp" id="js_qa_emotion_panel_arrow_wrp">\n      <i class="emotion_panel_arrow arrow_out"></i>\n      <i class="emotion_panel_arrow arrow_in"></i>\n    </span>\n    <div class="emotion_list_wrp" id="js_qa_emotion_slide_wrapper"></div>\n    <ul class="emotion_navs" id="js_qa_emotion_navbar"></ul>\n  </div>\n</div>\n<div class="qa__list-wrp">\n  <div class="qa__list-hd js_qa_write_head" style="display: none;">\n    <span class="qa__list-hd-title">我的讨论内容</span>\n  </div>\n  <div class="qa__list js_qa_qna_answer_list"></div>\n</div>\n\n<div class="js_loading_toast" style="display: none;">\n  <div class="weui-mask_transparent"></div>\n  <div class="weui-toast">\n    <i class="weui-loading weui-icon_toast"></i>\n    <p class="weui-toast__content js_loading_content">正在加载</p>\n  </div>\n</div>\n\n<div class="js_sended_toast" style="display: none;">\n  <div class="weui-mask_transparent"></div>\n  <div class="weui-toast">\n    <i class="weui-icon-success-no-circle weui-icon_toast"></i>\n    <p class="weui-toast__content" id="js_toast_msg">已发送</p>\n  </div>\n</div>\n\n<div class="qa__toast-alert js_alert_toast" style="display: none;">\n  <div class="weui-mask_transparent"></div>\n  <div class="weui-toast">\n    <i class=" qa__icon-alert"></i>\n    <p class="weui-toast__content js_alert_toast_word"></p>\n  </div>\n</div>',{}),rt=new et(dt,{title:n,top:"25px",extClass:"qa__card qa__card_write",hasBtn:!0,disableTransition:!0,onPullUpLoad(){t>0&&(rt.showPullUpLoading(),Pt({action:"get_my_answer",offset:gt,cb(e,t){rt.hidePullUpLoading(),e.left_answer_cnt||0!==t.base_resp.ret?rt.finishPullUpLoad():rt.showEndLine()}}))},onHide(){Rt().blur()},onScroll(e){"up"===e&&Rt().blur()},cb(){Pt({action:"get_my_answer",offset:gt,cb(e){t=e.left_answer_cnt,t||rt.showEndLine()}})},btnClickCb(){rt.disableBtn();const e=lt?"add_reply":"add_answer";xt(tt(dt,"js_loading_toast")),R({url:`/mp/qna?action=${e}`,type:"POST",dataType:"json",data:Object.assign({answer_id:_t,answer_sn:mt,content:Nt(),my_reply_cnt:pt+1,ignore_tips:1},yt),success(e){if(e&&e.base_resp&&0===e.base_resp.ret){if(xt(tt(dt,"js_sended_toast")),setTimeout((()=>{vt(tt(dt,"js_sended_toast"))}),800),Rt().value="",rt.disableBtn(),lt&&e.reply_info&&e.reply_info.reply_list){const t=Et(e.reply_info,0,!0).replyList,n=tt(dt,`js_qa_reply_list_${_t}`);n.appendChild(t.cloneNode(!0)),xt(tt(n.parentNode,"js_write_reply")),vt(tt(n.parentNode.parentNode,"js_write_reply"))}else if(!lt&&e.answer_info&&e.answer_info.answer_list){const t=tt(dt,"js_qa_qna_answer_list");t.insertBefore(Tt(e.answer_info.answer_list,!0).fragment,t.firstChild),xt(tt(dt,"js_qa_write_head"))}}else rt.enableBtn(),168003===e.base_resp.ret||168007===e.base_resp.ret?Ot("内容涉嫌违反平台协议或法规政策"):168004===e.base_resp.ret?Ot("关注该公众号才能参与讨论"):168005===e.base_resp.ret?Ot("关注该公众号3天及以上才能参与讨论"):168008===e.base_resp.ret||168009===e.base_resp.ret?Ot("字数不能多于"+(lt?140:600)):It()},error(){It(),rt.enableBtn()},complete(){vt(tt(dt,"js_loading_toast")),Rt().blur()}})},makeFakeInputEle(){const e=Rt(),t=e.cloneNode();t.id="tmp_input",t.style.top=0,t.style.position="absolute",e.parentNode.insertBefore(t,e),t.value=e.value,t.scrollTop=e.scrollTop},removeInputEle(){const e=document.getElementById("tmp_input");e&&e.parentNode.removeChild(e)},makeInputEleBigger(){const e=Rt();e.style.borderTop="solid 1000px transparent",e.style.position="relative",e.style.top="-1000px"}}),Mt(),rt.disableBtn(),e?rt.setCloseBtnStyle("back"):rt.setCloseBtnStyle("close"),rt.show(!0,Rt()),function(){const e=Rt();j.on(dt,"tap",".js_get_more_reply",(e=>{St(e.delegatedTarget)})),j.on(e,"input",qt),j.on(e,"tap",(()=>{rt.scrollTo(0,0)}))}(),new L.Emotion({emotionPanel:D("#js_qa_emotion_panel"),inputArea:D(Rt()),emotionPanelArrowWrp:D("#js_qa_emotion_panel_arrow_wrp"),emotionSwitcher:D("#js_qa_emotion_switch"),emotionSlideWrapper:D("#js_qa_emotion_slide_wrapper"),emotionNavBar:D("#js_qa_emotion_navbar"),inputEmotion(){qt()}})}var Dt={renderQaCard:function(e={}){nt&&(yt.mid=e.mid,yt.idx=e.idx,ut.userUin=e.userUin,ut.biz=e.biz,ut.itemShowType=e.itemShowType,ut.enterId=e.enterId,ut.scene=e.scene,ut.subScene=e.subScene,ut.sessionId=e.sessionId,it=e.isLogin,jt({action:"get_qna_info",successCb(e,t){let n,i,o,a;const s=t.base_resp.ret,r=168001===s,d=t.qna_info&&t.qna_info.question_info;r?nt.innerHTML=q.tmpl(Ke,{qaDeleted:r}):0===s&&("1"===z.getQuery("js_my_answer")&&(Wt(),kt(4)),e&&e.answer_list&&e.answer_list.length&&(o=Tt(e.answer_list,!1).answerListHtml,i=e.answer_list.length,e.left_answer_cnt&&(n="余下#value#条讨论内容".replace("#value#",e.left_answer_cnt))),1===d.can_answer_type&&0===t.qna_info.is_fans?a="作者已设置关注后才可参与讨论":2===d.can_answer_type&&0===t.qna_info.is_fans_days&&(a="作者已设置关注7天后才可参与讨论"),nt.innerHTML=q.tmpl(Ke,{qaDeleted:r,answerCount:i,leftAnswerCnt:n,answerListStr:o,disableAnswerWord:a,title:L.encode(d.question_title.htmlEncode()),nickname:d.biz_info.nickname,isLogin:it}),ot=tt(nt,"js_more_answer_entry"),function(){let e;function t(){if(e)return;const t=nt.firstChild,n=g.getOffset(t).offsetTop,i=S.getScrollTop();i+S.getInnerHeight()>=n&&i<=n+t.offsetHeight&&(At({EventType:1}),kt("0"),e=!0)}j.on(nt,"tap",".js_get_more_reply",(e=>{const t=e.delegatedTarget.dataset.answerid;bt[t]?Lt():(Lt(!0,t),bt[t]=!0)})),j.on(document.body,"click",".js_qa_write_answer",(e=>{lt=!1,Wt(T.hasClass(e.delegatedTarget,"modalWriteAnswerClass")),kt(2)})),j.on(document.body,"click",".js_write_reply",(e=>{const t=e.delegatedTarget,n=t.parentNode.parentNode;if(_t=t.dataset.answerid,mt=t.dataset.answersn,n){const e=n.getElementsByClassName("js_qa_reply_content");pt=n.getElementsByClassName("js_qa_my_reply").length,ft=e.length?e[e.length-1].innerHTML:tt(n,"js_qa_item_content").innerHTML}lt=_t,lt&&(Wt(!0),kt(3))})),j.on(ot,"click",(()=>{Lt(),At({EventType:2}),kt(1)})),j.on(document.body,"tap",".js_qa_like",(e=>{const t=e.delegatedTarget,n=T.hasClass(t,"praised");T.toggleClass(t,"praised");const i=tt(t,"js_like_num");let o=(parseInt(i.dataset.num,10)||0)+(n?-1:1);o=o>=0?o:0,i.innerHTML=C.formatReadNum(o),i.dataset.num=o,kt("2"===t.dataset.type?6:5),R({url:"/mp/qna?action=like",type:"POST",data:Object.assign({like_type:t.dataset.type,op:n?2:1,answer_id:t.dataset.id,reply_id:t.dataset.id},yt)})})),j.on(document.body,"tap",".js_delete_answer",(e=>{const t=e.delegatedTarget;kt(7),setTimeout((()=>{window.weui.confirm("确定删除讨论内容吗？",{buttons:[{label:"取消",type:"default"},{label:"删除",type:"primary",onClick(){R({url:"/mp/qna?action=del_answer",type:"POST",dataType:"json",data:Object.assign({answer_id:t.dataset.id},yt),success(e){if(e&&e.base_resp&&0===e.base_resp.ret){const e=t.parentNode.parentNode.parentNode.parentNode;e&&T.hasClass(e,"js_qa_list_item")&&e.parentNode.removeChild(e)}else It()}})}}]})}),50)})),j.on(document.body,"tap",".js_delete_reply",(e=>{const t=e.delegatedTarget;kt(8),setTimeout((()=>{window.weui.confirm("确定删除回复吗？",{buttons:[{label:"取消",type:"default"},{label:"删除",type:"primary",onClick(){R({url:"/mp/qna?action=del_reply",type:"POST",dataType:"json",data:Object.assign({reply_id:t.dataset.id},yt),success(e){if(e&&e.base_resp&&0===e.base_resp.ret){const e=t.parentNode.parentNode.parentNode;if(e&&T.hasClass(e,"js_qa_reply_item")){const t=e.parentNode;t.removeChild(e),t.children.length||(vt(t.parentNode),vt(tt(t.parentNode,"js_write_reply")),xt(tt(t.parentNode.parentNode,"js_write_reply")))}}else It()}})}}]})}),50)})),S.bindDebounceScrollEvent(t),t()}())}}))}};const Ht=()=>(65536*(1+Math.random())|0).toString(16).substring(1),Ut=1,$t=2,Vt=["P","DIV","SECTION","LI","H1","H2","H3","H4","H5","H6","TABLE","PRE","BLOCKQUOTE"],Jt=["js_product_container","js_blockquote_wrap"],Ft=["IFRAME","VIDEO","MPVOICE","MPGONGYI","QQMUSIC","MPSHOP","MP-WEAPP","MP-MINIPROGRAM","MPPRODUCT","MPCPS"],Xt=["js_mpvideo"],Gt=["js_product_container"];let Kt={};const Qt=(e,t=Vt)=>{if(!e||1!==e.nodeType)return!1;for(let n=0;n<e.children.length;n++)if(-1!==t.indexOf(e.children[n].tagName))return!0;return!1};function Yt(e,t="className",n=Jt){for(let i=0;i<n.length;i++)if(e[t]&&"string"==typeof e[t]&&e[t].indexOf(n[i])>-1)return!0;return!1}const Zt=e=>{const{parentNode:t}=e;return e.parentNode.removeChild(e),!t.children||!t.children.length},en=(e,{getNestedStructure:t=!0,removeIgoreEle:n=!1})=>{const i=function e(t,i){const o=t.children;if(!o)return[];if(!o.length)return o;let a,s=[];for(let r=0;r<o.length;r++)a=o[r],Yt(a,"id",Xt)||Yt(a,"className",Gt)?n&&(a.parentNode.removeChild(a),r-=1):Qt(a,Ft)?n&&(Zt(a),r-=1):Qt(a,Vt)&&!Yt(a)?(s=s.concat(e(a,i)),i&&(a.getAttribute("data-index")||s.push(a))):a.getAttribute("data-index")||s.push(a);return s}(e,t);return[].slice.call(i)};en.paragraphStartIdx=1e6;const tn=e=>-1!==Vt.indexOf(e.tagName)&&void 0!==e.dataset.index?e:tn(e.parentNode),nn=e=>e?-1!==Vt.indexOf(e.tagName)?e:nn(e.parentNode):e,on=e=>e&&(e.nodeValue||e.innerText);function an({$blockNode:e,$node:t}){if(null===e)return null;const n=[];let i=0;for(n.push(e);n.length>0;){const e=n.pop();if(3===e.nodeType&&e.nodeValue!==t.nodeValue)i+=e.textContent.length;else if(1===e.nodeType){if(i+=1,e===t)break}else if(e.nodeValue===t.nodeValue){i+=e.textContent.length;break}const o=e.childNodes;for(let t=o.length-1;t>=0;t--)n.push(o[t])}return i}function rn(e){const t=tn(e),n={$blockNode:t,$node:e,paraIndex:+t.dataset.index,offset:0};return{start:n,end:n,id:Ht()}}const dn=e=>{const{start:t,end:n,id:i}=e,o=an(t),a=t.$node===n.$node?n.offset-t.offset+o:an(n);return{id:i,start:{para_offset:o,para_index:t.paraIndex},end:{para_offset:a,para_index:n.paraIndex}}};function cn(e){return"IMG"===e.tagName||3===e.nodeType?e:e.childNodes[0]}const ln=(e,t)=>!(!e||"string"!=typeof e||-1===e.indexOf(t)),pn=(e,t="",n=document.body)=>{if(!e||e===n)return t;const i=e.getAttribute("id"),o=e.getAttribute("class"),a=e.tagName.toLowerCase();let s=null;if(i&&!ln(o,"articlepart-selector-area_choice-button_wrap"))return t?`#${i}>${t}`:`#${i}`;const r=(e=>{const t="rich_pages,blockquote_info,blockquote_biz,blockquote_other,blockquote_article,js_jump_icon,h5_image_link,js_banner_container,js_list_container,js_cover,js_tx_video_container,js_product_err_container,js_product_loop_content,js_product_container,img_loading,list-paddingleft-1,list-paddingleft-2,list-paddingleft-3,selectTdClass,noBorderTable,ue-table-interlace-color-single,ue-table-interlace-color-double,__bg_gif,weapp_text_link,weapp_image_link,js_img_loading,wx_video_context,db,wx_video_thumb_primary,wx_video_play_btn,wx_video_mask,qqmusic_area,tc,tips_global,unsupport_tips,qqmusic_wrp,appmsg_card_context,appmsg_card_active,wx_tap_card,js_wx_tap_highlight,wx_tap_link,qqmusic_bd,play_area,icon_qqmusic_switch,pic_qqmusic_default,qqmusic_thumb,access_area,qqmusic_songname,qqmusic_singername,qqmusic_source,js_audio_frame,share_audio_context,flex_context,pages_reset,share_audio_switch,icon_share_audio_switch,share_audio_info,flex_bd,share_audio_title,share_audio_tips,share_audio_progress_wrp,share_audio_progress,share_audio_progress_inner,share_audio_progress_buffer,share_audio_progress_loading,share_audio_progress_loading_inner,share_audio_progress_handle,share_audio_desc,share_audio_length_current,share_audio_length_total,video_iframe,vote_iframe,js_editor_vote_card,res_iframe,card_iframe,js_editor_card,weapp_display_element,js_weapp_display_element,weapp_card,app_context,weapp_card_bd,weapp_card_profile,radius_avatar,weapp_card_avatar,weapp_card_nickname,weapp_card_info,weapp_card_title,weapp_card_thumb_wrp,weapp_card_ft,weapp_card_logo,js_pay_btn,pay,pay__mask,wx_video_loading,js_redpacketcover,js_uneditable,js_uneditablemouseover,js_editor_qqmusic,js_editor_audio,ct_geography_loc_tip,js_poi_entry".split(","),n=[new RegExp("^weui"),new RegExp("^appmsg"),new RegExp("^audio"),new RegExp("^music"),new RegExp("^cps_inner"),new RegExp("^bizsvr_"),new RegExp("^code-snippet"),new RegExp("^qa__"),new RegExp("^wx-edui-"),new RegExp("^wx_"),new RegExp("^wx-")];if(!e)return null;let i=e.split(/\s+/);const o=[];for(let s=0,r=i.length;s<r;++s){let e=i[s];if(e&&-1!==t.indexOf(e))o.push(e);else for(let t=0,i=n.length;t<i;t++)if(n[t].test(e)){o.push(e);break}}const a=o.join(".");return a&&"."+a})(o);return s=r||(ln(o,"js_choice-img")?".js_choice-img":ln(o,"articlepart-selector-area_choice")&&e.dataset.splitid?"":a),pn(e.parentNode,[s,t].filter((e=>!!e)).join(">"),n)},_n=(e,t)=>{const n=pn(e,"",t);let i=[];try{i=t.querySelectorAll(n)}catch(s){console.log("get node selector wrap err",s)}const o=i.length;let a=null;for(let r=0;r<o;r++)if(e===i[r]){a=r;break}null===a&&"undefined"!=typeof WX_BJ_REPORT&&WX_BJ_REPORT.BadJs&&WX_BJ_REPORT.BadJs.report("ArticleMask:Error","selector:node not find",{mid:"mmbizwap:articlemask_Monitor",view:"wap_business",_info:{selector:n}});return(n||"").replace(">.js_choice-img>",">")+`|${o} ${a||0}`},mn=(e,t)=>{const n=t||document.getElementById("js_content");return e.map((e=>{const{$node:t,type:i,idx:o}=e;let a=null,s=null,r="";return i===Ut?t&&t.data&&(a=_n(t.parentNode,n),s=t.data,r=t.previousSibling&&t.previousSibling.data):i===$t&&(a=_n(t,n),s=t.src),{data:s,idx:o,type:i,meta:r,selector:a}})).filter((e=>!!e.selector&&!!e.data))};function un(e){return e.reduce(((t,n,i)=>{if(0===i)return n.type===Ut?t.text.push(n.data):n.type===$t&&t.pic.push(n.data),t;if(n.type===Ut){if(e[i-1].type===Ut){let e=t.text.pop();e+=n.data,t.text.push(e)}else t.text.push(n.data);return t}return n.type===$t&&t.pic.push(n.data),t}),{audio:[],pic:[],video:[],text:[]})}var wn={getDomMeta:e=>{const{$node:t,$parentNode:n}=e;return{parentIndex:Number(n.dataset.index),fromParentoffset:an(n)}},getContent:un,getParaList:en,getBlockNode:tn,getSelectedNodes:e=>{const{start:t,end:n}=e,{$node:i,offset:o}=t,{$node:a,offset:s}=n;return i===a&&i instanceof Text?((e,t,n,i)=>{try{e.splitText(t)}catch(a){"undefined"!=typeof WX_BJ_REPORT&&WX_BJ_REPORT.BadJs&&WX_BJ_REPORT.BadJs.report("ArticleMask:Error","splitText Error",{mid:"mmbizwap:articlemask_Monitor",view:"wap_business",_info:{type:"getSplitTextNode textnode",startOffset:t,endOffset:n}})}const o=e.nextSibling;try{o.splitText(n-t)}catch(s){"undefined"!=typeof WX_BJ_REPORT&&WX_BJ_REPORT.BadJs&&WX_BJ_REPORT.BadJs.report("ArticleMask:Error","splitText Error",{mid:"mmbizwap:articlemask_Monitor",view:"wap_business",_info:{type:"getSplitTextNode nextSibling",startOffset:t,endOffset:n}})}return[{$node:o,type:Ut,idx:i}]})(i,o,s,t.paraIndex):(e=>{const{start:t,end:n,$container:i}=e,{$node:o,offset:a}=t,{$node:s,offset:r}=n,d=[],c=[];let l=!1,p=!1,_=0;for(d.push(i);d.length>0;){const e=d.pop(),{nodeType:t,tagName:n}=e;if(e.dataset&&e.dataset.index&&(_=+e.dataset.index),l&&!p&&(3===t&&c.push({$node:e,type:Ut,idx:_}),"IMG"===n&&c.push({$node:e,type:$t,idx:_})),e===o){if(3===t){try{e.splitText(a)}catch(m){WX_BJ_REPORT.BadJs.report("ArticleMask:Error","splitText Error",{mid:"mmbizwap:articlemask_Monitor",view:"wap_business",_info:{type:"getNodes startNode",startOffset:a,endOffset:r}})}const t=e.nextSibling;c.push({$node:t,type:Ut,idx:_})}else"IMG"===n?c.push({$node:e,type:$t,idx:_}):c.push({$node:e,type:Ut,idx:_});l=!0}if(e===s||p){if(p||(p=!0),e===s&&c.pop(),3===t){try{e.splitText(r)}catch(m){"undefined"!=typeof WX_BJ_REPORT&&WX_BJ_REPORT.BadJs&&WX_BJ_REPORT.BadJs.report("ArticleMask:Error","splitText Error",{mid:"mmbizwap:articlemask_Monitor",view:"wap_business",_info:{type:"getSplitTextNode endNode",startOffset:a,endOffset:r}})}c.push({$node:e,type:Ut,idx:_});break}if("IMG"===n){c.push({$node:e,type:$t,idx:_});break}{const t=e.childNodes;for(let e=t.length-1;e>=0;e--)d.push(t[e])}}const i=e.childNodes;for(let o=i.length-1;o>=0;o--)d.push(i[o])}return c})(e)},connectSiblingText:(e,t,n)=>{const i=n===e?t:e;if(!on(e)||!on(t))return i;const o=(e.nodeValue||e.innerText)+(t.nodeValue||t.innerText);return n.nodeValue=o,n.parentNode.removeChild(i),n},getTextNodeByOffset:(e,t)=>{const n=[];let i,o=0,a=0;for(n.push(e);n.length>0&&(i=n.pop(),!(3===i.nodeType&&(a=t-o,o+=i.textContent.length,o>=t)));){const e=i.childNodes;for(let t=e.length-1;t>=0;t--)n.push(e[t])}return{$parentNode:e,$node:i,offset:a}},getBlockOffset:an,getSelection:()=>{const e=window.getSelection();if(null===e.anchorNode)return null;const t=e.getRangeAt(0);if(!t||!e.toString())return null;const{startContainer:n,endContainer:i,commonAncestorContainer:o,startOffset:a,endOffset:s}=t,r=tn(n),d=tn(i),c=r&&r.dataset.index,l=d&&d.dataset.index;return{start:{$blockNode:r,$node:n,offset:a,paraIndex:Number(c)},end:{$blockNode:d,$node:i,offset:s,paraIndex:Number(l)},$container:"string"==typeof o?o.parentNode:o,id:Ht()}},transferTextToElement:(e,t)=>{if(!e)return null;if(3===e.nodeType){const n=document.createElement("span");return n.setAttribute("data-splitid",t),n.appendChild(e.cloneNode(!1)),e.parentNode&&e.parentNode.replaceChild(n,e),n}return e},serialize:dn,deSerialize:(e,t,n)=>{const i=(e=>t=>{const{para_offset:n,para_index:i}=t,o=e[i],a=[];let s,r=0,d=0;for(a.push(o);a.length>0&&(s=a.pop(),!(3===s.nodeType&&(d=n-r,r+=s.textContent.length,r>=n)))&&!(1===s.nodeType&&(d=n-r,r+=1,r>=n));){const e=s.childNodes;for(let t=e.length-1;t>=0;t--)a.push(e[t])}return{$blockNode:o,$node:s,offset:d,paraIndex:i}})(t);return{start:i(e.start),end:i(e.end),id:e.id,$container:n}},resetRange:e=>{window.getSelection().removeAllRanges();const t=window.getSelection(),n=document.createRange(),i=cn(Kt.start),o=cn(Kt.end);n.setStart(i,e.start.offset),n.setEnd(o,e.end.offset),t.addRange(n)},serializeToC:e=>e.map((e=>{const{$node:t,type:n,idx:i}=e;let o=0,a=null,s="";const r=tn(t);if(n===Ut){const e=((e,t)=>{const n=[];let i=0;for(n.push(e);n.length>0;){const e=n.pop();if(e===t)break;i++;const{children:o}=e;for(let t=0;t<o.length;t++)n.push(o[t])}return i})(r,t.parentNode);t&&t.data&&(o=e,a=t.data,s=t.previousSibling&&t.previousSibling.data)}else if(n===$t){const e=r.getElementsByTagName("img");a=t.src,o=Array.prototype.slice.call(e).slice(0).indexOf(t)}return{data:a,index:o,idx:i,type:n,meta:s}})).filter((e=>e.index>-1&&!!e.data)),setProperty:function(e,t,n,i){e.style.setProperty?(i=i||null,e.style.setProperty(t,n,i)):void 0!==e.style.cssText&&(i=i?"!"+i:"",e.style.cssText+=";"+t+":"+n+i+";")},hasImgNode:function(e){if(!e)return!1;const{nodeType:t,tagName:n}=e;return 3!==t&&"IMG"===n},nodeToSelection:rn,saveNode:function(e,t){Kt[t]=e},serializeNode:function(e,t){const n=rn(e),i=mn([{$node:e,type:$t,idx:n.start.paraIndex}],t);return{meta:{anchorTree:i,anchorMeta:dn(n),anchorBrief:un(i)},range:n}},getNodeByIndex:(e,t)=>{const n=[];let i=0,o=null;for(n.push(e);n.length>0;){const e=n.pop();if(i===t){o=e;break}i++;const{children:a}=e;for(let t=0;t<a.length;t++)n.push(a[t])}return o},findChildIndex:function(e,t){const{childNodes:n}=e;let i=t,o=null,a=0;for(a=0;a<n.length;a++)if(o=n[a],3===o.nodeType){let e=o.length;if(e>i)break;i-=e}return{$node:o,cursor:i}},serializeToC2:mn,blockEleTagName:Vt,getPureBlockNode:nn,qs:(e,t)=>(t||document).querySelector(e),qsAll:(e,t)=>(t||document).querySelectorAll(e),hasClass:ln};let gn=[],hn=0;const fn=2;function yn(e,t){const n="object"==typeof e?e:gn[e];if(n.dataset.hasBanner)return;const i=document.createElement("div");i.dataset.hasBanner=1,i.style="background-color: var(--weui-BG-1);font-size: 14px;color: var(--weui-FG-2);text-align: left;margin-top: 20px;margin-bottom: 4px;padding: 4px 8px 6px 8px;border-radius:4px;";const o=document.createElement("span");o.style="color: var(--weui-FG-0);padding: 2px;display: inline-block;vertical-align: middle; width: 20px;height: 20px;margin-right: 4px; background-size: cover;background-position: center center;-webkit-mask: url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'%3E  %3Cpath fill-opacity='.3' fill-rule='evenodd' d='M10 1.667a8.333 8.333 0 1 1 0 16.666 8.333 8.333 0 0 1 0-16.666zm-.004 11.115a.732.732 0 0 0-.746.735c0 .416.33.735.746.735a.73.73 0 0 0 .752-.735.73.73 0 0 0-.752-.735zm.638-7.669h-1.27l.091 6.33h1.088l.091-6.33z'/%3E%3C/svg%3E\") no-repeat 50% 50%;mask: url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'%3E  %3Cpath fill-opacity='.3' fill-rule='evenodd' d='M10 1.667a8.333 8.333 0 1 1 0 16.666 8.333 8.333 0 0 1 0-16.666zm-.004 11.115a.732.732 0 0 0-.746.735c0 .416.33.735.746.735a.73.73 0 0 0 .752-.735.73.73 0 0 0-.752-.735zm.638-7.669h-1.27l.091 6.33h1.088l.091-6.33z'/%3E%3C/svg%3E\") no-repeat 50% 50%;background-color: currentColor;";const a=document.createElement("span");a.style="display: inline-block;line-height: 14px;vertical-align: middle;",a.innerHTML=t,i.appendChild(o),i.appendChild(a),n.parentNode.insertBefore(i,n,null),n.dataset.hasBanner=1}function bn(e,t,n){const i=e.length,o=[...Array(i)].map((()=>"〇")).join(""),{childNodes:a}=t;let s=n;for(let r=0;r<a.length;r++){const e=a[r];3===e.nodeType?s>e.data.length?s-=e.data.length:e.data=e.data.slice(0,s).concat(o).concat(e.data.slice(s+i)):1===e.nodeText&&(s-=e.innerText&&e.innerText.length||0)}}function vn(e,t,n){const i=e.length,{$node:o,realOffset:a}=wn.findChildIndex(t,n);try{o.splitText(a)}catch(d){"undefined"!=typeof WX_BJ_REPORT&&WX_BJ_REPORT.BadJs&&WX_BJ_REPORT.BadJs.report("ArticleMask:Error","splitText Error",{mid:"mmbizwap:articlemask_Monitor",view:"wap_business",_info:{type:"disputeText textNode",data:e,cursor:n}})}const s=o.nextSibling;try{s.splitText(i)}catch(d){"undefined"!=typeof WX_BJ_REPORT&&WX_BJ_REPORT.BadJs&&WX_BJ_REPORT.BadJs.report("ArticleMask:Error","splitText Error",{mid:"mmbizwap:articlemask_Monitor",view:"wap_business",_info:{type:"disputeText nextSibling",data:e,cursor:n}})}const r=document.createElement("span");r.style="background-color: rgba(0,0,0,0.10);",r.appendChild(s.cloneNode(!0)),s.parentNode.replaceChild(r,s)}function xn(e,t){const n=document.createElement("span");n.style="position:relative;display: inline-block;";const i=document.createElement("span");i.style="\n            position: absolute;\n            top: 4px;\n            left: 4px;\n            display: inline-block;\n            vertical-align: middle;\n            width: 24px;\n            height: 24px;\n            background-size: cover;\n            background-image: url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E  %3Cpath fill='%23FFF' fill-rule='evenodd' d='M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm-.004 13.339a.878.878 0 0 0-.896.882c0 .499.396.882.896.882.512 0 .902-.383.902-.882 0-.5-.39-.882-.902-.882zm.765-9.203h-1.524l.11 7.596h1.305l.11-7.596z'/%3E%3C/svg%3E\");\n    ";const o=t.parentNode;n.appendChild(t.cloneNode(!1)),o.replaceChild(n,t),n.appendChild(i)}function kn(e,t){t.style.filter="blur(10px)",t.style["-webkit-filter"]="blur(10px)"}function In(e,t){const{data:n,meta:i,index:o,idx:a}=e,s=t.data,r=(i||"")+n;if(-1===s.indexOf(r))return{hit:!1};const d=wn.getNodeByIndex(gn[a],o);d?hn++:"undefined"!=typeof WX_BJ_REPORT&&WX_BJ_REPORT.BadJs&&WX_BJ_REPORT.BadJs.report("ArticleMask:Error","text node cannot find",{mid:"mmbizwap:articlemask_Monitor",view:"wap_business",_info:{anchor:e,wholeText:s}});const c=d&&d.innerText.indexOf(r)+(i||"").length;return{hit:!!d,$hitDom:d,cursor:c}}function An(e,t){const{index:n,idx:i,data:o}=e,a=gn[i].querySelectorAll("img")[n];return(a&&(a.getAttribute("data-src")||a.getAttribute("src")))===o?(hn++,{hit:!0,$hitDom:t,cursor:0}):{hit:!1}}function En(e,t){return(n,i,o)=>{const{hit:a,$hitDom:s,cursor:r}=n(e,t);a&&(i(e.data,s,r),o())}}function Tn(e,t){if(!e)return null;const{type:n,data:i,meta:o}=t;if(n===Ut){const t=e.innerText||"",n=(o||"")+i;if(-1!==t.indexOf(n)){return{cursor:t.indexOf(n)+(o||"").length,node:e}}}if(n===$t){if((e&&(e.getAttribute("data-src")||e.getAttribute("src")))===i)return{cursor:0,node:e}}return null}function jn(e,t){gn=wn.getParaList(e,{getNestedStructure:!0,removeIgoreEle:!1});const n=(i="idx",t.reduce(((e,t)=>(void 0===t[i]||(e[t[i]]||(e[t[i]]=[]),e[t[i]].push(t)),e)),{}));var i;gn&&((gn||[]).forEach(((e,t)=>{const i=n[t];i&&i.length>0&&(yn(t,(i[0],'以下内容存在争议 <a style="color: var(--weui-LINK);" target="_blank" href="https://mp.weixin.qq.com/s/_2kC-fXw7UjneZSrsC9CVQ">了解更多</a>')),function(e,t){const n=[],i=[...e];n.push(t);let o=null;const a=()=>{o=i.shift()};for(a();n.length>0&&i.length>=0&&o;){const e=n.pop();if(!e)continue;if(!o)continue;const{nodeType:t,tagName:i}=e,s=En(o,e);if(3===t){o.type===Ut&&s(In,o.status===fn?bn:vn,a);continue}if(1===t&&"IMG"===i){o.type===$t&&s(An,o.status===fn?kn:xn,a);continue}const r=e.childNodes;for(let o=r.length-1;o>=0;o--)n.push(r[o])}}(i,e))})),t&&t.length!==hn&&"undefined"!=typeof WX_BJ_REPORT&&WX_BJ_REPORT.BadJs&&WX_BJ_REPORT.BadJs.report("ArticleMask:Error","totalHit",{mid:"mmbizwap:articlemask_Monitor",view:"wap_business",_info:{totalHit:hn,anchors:t}}))}function Cn(e,r){const d=[],c=[],l=[],p={};r.forEach(((r,_)=>{const{selector:m,index:u,total:w}=function(e){if(!e)return{};const[t,n]=e.split("|"),[i,o]=n.split(" ");return{selector:t.replace(/&gt;/g,">"),total:1*i,index:1*o}}(r.selector);let g=p[m]||[];if(0===g.length)try{g=e.querySelectorAll(m),p[m]=g}catch(A){"undefined"!=typeof WX_BJ_REPORT&&WX_BJ_REPORT.BadJs&&WX_BJ_REPORT.BadJs.report("ArticleMask:Error","splitText Error",{mid:"mmbizwap:articlemask_Monitor",view:"wap_business",_info:{anchor:r}})}let h=u,f=u;const y=[];let b=null,v=0,x=0;for(y.push(g[u]);y.length;){const e=Tn(y.pop(),r);if(x++,e&&e.node){b=e.node,v=e.cursor;break}h-1>=0&&g[h-1]&&(y.push(g[h-1]),h-=1),f+1<g.length&&g[f+1]&&(y.push(g[f+1]),f+=1)}var k,I;b?(l.push({anchor:r,node:b,cursor:v}),function(e,t){const n=wn.getPureBlockNode(e);n&&yn(n,'以下内容存在争议 <a style="color: var(--weui-LINK);" target="_blank" href="https://mp.weixin.qq.com/s/_2kC-fXw7UjneZSrsC9CVQ">了解更多</a>')}(b)):m&&-1!==m.lastIndexOf(">")&&d.push((k=((e,t)=>{for(var n in t||(t={}))o.call(t,n)&&s(e,n,t[n]);if(i)for(var n of i(t))a.call(t,n)&&s(e,n,t[n]);return e})({},r),I={selector:m&&m.slice(0,m.lastIndexOf(">"))+`|${w} ${u}`},t(k,n(I)))),c[_]=x})),l.forEach((e=>{!function(e,t,n){const{type:i,data:o,status:a}=e;a===fn&&(i===Ut&&bn(o,t,n),i===$t&&kn(0,t))}(e.anchor,e.node,e.cursor)})),d.length&&(Cn(e,d),"undefined"!=typeof WX_BJ_REPORT&&WX_BJ_REPORT.BadJs&&WX_BJ_REPORT.BadJs.report("ArticleMask:Error","missNodes",{mid:"mmbizwap:articlemask_Monitor",view:"wap_business",_info:{missNodes:d}})),"undefined"!=typeof WX_BJ_REPORT&&WX_BJ_REPORT.BadJs&&WX_BJ_REPORT.BadJs.report("ArticleMask:Info","querycount",{mid:"mmbizwap:articlemask_Monitor",view:"wap_business",_info:{countList:c}})}var Sn={init:function(e,t){let n=[],i=[];t.forEach((e=>{e.selector?i.push(e):n.push(e)})),function(e,t){Cn(e,t)}(e,i),n.length>0&&jn(e,n)}};const Bn=function(e,t){let n=!1,i=e;if(e===t)n=!0;else for(;i.parentNode&&(i=i.parentNode,1!==i.nodeType||"body"!==i.tagName.toLowerCase());)if(i===t){n=!0;break}return n},Rn=function(e){this.biz=e.biz,this.logid=e.logid,this.baseData=e.baseData,this.isPaySubscribe=e.isPaySubscribe,this.container=e.container,this.totalLength=this.container.innerText.length,this.initEvent()};Rn.prototype.initEvent=function(){j.on(document,"copy",(()=>{const e=[].concat(this.baseData),t=this.getContentData().trim();t.length&&(e.push(this.totalLength),e.push(""),e.push(t.length),e.push(this.isPaySubscribe),this.report(e.join(",")))}))},Rn.prototype.getContentData=function(){const e=document.getSelection(),t=this.container;let n="";if(e&&e.rangeCount){const i=e.getRangeAt(0);if(!i.collapsed){const o=i.startContainer,a=i.startOffset,s=i.endContainer,r=i.endOffset,d=Bn(o,t),c=Bn(s,t);if(d&&c)n=i.toString();else if(d||c){const e=document.createRange();e.setStart(o,a),e.setEnd(s,r),!c&&e.setEndAfter(t),!d&&e.setStartBefore(t),n=e.toString()}else if(e.containsNode&&e.containsNode(t,!0)){const e=document.createRange();e.setEndAfter(t),e.setStartBefore(t),n=e.toString()}}}return n},Rn.prototype.report=function(e){const t=this.biz,n=this.logid;R({url:"/mp/webcommreport?action=report&report_useruin=1&__biz="+t,type:"POST",data:{logid:n,buffer:e},async:!1,timeout:2e3})};let Nn=null;if(window.parent!==window){let e=function(e){let t;console.log("[IFRAME RECEIVE MESSAGE]: ",e),e.origin?t=e.origin:e.originalEvent&&(t=e.originalEvent.origin),/^http(s)?\:\/\/finance\.qq\.com$/.test(t)&&/^http(s)?\:\/\/gu\.qq\.com$/.test(t)&&/^http(s)?\:\/\/wzq\.tenpay\.com$/.test(t)&&e.source&&(e.data,document.getElementsByTagName("body")[0],document.getElementById("activity-name"),document.getElementById("meta_content"),document.getElementById("page-content"))};document.getElementsByTagName("html")[0].style.width="1px",document.getElementsByTagName("html")[0].style.minWidth="100%",document.getElementById("js_content"),document.getElementById("img-content");let t=document.getElementById("page-content");document.getElementsByClassName("rich_media_area_extra")[0].style.display="none",Nn=function(e){console.info("postPageHeightMessage");let n=getComputedStyle(t);window.parent.postMessage({name:e,data:parseFloat(n.height)},"http://finance.qq.com"),window.parent.postMessage({name:e,data:parseFloat(n.height)},"http://gu.qq.com"),window.parent.postMessage({name:e,data:parseFloat(n.height)},"https://gu.qq.com"),window.parent.postMessage({name:e,data:parseFloat(n.height)},"https://wzq.tenpay.com")},Nn("pageHeight"),window.addEventListener("message",e,!1)}var qn=Nn;const Pn={copyright_top:0};function Mn(e){let t=["/mp/copyrightreport?action=report&biz=",biz,"&scene=",e.scene,"&user_uin=",user_uin,"&uin=",uin,"&key=",key,"&pass_ticket=",pass_ticket,"&mid=",window.mid,"&idx=",window.idx,"&source_biz=",window.source_biz,"&source_mid=",window.source_mid,"&source_idx=",window.source_idx,"&card_version=2","&show_appmsg_scene=",window.source,"&session_id=",window.sessionid,"&has_recommend_msg=",window.hasRecommendMsg,"&t=",Math.random()].join("");window.isSg&&(t+="&from=sougou"),(new Image).src=t.substr(0,1024)}function On(){(window.pageYOffset||document.documentElement.scrollTop)+S.getInnerHeight()>Pn.copyright_top&&(Mn({scene:"1",card_pos:"0"}),j.off(window,"scroll",On),On=Pn.copyright_top=null)}function zn(e){return document.getElementById(e)}var Ln={card_click_report:Mn,card_pv_report:function(){if("2"==__appmsgCgiData.copyright_stat){let e=zn("copyright_info"),t=zn("js_article");for(;e&&t!==e;)Pn.copyright_top+=e.offsetTop,e=e.offsetParent;j.on(window,"scroll",On),On()}}};var Wn='<#if(!isUpdate){#>\n<section class="js_wap_redpacketcover red_package_cover_wrp" data-coveruri="<#=data.cover_uri#>">\n<#}#>\n    \x3c!--不可操作，这里加className point_event_no--\x3e\n    \x3c!--todo 加载中加className red_package_cover__inner__loading--\x3e\n    <section class="red_package_cover__inner">\n        <section class="red_package_cover__inner__main">\n            <section class="red_package_cover__body">\n                \x3c!--图片没加载处理，这里加className red_package_cover_img_loading--\x3e\n                <span class="red_package_cover_img" style="background-image: url(\'<#=data.receive_image#>\');"></span>\n            </section>\n            <section class="red_package_cover__foot">\n                <#if(data.status * 1===0){#>\n                <span class="red_package_cover__access-link">领取<#=data.name#>红包封面</span>\n                <#}else if(data.status * 1===1){#>\n                <span class="red_package_cover__access-link disabled">已领取红包封面</span>\n                <#}else if(data.status * 1===2){#>\n                <span class="red_package_cover__access-link disabled">红包封面已领取完</span>\n                <#}else{#>\n                <span class="red_package_cover__access-link disabled">红包封面不可领取</span>\n                <#}#>\n            </section>\n        </section>\n        <section class="red_package_cover__extend">\n            <span class="red_package_cover__extend_icon"></span>\n            <span class="red_package_cover__extend_info">微信红包封面</span>\n        </section>\n    </section>\n<#if(!isUpdate){#>\n</section>\n<#}#>';const Dn={tagName:"redpacketcover",isWechat:N.isWechat,domMap:{},dataMap:{},startTime:window.page_begintime||0,screen_height:S.getInnerHeight(),screen_num:0,pvData:[],request_id:encodeURIComponent(window.biz+";"+window.mid+";"+window.idx+";"+window.page_begintime||0),hasBindVisibility:!1,hasBindScroll:!1,needReportNum:0,reportedNum:0},Hn=(e={})=>{const t=window.pageYOffset||document.documentElement.scrollTop,n=(window.logs.read_height||t)+Dn.screen_height,i={BizUin:window.biz,MsgId:1*window.mid,Idx:1*window.idx,CoverUri:e.coverUri,Scene:1*window.source,Subscene:1*window.subscene,CoverStatus:1*e.coverStatus,EventType:1*e.eventType,EventScreenNum:Math.ceil(n/Dn.screen_height)||1,ScreenNum:Dn.screen_num,StartTimeMs:Dn.startTime};B.report(19119,i)};let Un=()=>{const e=(window.pageYOffset||document.documentElement.scrollTop)+Dn.screen_height;for(let t=0;t<Dn.pvData.length;t++){let n=Dn.pvData[t];e>=n.start&&e<=n.end&&(Dn.reportedNum++,Dn.dataMap&&Dn.dataMap[n.coverUri]&&(Dn.dataMap[n.coverUri].reported=!0),Hn({eventType:2,coverUri:n.coverUri,coverStatus:Dn.dataMap[n.coverUri].status}),Dn.pvData.splice(t,1),t--)}Dn.reportedNum>=Dn.needReportNum&&(j.off(window,"scroll",Un),Dn.pvData=[],Un=null)};const $n=(e={})=>{if(!Dn.isWechat)return;Dn.scroll_height=document.body.scrollHeight||document.body.offsetHeight,Dn.screen_num=Math.ceil(Dn.scroll_height/Dn.screen_height);let t=e.node;if(Dn.dataMap[e.coveruri]&&1*Dn.dataMap[e.coveruri].status!=-1&&!Dn.dataMap[e.coveruri].reported){let n=t.getBoundingClientRect();Dn.pvData.push({start:n.top+n.height/2,end:n.top+n.height/2+Dn.screen_height,coverUri:e.coveruri})}Dn.pvData.length>0&&(!Dn.hasBindScroll&&Un&&(Dn.hasBindScroll=!0,j.on(window,"scroll",Un)),Un())};let Vn=null;Vn=(e={})=>{if(e.node&&e.data&&e.data.cover_uri)if(e.isUpdate)e.node.innerHTML=q.tmpl(Wn,{data:e.data,isUpdate:!0},!1).replace(/>\s*</g,"><").replace(/^\s+/,"").replace(/\s+$/,"");else if(e.data.receive_image){const t=function(e){let t=e.node,n=e.data;return function(){let e=document.createElement("div");e.innerHTML=q.tmpl(Wn,{data:n,isUpdate:!1},!1).replace(/>\s*</g,"><").replace(/^\s+/,"").replace(/\s+$/,"");let i=e.firstChild;t.parentNode.insertBefore(i,t.nextSibling);let o=t.parentNode.querySelector('[data-preloadingid="'+n.cover_uri+'"]');o&&o.parentNode.removeChild(o),Dn.domMap[n.cover_uri]=i,((e={})=>{Dn.dataMap[e.coveruri]&&j.on(e.dom,"click",(function(){if(window.is_temp_url)new _e({msg:"预览时不支持领取红包封面"});else if(Dn.isWechat){let t=e.dom.getAttribute("data-coveruri")||"",n=t&&Dn.dataMap[t]?Dn.dataMap[t].redirect_url:"";n&&(Hn({eventType:1,coverUri:t,coverStatus:Dn.dataMap[t].status}),O.invoke("openUrlWithExtraWebview",{url:n,openType:1},(function(e){-1===e.err_msg.indexOf("ok")&&(location.href=n)})))}else new _e({msg:"请在微信客户端打开"})})),!Dn.hasBindVisibility&&Dn.isWechat&&(Dn.hasBindVisibility=!0,S.listenStateChange({cb:function(e){"onResume"!==e.state_change&&"onResume"!==e.state||R({type:"GET",dataType:"json",url:"/mp/wapredpacketcover?action=get_red_packet_cover_data&__biz="+window.biz+"&mid="+window.mid+"&idx="+window.idx+"&sn="+window.sn+"&send_time="+window.send_time,timeout:1e4,success:e=>{if(e&&e.base_resp&&1*e.base_resp.ret==0&&e.red_packet_cover_data&&e.red_packet_cover_data.cover_uri_data&&e.red_packet_cover_data.cover_uri_data.length>0){const t=e.red_packet_cover_data.cover_uri_data;for(let e=0,n=t.length;e<n;e++){let n=t[e],i=Dn.domMap[n.cover_uri],o=Dn.dataMap[n.cover_uri];if(o&&i){let e=1*o.status,t=1*n.status;-1!==t&&e!==t&&(o.status=t,Vn({data:o,node:i,isUpdate:!0}))}}}}})}}))})({dom:i,coveruri:n.cover_uri}),$n({coveruri:n.cover_uri,node:i})}}(e),n=function(){this.onload=null,this.onerror=null,t()};let i=new Image;i.onload=n,i.onerror=n,i.src=e.data.receive_image}};var Jn=()=>{const e=document.querySelectorAll(Dn.tagName);if(window.__appmsgCgiData&&1*window.__appmsgCgiData.has_red_packet_cover==1){if(!Dn.isWechat)for(let t=0,n=e.length;t<n;t++){let n=e[t],i=n.getAttribute("data-coveruri")||"",o=decodeURIComponent(i),a=decodeURIComponent(n.getAttribute("data-receiveimg")||"");if(o&&a&&/^http(s)?:\/\/mmcomm\.qpic\.cn([\/?].*)*$/i.test(a)){let e={cover_uri:o,status:0,name:"",redirect_url:"",receive_image:a};Dn.dataMap[o]=e,Vn({data:e,node:n,isUpdate:!1})}}}else e.length>0&&window.__addIdKeyReport&&window.__addIdKeyReport("27613","51",1)},Fn=(e={})=>{if(!e.list||0===e.list.length)return;for(let n=0,i=e.list.length;n<i;n++){let t=e.list[n];Dn.dataMap[t.cover_uri]=t}const t=document.querySelectorAll(Dn.tagName);e.list.length!==t.length&&window.__addIdKeyReport&&window.__addIdKeyReport("27613","51",1),Dn.needReportNum=t.length;for(let n=0,i=t.length;n<i;n++){let e=t[n],i=e.getAttribute("data-coveruri")||"",o=decodeURIComponent(i),a=Dn.dataMap[o];if(a&&1*a.status!=-1){if(a.redirect_url){let e=a.redirect_url.html(!1);e=z.addParam(e,"request_id",Dn.request_id,!0);let t=z.parseUrl(e);t.hash?-1===t.hash.indexOf("wechat_redirect")&&(e+="&wechat_redirect"):e+="#wechat_redirect",a.redirect_url=e}Vn({data:a,node:e,isUpdate:!1})}}};const Xn=(e,t,n,i)=>{e||(e="");const o=document.createElement("span");if(t<=n){const a=e.slice(t,n+1);i&&(o.className="js_search_highlight wx_search_highlight"),o.innerText=a}return o},Gn=(e,t,n,i)=>{if(!e||!t)return;if(n>i)return;let o=t.textContent,a=o.length;n>0&&e.insertBefore(Xn(o,0,n-1,!1),t),i<a-1&&e.appendChild(Xn(o,i+1,a-1,!1)),e.replaceChild(Xn(o,n,i,!0),t)};function Kn(e,t,n){let i,o=t,a=n;const s=e=>{const t=e.childNodes.length;for(let n=0;n<t&&!(o>a);n++){let r=e.childNodes[n];if(!r)break;if(1===r.nodeType&&s(r),3===r.nodeType){let n=r.textContent,s=n.length,d=e;if(t>1&&(d=Xn(n,0,s-1,!1),e.replaceChild(d,r),r=d.childNodes[0]),o>=0&&a<=s-1){Gn(d,r,o,a),o=0,a=-1,i=d;break}a>s-1&&(Gn(d,r,o,s-1),o<=s?(a-=s,o=0):(a-=s,o-=s))}}};return s(e),i}var Qn=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"rich_media_tool_area",attrs:{id:"content_bottom_area"}},[t("mp-like-read-area")],1)},Yn=[];const Zn={components:{[H.name]:H}},ei={};var ti=r(Zn,Qn,Yn,!1,ni,null,null,null);function ni(e){for(let t in ei)this[t]=ei[t]}var ii=function(){return ti.exports}();var oi=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"page_bottom_area"}},[t("mp-bottom-ad"),t("mp-comment",{attrs:{"fetch-before-ext-resp":""}})],1)},ai=[];const si={components:{[f.name]:f,[y.name]:y}},ri={};var di=r(si,oi,ai,!1,ci,null,null,null);function ci(e){for(let t in ri)this[t]=ri[t]}var li=function(){return di.exports}();let pi,_i,mi={scene:window.source||"",is_need_reward:!1,is_teenager:window.is_teenager,title:window.msg_title||"",author_id:window.author_id||"",user_can_reward:!0,appmsgextRtId:"",appmsgextRtKey:"",likeHeadId:"110809",likeHeadKey:"2",likeBtnId:"110809",likeBtnKey:"3",authorPageScene:"142",authorPageRscene:"128",devicetype:window.devicetype||"",version:window.version||"",send_time:window.send_time||"",isPcWechat:N.isWindowsWechat||N.isMacWechat,whisperMaxLen:40,focusTag:!1,doubleInputChar:["“”","‘’","（）","《》","〈〉","「」","『』","〔〕","【】","［］","[]","｛｝","{}","()","<>"],sendLock:!1},ui={reward:document.getElementById("js_reward_area"),rewardLink:document.getElementById("js_reward_link"),authorAvatarLink:document.getElementById("js_reward_avatar"),rewardAuthorHead:document.getElementById("js_reward_author_head"),rewardLinkText:document.getElementById("js_reward_link_text"),rewardTotalText:document.getElementById("js_reward_total_text"),whisperWrap:document.getElementById("js_reward_whisper"),whisperDialogShow:document.getElementById("js_show_whisper_dialog"),whisperDialogHide:document.getElementById("js_hide_whisper_dialog"),whisperDialogMask:document.getElementById("js_whisper_dialog_mask"),whisperDialog:document.getElementById("js_reward_whisper_dialog"),whisperTextarea:document.getElementById("js_whisper_text"),whisperMsg:document.getElementById("js_whisper_msg"),whisperCnt:document.getElementById("js_whisper_current_cnt"),whisperSend:document.getElementById("js_whisper_send")},wi=[],gi=null,hi=0,fi=[];let yi;window.logs&&(window.logs.reward_heads_total=0,window.logs.reward_heads_fail=0);let bi=function(e){let t=e.target;"TEXTAREA"!==t.tagName&&"BUTTON"!==t.tagName&&(e.preventDefault(),e.stopPropagation())},vi=function(e){let t=e.targetTouches||[];if(t.length>0){let e=t[0]||{};yi=e.clientY}},xi=function(e){let t=!1,n=e.changedTouches,i=this.scrollTop,o=this.offsetHeight,a=this.scrollHeight;if(n.length>0){let s=(n[0]||{}).clientY;t=!(s>yi&&i<=0)&&!(s<yi&&i+o>=a),t||e.preventDefault()}};function ki(e){e&&(e.style.display="block")}function Ii(e){e&&(e.style.display="none")}function Ai(e){V.getData({biz:biz,appmsg_type:appmsg_type,mid:mid,sn:sn,idx:idx,pass_ticket:window.pass_ticket,scene:mi.scene,title:mi.title,ct:ct,devicetype:mi.devicetype,version:mi.version,is_need_reward:mi.is_need_reward,reward_uin_count:mi.is_need_reward?3*pi:0,send_time:mi.send_time||"",item_show_type:window.item_show_type||"",rtId:mi.appmsgextRtId,rtKey:mi.appmsgextRtKey,is_pay_subscribe:window.isPaySubscribe,pay_subscribe_uin_count:window.isPaySubscribe?3*be.getCountPerLine():0,onSuccess:function(t){t&&(e||(ui.rewardLink&&j.off(ui.rewardLink,"click",Ei),ui.authorAvatarLink&&j.off(ui.authorAvatarLink,"click",Ti),fi=[],Ni({reward_total:t.reward_total_count,reward_head_imgs:t.reward_head_imgs||[],can_reward:t.can_reward,timestamp:t.timestamp,reward_author_head:t.reward_author_head,rewardsn:t.rewardsn,can_whisper:t.can_whisper})),t.appmsgact&&t.appmsgact.reward_before&&(J.renderLikeProfile(["reward"]),F&&F.render&&F.render("reward")),console.log("reloadRewardData:",t,e),be.init(t.pay_subscribe_info,{rewardTotal:t.reward_total_count,rewardTotalCut:t.is_reward_total_count_cut},!0))},onError:function(){}})}let Ei=function(){},Ti=function(){};const ji=document.getElementById("js_author_reward_qrcode_img");function Ci(e,t,n){if("link"===n){const t="#wechat_redirect";e=e.replace(t,"&__tc=1"+t)}let i=()=>{ji.src=`${t}&qrcode_timestamp=${1*new Date}#wechat_redirect`},o=null;return function(t){if(t.preventDefault(),"link"===n&&mi.is_teenager)return weui.alert("青少年模式下不可赞赏"),void U.setSum(232209,0,1);if("0"!=mi.user_can_reward)if(xe(ke.kReward),mi.isPcWechat){const e="js_author_reward_qrcode",t="reward_pop_show",n=document.getElementById(e);if(n.classList.contains(t))return;i(),o=setInterval(i,12e4),n.classList[ui.rewardLink.getBoundingClientRect().top<222?"add":"remove"]("reward_pop_bottom"),n.classList.add(t);const a=i=>{if(!n.classList.contains(t))return;let s=i.target;for(;null!==s&&s.id!==e;)s=s.parentNode;null!==s&&s.id===e||(n.classList.remove(t),clearInterval(o),o=null,j.off(window,"click",a))};setTimeout((()=>{j.on(window,"click",a)}),1)}else"avatar"===n&&window.__addIdKeyReport?window.__addIdKeyReport(mi.likeHeadId,mi.likeHeadKey):window.__addIdKeyReport&&window.__addIdKeyReport(mi.likeBtnId,mi.likeBtnKey),$(e);else alert("你已成为该公众号的黑名单用户，暂时无法赞赏。")}}const Si=()=>ki(ui.whisperWrap),Bi=()=>Ii(ui.whisperWrap);let Ri=!1;function Ni(e){let t=window.innerWidth||document.documentElement.innerWidth,n=(Math.ceil((S.getInnerHeight()-188)/42)+1)*Math.floor((t-15)/42);_i="http://mp.weixin.qq.com/mp/reward?act=getrewardheads&__biz="+biz+"&appmsgid="+mid+"&idx="+idx+"&sn="+sn+"&offset=0&count="+n+"&source=1#wechat_redirect";let i="#wechat_redirect",o="";o="https://mp.weixin.qq.com/mp/author?action=show&__biz="+biz+"&appmsgid="+mid+"&timestamp="+e.timestamp+"&author_id="+mi.author_id+"&idx="+idx+"&scene="+mi.authorPageScene+"&rscene="+mi.authorPageRscene+"&from_scene="+window.source+"&from_subscene="+window.subscene+"&from_enterid="+window.enterid+"&from_sessionid="+window.sessionid+"&is_fans="+e.isFans,e.rewardsn&&(o+="&rewardsn="+e.rewardsn),o+=i,-1==navigator.userAgent.indexOf("Android")||mi.author_id||(o="https://mp.weixin.qq.com/bizmall/reward?act=showpage&__biz="+biz+"&appmsgid="+mid+"&idx="+idx+"&sn="+sn+"&timestamp="+e.timestamp+"&showwxpaytitle=1&rewardsn="+e.rewardsn+i);let a=ui.rewardLink,s=ui.authorAvatarLink;if(!Ri&&S.listenStateChange({cb:function(e){if("onResume"==e.state_change||"onResume"==e.state)if(a){let e=(new Date).valueOf();if(-1!=navigator.userAgent.indexOf("Android")&&localStorage.getItem("lastOnresumeTime")&&e-parseInt(localStorage.getItem("lastOnresumeTime"))<=500)return;localStorage.setItem("lastOnresumeTime",e),N.isAndroid&&!mi.author_id&&O.invoke("setNavigationBarColor",{actionCode:"1"}),Ai()}else Ai(!0)}}),Ri=!0,a){const t=`/mp/authorreward?action=getqrcode&author_id=${mi.author_id}&rewardsn=${e.rewardsn}&timestamp=${e.timestamp}&__biz=${biz}&appmsgid=${mid}&idx=${idx}&size=160`;if(Ei=Ci(o,t,"link"),Ti=Ci(o,t,"avatar"),j.on(a,"click",Ei),mi.author_id&&1==e.can_reward&&s&&j.on(s,"click",Ti),1==e.can_reward&&mi.author_id&&ui.reward){ki(document.getElementById("js_reward_author")),ki(ui.authorAvatarLink),ui.rewardAuthorHead&&ui.rewardAuthorHead.setAttribute("src",e.reward_author_head),ui.reward.classList.add("reward_area_primary");let t=ui.rewardLinkText;t&&(t.innerText="喜欢作者",Math.random()<.05?t.innerText="稀罕作者":Math.random()>.05&&Math.random()<.1&&(t.innerText="钟意作者")),ui.rewardTotalText&&(ui.rewardTotalText.innerText="人喜欢"),mi.isPcWechat&&ui.reward.classList.add("reward_area_win"),!S.isNativePage()&&e.can_whisper?Si():Bi()}}wi=e.reward_head_imgs;let r=Pi();ui.reward&&(mi.author_id||N.isAndroid)&&1==e.can_reward?(ki(ui.reward),j.on(window,"load",(function(){Mi&&(j.off(window,"scroll",Mi),j.on(window,"scroll",Mi))}))):Ii(ui.reward);let d=document.getElementById("js_reward_inner");!window.isPaySubscribe&&d&&r>0&&ki(d);const c=[].concat(wi);let l=document.getElementById("js_reward_total");if(hi=16*pi,fi=[].concat(wi),l)if(l.innerText=e.reward_total,mi.isPcWechat){const t=l.parentNode;if(!t.dataset.hasEvent){const n=document.getElementById("js_reward_pagination"),i=n.getElementsByClassName("js_reward_pagination_curpage")[0],o=Math.ceil(e.reward_total/hi);let a=1,s=!0;const d=document.getElementById("js_reward_list"),l=(t,n)=>{const i=(t-1)*hi,a=s?3*pi:0,r=document.createDocumentFragment();for(let s=i+a,d=t===o?e.reward_total:t*hi;s<d;s++)qi(r,n?window.defaultAvatarUrl:fi[s]);return!s&&(d.innerHTML=""),d.appendChild(r),s=!1,!!n&&(()=>{const e=d.getElementsByClassName("reward_user_avatar");for(let t=a,n=e.length;t<n;t++)e[t].firstElementChild.src=fi[i+t]})};i.innerHTML=a,n.getElementsByClassName("js_reward_pagination_totalpage")[0].innerHTML=o;const p=`/mp/reward?act=getrewardheads&__biz=${biz}&appmsgid=${mid}&idx=${idx}&sn=${sn}&count=${hi}`;let _=null;const m=t=>{const n=fi.length;e.reward_total>n&&t*hi>n?(_=null,_=l(t,!0),R({url:`${p}&offset=${(t-1)*hi}#wechat_redirect`,type:"GET",success:e=>{try{(e=JSON.parse(e)).reward_heads=JSON.parse(e.reward_heads).reward_heads}catch(t){e={}}e.base_resp&&0===e.base_resp.ret&&(e.reward_heads.forEach((e=>{const t=c.indexOf(e);t>-1?c.splice(t,1):fi.push(e)})),"function"==typeof _&&_())}})):l(t)};if(r<e.reward_total){ui.reward.classList.add("reward_avatar_overflow");let r=d.children[0];for(;1!==r.nodeType;)r=reward.nextElementSibling;const c=getComputedStyle(r),l=r.offsetHeight+parseInt(c.marginBottom)+parseInt(c.marginTop);gi=t=>{d.style.height="fold"===t?3*l+"px":a<o?l*Math.ceil(hi/pi)+"px":l*Math.ceil(e.reward_total%hi/pi)+"px"},gi("fold"),j.on(t,"click",(()=>{ui.reward.classList.contains("reward_avatar_unfold")?(ui.reward.classList.remove("reward_avatar_unfold"),o>1&&Ii(n),gi("fold")):(1===a&&s&&m(a),ui.reward.classList.add("reward_avatar_unfold"),o>1&&ki(n),gi("unfold"))})),o>1&&j.on(n,"click",(e=>{let t=e.target;if(t.classList.contains("js_reward_pagination_prev")){if(a--,i.innerHTML=a,m(a),1===a&&(t.disabled=!0),a===o-1){for(;t&&!t.classList.contains("js_reward_pagination_next");)t=t.nextElementSibling;t&&(t.disabled=!1),gi("unfold")}}else if(t.classList.contains("js_reward_pagination_next")&&(a++,i.innerHTML=a,m(a),a===o&&(t.disabled=!0,gi("unfold")),2===a)){for(;t&&!t.classList.contains("js_reward_pagination_prev");)t=t.previousElementSibling;t&&(t.disabled=!1)}}))}t.dataset.hasEvent=1}}else l.setAttribute("data-href",_i),l.getAttribute("data-hasevent")||(j.on(l,"click",(function(e){let t=l.getAttribute("data-href");$(t),e.preventDefault()})),l.setAttribute("data-hasevent",1))}function qi(e,t){let n=document.createElement("span");n.className="reward_user_avatar";let i=new Image;return i.onload=function(){window.logs&&window.logs.reward_heads_total++,i.onload=i.onerror=null},i.onerror=function(){window.logs&&window.logs.reward_heads_total++,window.logs&&window.logs.reward_heads_fail++,i.onload=i.onerror=null},i.src=t,n.appendChild(i),e.appendChild(n),n}function Pi(e){const t=fi.length?fi:wi;if(!t.length)return;let n=document.getElementById("js_reward_list"),i=0,o=document.createDocumentFragment();if(n){const a=ui.reward.classList.contains("reward_avatar_unfold");if("function"==typeof gi&&gi(a?"unfold":"fold"),!e){for(let e=0,n=t.length;e<n&&(i++,qi(o,t[e]),a||i!==3*pi)&&i!==(hi||16*pi);++e);i>pi&&(n.className+=" tl"),n.innerHTML="",n.appendChild(o)}}return i}function Mi(){if(ui.reward){if((window.pageYOffset||document.documentElement.scrollTop)+S.getInnerHeight()>ui.reward.offsetTop){let e=`__biz=${biz}&appmsgid=${mid}&idx=${idx}&item_show_type=${item_show_type}`;window.cgiData&&window.cgiData.vid&&(e+=`&vid=${cgiData.vid}`),R({type:"GET",url:`/bizmall/reward?act=report&${e}`,async:!0}),j.off(window,"scroll",Mi),Mi=null}}}const Oi=e=>{let t=0;try{t=1*window.atob(window.biz)}catch(a){}const n={BizUin:t,BizUinStr:window.biz||"",AppMsgId:window.parseInt(window.mid,10)||0,ItemIdx:window.parseInt(window.idx,10)||0,ItemShowType:window.parseInt(window.item_show_type,10)||0,SessionIdStr:window.sessionid||"",EnterId:window.parseInt(window.enterid,10)||0,Scene:window.parseInt(window.source,10)||0,SubScene:window.parseInt(window.subscene,10)||0,IsFans:1*e||0},i=e=>weui.alert(e&&e>mi.whisperMaxLen?`悄悄话不可以超过${mi.whisperMaxLen}字`:"网络异常，请稍后重试"),o=()=>{!N.isIPad&&N.isWechat&&O.invoke("handleDeviceInfo",{action:"setOrientation",orientation:0,lock:!1},(()=>{})),Ii(ui.whisperDialog),ui.whisperTextarea.value="",ui.whisperSend.disabled=!0,document.removeEventListener("touchmove",bi,{passive:!1}),ui.whisperTextarea.removeEventListener("touchstart",vi,{passive:!1}),ui.whisperTextarea.removeEventListener("touchmove",xi,!1)};j.on(ui.whisperDialogShow,"click",(()=>{const e=90===Math.abs(window.orientation);!N.isIPad&&N.isWechat&&O.invoke("handleDeviceInfo",{action:"setOrientation",orientation:0,lock:!0},(t=>{var n;t.err_msg&&-1!==t.err_msg.indexOf("ok")&&e&&(n=4)&&window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.report("force horizontal screen",`biz: ${"function"==typeof window.atob?window.atob(window.biz):window.biz} | mid: ${window.mid} | idx: ${window.idx} | action: ${n}`,{mid:"mmbizwap:horizontal_screen",view:"wap_business"})})),B.report(19048,Object.assign({EventType:2},n)),ki(ui.whisperDialog),ui.whisperTextarea.focus(),document.addEventListener("touchmove",bi,{passive:!1}),ui.whisperTextarea.addEventListener("touchstart",vi,{passive:!1}),ui.whisperTextarea.addEventListener("touchmove",xi,!1)})),j.on(ui.whisperDialogHide,"mousedown",o),j.on(ui.whisperDialogMask,"mousedown",o),j.on(ui.whisperTextarea,"input",(e=>{const t=e.target.value.replace(/^\s+|\s+$/g,"").length;t>mi.whisperMaxLen?(ui.whisperSend.disabled=!0,ui.whisperCnt.innerHTML=t,ui.whisperMsg.style.visibility="visible"):(ui.whisperSend.disabled=0===t,ui.whisperMsg.style.visibility="hidden"),P.os.ios&&e.data&&mi.doubleInputChar.indexOf(e.data)>-1&&(mi.focusTag=!0)})),j.on(ui.whisperTextarea,"click",(e=>{if(P.os.ios&&mi.focusTag){const t=e.target;t.blur(),t.focus(),mi.focusTag=!1}})),j.on(ui.whisperSend,"mousedown",(()=>{if(ui.whisperSend.disabled||mi.sendLock)return;mi.sendLock=!0,B.report(19048,Object.assign({EventType:3},n)),X.show("发送中");const e=ui.whisperTextarea.value.replace(/^\s+|\s+$/g,"");R({url:"/mp/author?action=whisper",data:{__biz:window.biz||window.__biz,mid:window.mid||window.appmsgid,idx:window.idx,content:e,scene:window.source,subscene:window.subscene,enterid:window.enterid,sessionid:window.sessionid},type:"POST",success(t){try{t=JSON.parse(t)}catch(a){t={}}mi.sendLock=!1,X.hide(),t&&t.base_resp&&0===t.base_resp.ret?(o(),Bi(),weui.toast("已发送",1e3)):i(e.length)},error(){mi.sendLock=!1,X.hide(),i()}})}))};var zi=function(e,t){pi=t,function(e){void 0!==e.scene&&(mi.scene=e.scene),void 0!==e.is_need_reward&&(mi.is_need_reward=e.is_need_reward),void 0!==e.title&&(mi.title=e.title),void 0!==e.author_id&&(mi.author_id=e.author_id),void 0!==e.user_can_reward&&(mi.user_can_reward=e.user_can_reward),void 0!==e.appmsgextRtId&&(mi.appmsgextRtId=e.appmsgextRtId),void 0!==e.appmsgextRtKey&&(mi.appmsgextRtKey=e.appmsgextRtKey),void 0!==e.likeHeadId&&(mi.likeHeadId=e.likeHeadId),void 0!==e.likeHeadKey&&(mi.likeHeadKey=e.likeHeadKey),void 0!==e.likeBtnId&&(mi.likeBtnId=e.likeBtnId),void 0!==e.likeBtnKey&&(mi.likeBtnKey=e.likeBtnKey),void 0!==e.authorPageScene&&(mi.authorPageScene=e.authorPageScene),void 0!==e.authorPageRscene&&(mi.authorPageRscene=e.authorPageRscene),void 0!==e.devicetype&&(mi.devicetype=e.devicetype),void 0!==e.version&&(mi.version=e.version),void 0!==e.send_time&&(mi.send_time=e.send_time)}(e),1==e.can_reward&&mi.author_id&&ui.reward&&Oi(e.isFans),Ni(e)},Li=function(e){pi=e,Pi(!0)};const Wi={perLine:0,hasBindResize:!1,hasInit:!1,pageContainerId:"img-content",rewardInnerId:"js_reward_inner"},Di=e=>document.getElementById(e),Hi=(e={})=>{const t=e.pageContainerId||Wi.pageContainerId,n=e.rewardInnerId||Wi.rewardInnerId;let i=window.innerWidth||document.documentElement.clientWidth;try{let e=Di(t).getBoundingClientRect();e.width&&(i=e.width)}catch(a){}Wi.perLine=Math.floor(.8*i/36);let o=Di(n);return o&&(o.style.width=36*Wi.perLine+"px"),Wi.perLine},Ui=(e={})=>{const t=e.pageContainerId||Wi.pageContainerId,n=e.rewardInnerId||Wi.rewardInnerId;if(!e.can_reward||!Di(t)||!Di(n))return 0;if(!Wi.hasBindResize){Wi.hasBindResize=!0;let t=window.innerWidth;j.on(window,"resize",(function(){window.innerWidth!==t&&(t=window.innerWidth,Hi(e),Wi.hasInit&&Li(Wi.perLine))})),N.isWindows&&G.onFontScaleChange(Hi)}return Wi.perLine||Hi(e),Wi.perLine};var $i=(e,t)=>{Wi.hasInit=!0;const n=e.author_id||window.author_id;e.reward_head_imgs=e.reward_head_imgs||[];const i=Di("js_author_name");if(t.reward_entrance_enable_for_preview)if(N.isInMiniProgram)N.isInMiniProgram&&i&&T.removeClass(i,"rich_media_meta_link");else{if(n||N.isAndroid){const e=Di("js_preview_reward_author");e&&(e.style.display="block");const n=Di("js_preview_reward_author_wording");t.reward_wording&&n&&(n.innerText=t.reward_wording,n.style.display="block");const i=Di("js_preview_reward_author_link");i&&(window.item_show_type&&1*window.item_show_type==5||j.on(i,"tap",(function(e){e.preventDefault(),window.weui.alert("预览状态下无法操作")})))}if(n){const e=Di("js_preview_reward_author_avatar"),n=Di("js_preview_reward_author_head");t.reward_author_head&&e&&n&&(n.setAttribute("src",t.reward_author_head),e.style.display="block");const i=Di("js_preview_reward_link_text");i&&(i.innerText="喜欢作者")}else N.isAndroid&&(Di("js_preview_reward_author_name").style.display="none")}else!N.isInMiniProgram&&(N.isWindowsWechat||N.isMacWechat||N.isIOS||N.isAndroid)?(zi(e,Ui({pageContainerId:t.pageContainerId,rewardInnerId:t.rewardInnerId,can_reward:1==e.can_reward})),i&&e.rewardsn&&e.timestamp&&(i.setAttribute("data-rewardsn",e.rewardsn),i.setAttribute("data-timestamp",e.timestamp),i.setAttribute("data-canreward",e.can_reward)),i&&!e.can_reward&&T.removeClass(i,"rich_media_meta_link")):i&&T.removeClass(i,"rich_media_meta_link")},Vi=Ui;const Ji=document.getElementById("js_album_keep_read"),Fi={link:window.appmsg_album_info.link,albumId:window.appmsg_album_info.id,msgid:window.mid,idx:window.idx,pageCount:10,itemClassName:"album_read_directory_item"},Xi={MsgId:1*Fi.msgid,ItemIdx:1*Fi.idx,BizUin:window.biz,Itemshowtype:1*window.item_show_type,SessionId:window.sessionid,EnterId:1*window.enterid,Scene:1*window.source,SubScene:1*window.subscene,Albumid:Fi.albumId,Albumtype:window.appmsg_album_info.type,Title:window.appmsg_album_info.title};let Gi;const Ki=`&cur_album_id=${Fi.albumId}`;function Qi(e,t){W.jsmonitor({id:223326,key:e,value:t})}function Yi(e={}){B.report(21277,Object.assign({},Xi,e))}function Zi(){const e=document.createElement("div"),t=document.createElement("span");return t.setAttribute("role","option"),t.innerHTML=`<span aria-label="话题：">#</span>${window.appmsg_album_info.title}`,e.appendChild(t),e.innerHTML}function eo(){const e=document.createElement("div");e.style.position="relative",e.setAttribute("role","listbox");let t,n,i,o,a,s=[],r=!0,d=!0,c=1;function l(e,s=!1,r=!0){const d=document.createDocumentFragment();if(n)if(s){c=1;for(let t=0;t<e.length;t++)if(e[t].msgid.toString()===Fi.msgid.toString()&&e[t].itemidx.toString()===Fi.idx.toString()){c=t;break}e.forEach(((e,n)=>{e.index=i?t-(n-c):t+(n-c)}))}else r?e.forEach(((e,t)=>{e.index=i?a.index-t-1:a.index+t+1})):e.forEach(((t,n)=>{t.index=i?o.index+(e.length-n):o.index-(e.length-n)}));return e.forEach((e=>{const t=document.createElement("div");if(T.addClass(t,Fi.itemClassName),e.msgid.toString()===window.mid.toString()&&e.itemidx.toString()===window.idx.toString()?T.addClass(t,"album_read_directory_current"):1===e.user_read_status&&(T.addClass(t,"album_read_directory_disabled"),T.addClass(t,"js_wx_tap_highlight"),T.addClass(t,"wx_tap_cell")),n){const n=document.createElement("span");n.className="album_read_directory_item_index",n.innerText=`${e.index}.`,t.appendChild(n)}const i=document.createElement("span");i.className="album_read_directory_title_wrp";const o=document.createElement("span");o.className="album_read_directory_title_wrp",o.innerText=e.title,i.appendChild(o),t.setAttribute("data-url",e.url),t.setAttribute("role","option");const a=document.createElement("span");if(e.is_paid){const e="已付费";T.addClass(a,"wx_icon_pay_tag"),T.addClass(a,"wx_icon_pay_tag_paid"),a.innerText=e,i.appendChild(a)}else if(e.is_pay_subscribe){const e="付费";T.addClass(a,"wx_icon_pay_tag"),a.innerText=e,i.appendChild(a)}t.appendChild(i),d.appendChild(t)})),d}function p(e){1*e.reverse_continue_flag||(r=!1,Gi.disablePullDownLoad()),1*e.continue_flag||(d=!1)}const _={extClass:"album_read_directory weui-half-screen-dialog_fold",hasBtn:!0,btnSlot:'<div id="js_topic_detail" class="weui-btn__word-wrp">\n                  <span class="weui-btn__word">详情</span>\n                  <i class="weui_right_arrow"></i>\n                </div>',title:Zi(),btnClickCb(){Yi({ActionType:6}),Qi(15),function(){const e=window.appmsg_album_info;if(e.link){const t=e.link.replace("#wechat_redirect",`&subscene=159&subscene=${window.source}&scenenote=${encodeURIComponent(window.location.href)}&nolastread=1#wechat_redirect`);Q.openUrlWithExtraWebview(t.htmlDecode())}}()},cb(){var s;s=s=>{Gi.hideLoading(),i=s.base_info.is_reverse,t=s.base_info.cur_article_num,n=t?1:0,e.appendChild(l(s.article_list,!0)),o=s.article_list[0],a=s.article_list[s.article_list.length-1],p(s),d||Gi.showEndLine();const r=e.childNodes[c];setTimeout((()=>{r.offsetTop+r.clientHeight>Gi.contentAreaWrp.clientHeight&&Gi.scrollTo(0,e.offsetHeight)}),200)},R({type:"GET",url:`/mp/appmsgalbum?action=paging&__biz=${window.biz}&album_id=${Fi.albumId}&cur_msgid=${Fi.msgid}&cur_itemidx=${Fi.idx}&count=${Fi.pageCount}`,timeout:5e3,dataType:"json",success:function(e){e.base_resp&&0===e.base_resp.ret&&s(e.getalbum_resp)},error(){console.log("[error]")}})},onShow(){Yi({ActionType:4}),Qi(14)},onPullUpLoad(){d&&(Gi.showPullUpLoading(),R({type:"GET",url:`/mp/appmsgalbum?action=paging&__biz=${window.biz}&album_id=${Fi.albumId}&begin_msgid=${a.msgid}&begin_itemidx=${a.itemidx}&count=${Fi.pageCount}`,timeout:5e3,dataType:"json",success:function(t){Gi.hidePullUpLoading();if(0===(t.base_resp&&1*t.base_resp.ret)){const n=t.getalbum_resp.article_list;p(t.getalbum_resp),e.appendChild(l(n,!1,!0)),s=s.concat(n),Gi.finishPullUpLoad(),a=s[s.length-1],1*t.getalbum_resp.continue_flag||Gi.showEndLine()}},error:function(){}}))},onPullDownLoad(){r&&(Gi.showPullDownLoading(),R({type:"GET",url:`/mp/appmsgalbum?action=paging&__biz=${window.biz}&album_id=${Fi.albumId}&begin_msgid=${o.msgid}&begin_itemidx=${o.itemidx}&count=${Fi.pageCount}&isbackward=1`,timeout:5e3,dataType:"json",success:function(t){Gi.hidePullDownLoading();if(0===(t.base_resp&&1*t.base_resp.ret)){const n=t.getalbum_resp.article_list,i=t.getalbum_resp.continue_flag;t.getalbum_resp.continue_flag=t.getalbum_resp.reverse_continue_flag,t.getalbum_resp.reverse_continue_flag=i,p(t.getalbum_resp);const a=l(n,!1,!1),r=e.firstChild;e.insertBefore(a,r),s=n.concat(s),Gi.scrollTo(0,r.offsetTop-62),setTimeout((()=>{Gi.finishPullDownLoad()}),500),o=s[0]}},error:function(){}}))}};var m;window.appmsg_album_info.size<=4&&(_.top=screen.height/2-(screen.height-window.innerHeight)+"px"),Gi=new et(e,_),Gi.showLoading(),Gi.show(),(m=e)&&j.on(m,"click",`.${Fi.itemClassName}`,(e=>{const t=e.delegatedTarget;if(T.hasClass(t,"album_read_directory_current"))return;let n;n=t.dataset.url.includes("#")?t.dataset.url.replace("#",`${Ki}&scene=190#`):t.dataset.url+`${Ki}&scene=190`,Yi({ActionType:5,Url:n}),C.jumpUrl(n,!0),T.addClass(t,"album_read_directory_disabled")}))}var to={init(e){Ji&&(e.pre_article_link||e.next_article_link)&&(document.getElementById("js_album_keep_read_title").innerHTML=window.appmsg_album_info.title,document.getElementById("js_album_keep_read_size").innerHTML=window.appmsg_album_info.size,document.getElementById("js_album_keep_read_pre_title").innerHTML=e.pre_article_title||"",document.getElementById("js_album_keep_read_next_title").innerHTML=e.next_article_title||"",Ji.style.display="block",function(e={}){let t=document.getElementById("js_album_directory");j.on(t,"click",(()=>{K.highlightEle(t.getElementsByClassName("js_album_directory__name")[0]),K.highlightEle(t.getElementsByClassName("js_album_directory__size")[0]),Gi?Gi.show():eo()}));let n=document.getElementById("js_album_prev"),i=document.getElementById("js_album_next");e.pre_article_link?j.on(n,"click",(()=>{let t;Yi({ActionType:2,SubActionType:1}),Qi(12),t=e.pre_article_link.includes("#")?e.pre_article_link.replace("#",`${Ki}&scene=189#`):e.pre_article_link+`${Ki}&scene=189`,location.href=t.replace(/&amp;/g,"&")})):n.parentNode.removeChild(n),e.next_article_link?j.on(i,"click",(()=>{let t;Yi({ActionType:2,SubActionType:2}),Qi(13),t=e.next_article_link.includes("#")?e.next_article_link.replace("#",`${Ki}&scene=189#`):e.next_article_link+`${Ki}&scene=189`,location.href=t.replace(/&amp;/g,"&")})):i.parentNode.removeChild(i)}(e),function(){let e;const t=Ji.offsetHeight/2;function n(){if(e)return;const n=g.getOffset(Ji).offsetTop,i=S.getScrollTop();i+S.getInnerHeight()>=n+t&&i<=n+t&&(Yi({ActionType:1}),Qi(11),e=!0)}S.bindDebounceScrollEvent(n),n()}())}};function no(){let e={hasShowBotbar:!1,mpVideoBotH:37,showComment:!0,loverCount:{}},t={};function n(e,t){const n=t||window.location.search,i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=n.substr(n.indexOf("?")+1).match(i);return null!=o?o[2]:""}function i(t){return document.querySelector(`#js_mp_video_container_${e.iframeIdx} #${t}`)}function o(){!function(){let n=e.ratio;t.vw&&t.vh&&(n=t.vw/t.vh);const o=t.vw||e.dom.js_mpvedio.offsetWidth,a=Math.ceil(o/n),s=[];N.isWechat&&(P.os.iphone||P.os.android)&&new Date(1e3*window.ct)>new Date("2022/01/12 19:00:00 GMT+0800")&&s.push(Te);const r={preview:!(1*t.preview!=1),isInIframe:!0,hitBizuin:t.hit_bizuin,hitVid:t.hit_vid,fromid:e.scene,oriStatus:e.ori_status,isMpVideo:t.txvideo_vid?0:t.is_mp_video,plugins:s,oriVid:e.vid,vid:t.txvideo_vid?t.txvideo_vid:e.vid,ckey:t.txvideo_vid?"":e.ckey,ckey_ad:e.ckey_ad,width:o,height:a,__biz:e.__biz,uin:e.uin,mid:e.mid,idx:e.idx,coverFit:"cover",vtitle:window.msg_title,useFeFullscreen:!0,comment_id:e.comment_id,scene_type:0,autoplay:e.autoplay,videoMd5:t.video_md5,headImgUrl:window.round_head_img,canShareVideo:!t.isPaySubscribe,bizUserName:window.user_name,bizNickName:window.nickname,profileTabType:1,leaveReport12710Type:1},d=new l.Store({modules:{[Y.name]:Y},state:{cgiData:t}});d.registerModule([Y.name,Z.name],Z),e.myPlayer=new Ee.mpVideoPlayer({store:d,el:"#js_vue_player_"+e.iframeIdx,opt:r}),e.myPlayer.$on("player-ready",(()=>{if(e.dom.js_mpvedio.style.height="100%",(ee.showVideoDetail()||ee.showReprint())&&!e.hasShowBotbar){const n=i("bottom_bar");n&&(n.style.display="",e.hasShowBotbar=!0,te.postMessage({type:"addVideoIframeHeight",data:{vid:t.txvideo_vid||e.id,height:e.mpVideoBotH}}))}te.postMessage({type:"videoInited",data:{vid:e.id,ori_status:e.ori_status,hit_bizuin:t.hit_bizuin,hit_vid:t.hit_vid}})})),e.myPlayer.$on("video-ready",(()=>{te.postMessage({type:"removeVideoLoading",data:{vid:e.vid}})})),e.dom.page_content.style.transition="opacity 0s",e.myPlayer.$on("fullscreenchange",(t=>{"frontend"===t.type&&(t.state&&e.dom.js_mpvedio.parentNode!==document.body?(e.dom.js_mpvedio.style="position: fixed; top: 0; width: 100%; height: 100%",e.dom.js_article.style.opacity=0,window.requestAnimationFrame((()=>{document.body.appendChild(e.dom.js_mpvedio),e.dom.js_article.style.transition="opacity .1s"}))):t.state||e.dom.js_mpvedio.parentNode===e.dom.page_content||(e.dom.js_mpvedio.style="",e.dom.page_content.appendChild(e.dom.js_mpvedio),setTimeout((()=>{e.dom.js_article.style.opacity=1}),150)))}))}()}function a(a,s){R({url:s,type:"GET",f:"json",success:function(s){let r={};try{r=JSON.parse(s),U.setSum(110644,51,1)}catch(m){U.setSum(110644,53,1)}const{vid:d,vh:c,vw:l,ratio:p,index:_}=a;t={hit_bizuin:r.hit_bizuin,hit_vid:r.hit_vid,txvideo_vid:r.txvideo_vid,txvideo_openid:r.txvideo_openid,ckey:r.ckey,ckey_ad:r.ckey_ad,video_title:r.video_title,ori_status:r.ori_status,nick_name:window.nickname,hit_username:r.hit_username,is_mp_video:r.is_mp_video,is_login:r.is_login,user_uin:r.user_uin,vh:c,vw:l,scene:window.source||n("scene",window.location.href)||0,ratio:p,openid:r.openid,show_comment:window.show_comment,comment_id:window.comment_id,vid:d,__biz:window.biz,biz:window.biz,mid:window.mid,idx:window.idx,uin:window.uin,media_source:r.media_source,vidsn:r.vidsn,username:r.biz_user_name,preview:!!window.is_temp_url,sn:window.sn||n("sign",window.location.href)||"",source_encode_biz:window.source_encode_biz,video_md5:r.video_md5,isPaySubscribe:1*window.isPaySubscribe||0,bizNickname:window.nickname,roundHeadImg:window.round_head_img,subscene:window.subscene,enterid:1*window.enterid,sessionid:window.sessionid,channel_session_id:window.channel_session_id,real_item_show_type:window.real_item_show_type,item_show_type:window.item_show_type,clientversion:window.clientversion,devicetype:window.devicetype,isprofileblock:window.isprofileblock,iframeIdx:_},1*t.ori_status==1?e.ori_status=1:1*t.ori_status==2?e.ori_status=2:e.ori_status=3,e.showComment=1*t.show_comment==1,e.comment_id=t.comment_id,e.vid=t.vid,e.ckey=t.ckey,e.ckey_ad=t.ckey_ad,e.__biz=t.__biz,e.uin=t.uin,e.mid=t.mid,e.idx=t.idx,e.scene=t.scene||n("scene",window.location.href)||0,e.autoplay=!!e.container.getAttribute("__sec_open_auto_play__"),e.iframeIdx=t.iframeIdx,e.dom={js_article:document.getElementById("js_article"),js_mpvedio:i("js_mpvedio_wrapper_"+e.vid),page_content:i("page-content")},o(),function(){const o=i("h5_profile_btn");o&&2===t.ori_status&&j.tap(o,(function(){const e="https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz="+t.source_encode_biz+"&scene=111#wechat_redirect";N.isWindowsWechat||N.isMacWechat?location.href=e:O.invoke("openUrlWithExtraWebview",{url:e,openType:1},(function(t){-1===t.err_msg.indexOf("ok")&&(location.href=e)}))}));const a=i("video_detail_btn");a&&1===t.media_source&&j.tap(a,(function(){const i=["https://mp.weixin.qq.com/mp/video?t=pages/video_detail_new","&vid=",e.vid,"&mid=",e.mid,"&__biz=",e.__biz,"&idx=",e.idx,"&sn=",window.sn||n("sign",window.location.href)||"","&vidsn=",t&&t.vidsn?t.vidsn:"","&scene=100#wechat_redirect"];e.myPlayer&&e.myPlayer.extendMpReportData({detail_click:1}),window.location.href=i.join("")}))}()},error:function(){U.setSum(110644,52,1)}})}return{createMpVideoDom:function(t,n,i){const o=t.getAttribute("data-src")||t.getAttribute("src"),s=z.getQuery("vid",o),r=t.getAttribute("data-vw"),d=t.getAttribute("data-vh"),c=t.getAttribute("data-ratio"),l=document.createElement("span"),p=t.attributes;for(let e=p.length-1;e>=0;e--)l.setAttribute(p[e].name,p[e].value);l.id="js_mp_video_container_"+n,l.setAttribute("vid",s),l.classList.add("video_iframe"),l.style.cssText=t.style.cssText,l.style.display="none";let _=q.tmpl('<div id="page-content">\n  \x3c!--S 全屏播放 full_screen_mv--\x3e\n  <div id="js_mpvedio_wrapper_<#=vid#>" style="position:relative">\n    <div class="add_bg_color appmsg_video">\n      <div id="js_video_tail_panel_<#=vid#>" class="video_tail_module video_screen_half" style="display: none;">\n        <div class="video_tail_module__hd" id="js_video_tail_hd">\n          <div class="account_info_wrp">\n            <div class="profile_info_wrp js_go_profile">\n              <img class="account_avatar" src="" alt="" id="js_tail_panel_account_avatar">\n                <div class="account_name" id="js_tail_panel_account_name"></div>\n                <div class="subscription_info subscription_success">\n                  <div class="account_subscription_tips js_subscription_success" id="js_subscription_success"\n                    style="display: none;">已关注</div>\n                  <i class="account_link_icon js_profile_icon" id="js_profile_icon"></i>\n                </div>\n            </div>\n            <div class="btn_account_subscription js_btn_account_subscription" id="js_btn_account_subscription" style="display: none;">\n              关注</div>\n          </div>\n          <div class="opr_wrp">\n            <span class="opr_item_wrp js_replay" id="js_replay">\n              <i class="opr_item refresh_icon"></i>\n              <span class="opr_item_text">重播</span>\n            </span>\n            <span class="opr_item_wrp share_item_wrp js_share_button" id="js_tail_share_button"\n              style="display: none;">\n              <i class="opr_item share_icon"></i>\n              <span class="opr_item_text">分享</span>\n            </span>\n            \x3c!--点赞后 加className selected--\x3e\n            <span class="opr_item_wrp like_item_wrp" id="js_tail_like_button" style="display: none;">\n              <i class="opr_item like_icon"></i>\n              <span class="opr_item_text">赞</span>\n            </span>\n            \x3c!-- <span class="opr_item_wrp recommend_item_wrp" id="js_tail_channel_button"\n              style="display: none;">\n              <i class="opr_item video-logo_icon"></i>\n              <span class="opr_item_text">随便看看</span>\n            </span> --\x3e\n          </div>\n        </div>\n\n        \x3c!-- 有拓展内容 --\x3e\n        <div class="have_expand" id="js_expand_area">\n        </div>\n\n        \x3c!-- 广告内容 --\x3e\n        <div class="ad_area" id="js_tail_video_ad_area">\n        </div>\n      </div>\n    </div>\n    <div id="js_vue_player_<#=index#>"></div>\n  </div>\n  \x3c!--E 视频播放器--\x3e\n  \x3c!-- S 视频社交--\x3e\n  <div id="bottom_bar" class="interact_video" style="display:none;height: 35px;">\n    <div class="inter_opr">\n      <a id="video_detail_btn" href="javascript:;" target="_blank" class="access_original">\n        视频详情\n      </a>\n    </div>\n  </div>\n</div>',{vid:s,index:n,video_h:d},!1);l.innerHTML=_;const m=t.parentNode;return m?(m.lastChild===t?m.appendChild(l):m.insertBefore(l,t.nextSibling),m.removeChild(t),e.container=l,a({iframe:l,vid:s,vh:d,vw:r,ratio:c,index:n},i),l):null}}}function io(){let e={txVideoReg:/^http(s)*\:\/\/v\.qq\.com\/iframe\/(preview|player)\.html\?/,mpVideoReg:/^http(s)*\:\/\/mp\.weixin\.qq\.com\/mp\/readtemplate\?t=pages\/video_player_tmpl/,video_iframe:[],video_top:[]};function t(e){console.info("iframe_onload");let t=0;try{const n=document.getElementsByTagName("html").item(0).style["-webkit-text-size-adjust"],i=e.contentDocument;if(i){const e=i.getElementsByTagName("html").item(0);e&&(e.style["-webkit-text-size-adjust"]=n)}if(O.on("menu:setfont",(function(t){const n=function(e){let t=0;return e.contentDocument&&e.contentDocument.body.offsetHeight?t=e.contentDocument.body.offsetHeight:e.Document&&e.Document.body&&e.Document.body.scrollHeight?t=e.Document.body.scrollHeight:e.document&&e.document.body&&e.document.body.scrollHeight&&(t=e.document.body.scrollHeight),t}(e);e.parentElement&&0!==n&&(e.style.height=`${n}px`)})),e.contentDocument&&e.contentDocument.body.offsetHeight?t=e.contentDocument.body.offsetHeight:e.Document&&e.Document.body&&e.Document.body.scrollHeight?t=e.Document.body.scrollHeight:e.document&&e.document.body&&e.document.body.scrollHeight&&(t=e.document.body.scrollHeight),e.parentElement&&(e.style.height=t+"px"),/MSIE\s(7|8)/.test(navigator.userAgent)&&e.contentWindow&&e.contentWindow.document){let t=e.contentWindow.document.getElementsByTagName("html");t&&t.length&&(t[0].style.overflow="hidden")}qn&&qn.postPageHeightMessage&&qn.postPageHeightMessage("updatePageHeight"),console.log("financeUtils done")}catch(n){}}let n=[].slice.call(document.getElementsByTagName("iframe")),i=[],o=Math.ceil(1e4*Math.random());window.reportVid=[];for(let s=0,r=n.length;s<r;++s)!function(n,a){let r=n.getAttribute("data-src")||"",d=n.className||"",c=n.getAttribute("src")||r;if(!r||"#"==r){let e=n.getAttribute("data-display-src");if(e&&(0==e.indexOf("/cgi-bin/readtemplate?t=vote/vote-new_tmpl")||0==e.indexOf("https://mp.weixin.qq.com/cgi-bin/readtemplate?t=vote/vote-new_tmpl"))){e=e.replace(/&amp;/g,"&");let t=e.split("&"),n=["/mp/newappmsgvote?action=show"];for(let e=0;e<t.length;e++)0!=t[e].indexOf("__biz=")&&0!=t[e].indexOf("supervoteid=")||n.push(t[e]);n.length>1&&(r=n.join("&")+"#wechat_redirect")}}if(c&&(e.txVideoReg.test(c)||e.mpVideoReg.test(c))){if(ne.isShowMpVideo()||e.mpVideoReg.test(c)){let t=z.getQuery("vid",r);if(!t)return;let i=n.getAttribute("data-vw"),s=n.getAttribute("data-vh");"qq.com"==document.domain&&((new Image).src="https://badjs.weixinbridge.com/badjs?id=139&level=4&from="+window.encodeURIComponent(window.location.host)+"&msg="+window.encodeURIComponent(window.location.href),U.setLogs({id:27302,key:100,value:1,lc:1,log0:"[beforeD]"+window.encodeURIComponent(window.location.href)})),window.reportVid.push(t),c=["/mp/videoplayer?video_h=",s,"&video_w=",i,"&scene=",window.source,"&random_num=",o,"&article_title=",encodeURIComponent(window.msg_title.htmlDecode()),"&source=4&vid=",t,"&mid=",appmsgid,"&idx=",itemidx||idx,"&__biz=",biz,"&nodetailbar=",window.is_temp_url?1:0,"&uin=",uin,"&key=",key,"&pass_ticket=",pass_ticket,"&version=",version,"&devicetype=",window.devicetype||"","&wxtoken=",window.wxtoken||"","&sessionid=",window.sessionid||"","&preview=",window.is_temp_url?1:0,"&is_in_pay_subscribe=",window.isPaySubscribe,`&nickname=${window.nickname}`,`&roundHeadImg=${window.round_head_img}`,`&enterid=${window.enterid}`,`&subscene=${window.subscene}`].join("");const d=no().createMpVideoDom(n,a,c);e.video_iframe.push({dom:d,vid:t})}}else if(r&&(r.indexOf("newappmsgvote")>-1&&(d.indexOf("js_editor_vote_card")>=0||d.indexOf("vote_iframe")>=0)||0==r.indexOf("http://mp.weixin.qq.com/bizmall/appmsgcard")&&(d.indexOf("card_iframe")>=0||d.indexOf("js_editor_card")>=0)||r.indexOf("appmsgvote")>-1||r.indexOf("mp.weixin.qq.com/mp/getcdnvideourl")>-1)){if(window.is_transfer_msg&&!window.reprint_ticket&&r.indexOf(window.biz)<0)return void i.push(n);if(window.__second_open__||(r=r.replace(/^http:/,location.protocol)),d.indexOf("card_iframe")>=0||d.indexOf("js_editor_card")>=0){-1===d.indexOf("card_iframe")&&(n.className+=" card_iframe"),-1===d.indexOf("res_iframe")&&(n.className+=" res_iframe");let e=r.replace("#wechat_redirect",["&pass_ticket=",pass_ticket,"&scene=",source,"&msgid=",appmsgid,"&msgidx=",itemidx||idx,"&version=",version,"&devicetype=",window.devicetype||"","&child_biz=",biz,"&wxtoken=",window.wxtoken||""].join(""));reprint_ticket&&(e+=["&mid=",mid,"&idx=",idx,"&reprint_ticket=",reprint_ticket,"&source_mid=",source_mid,"&source_idx=",source_idx].join("")),window.__second_open__?R({url:e,type:"GET",f:"html",success:function(i){n.setAttribute("src",e),n.contentWindow.document.open("text/html","replace"),n.contentWindow.document.write(i),n.contentWindow.document.close(),n.contentWindow.history.replaceState(null,null,e),-1==r.indexOf("mp.weixin.qq.com/mp/getcdnvideourl")&&(n.onload=function(){t(n)})}}):(n.setAttribute("src",e),-1==r.indexOf("mp.weixin.qq.com/mp/getcdnvideourl")&&(n.onload=function(){t(n)}))}else{let e=r.indexOf("#wechat_redirect")>-1,i=["&uin=",uin,"&key=",key,"&pass_ticket=",pass_ticket,"&wxtoken=",window.wxtoken||""].join("");reprint_ticket?i+=["&mid=",mid,"&idx=",idx,"&reprint_ticket=",reprint_ticket,"&source_mid=",source_mid,"&source_idx=",source_idx,"&appmsg_token=",appmsg_token].join(""):(d.indexOf("vote_iframe")>=0||d.indexOf("js_editor_vote_card")>=0)&&(i+=["&mid=",mid,"&idx=",idx,"&appmsg_token=",appmsg_token].join(""),-1===d.indexOf("vote_iframe")&&(n.className+=" vote_iframe"));let o=e?r.replace("#wechat_redirect",i):r+i;window.__second_open__?R({url:o,type:"GET",f:"html",success:function(e){n.contentWindow.Ajax=R,n.setAttribute("src",o),n.contentWindow.document.open("text/html","replace"),n.contentWindow.document.write(e),n.contentWindow.document.close(),n.contentWindow.history.replaceState(null,null,o),-1==r.indexOf("mp.weixin.qq.com/mp/getcdnvideourl")&&(n.onload=function(){t(n)})}}):(n.setAttribute("src",o),-1==r.indexOf("mp.weixin.qq.com/mp/getcdnvideourl")&&(n.onload=function(){t(n)}))}n.appmsg_idx=s}if(r&&r.indexOf("mp.weixin.qq.com/mp/getcdnvideourl")>-1&&w>0){let e=w,t=3*e/4;n.width=e,n.height=t,n.style.setProperty&&(n.style.setProperty("width",e+"px","important"),n.style.setProperty("height",t+"px","important"))}}(n[s],s);for(let s=0;s<i.length;s++){let e=i[s];e.parentNode.removeChild(e)}function a(){let t=window.pageYOffset||document.documentElement.scrollTop,n=e.video_top.length,i=t+S.getInnerHeight(),o=0;for(let a=0;a<n;a++){let t=e.video_top[a];t.reported?o++:i>=t.start&&i<=t.end&&(t.reported=!0,setTimeout(function(e,t,n){return function(){let i=ie.getVideoInfo(),o="",a="",s=3;i[e]&&(i[e].hit_bizuin&&(o=i[e].hit_bizuin),i[e].hit_vid&&(a=i[e].hit_vid),i[e].ori_status&&(s=i[e].ori_status)),ee.report({step:1,hit_vid:a,hit_bizuin:o,ori_status:s,vid:e,screen_num:Math.ceil(t/n),screen_height:n})}}(t.vid,i,S.getInnerHeight()),1e4))}o==n&&(j.off(window,"scroll",a),e.video_top=e.video_iframe=a=null)}if(window.iframe_reload=function(){for(let e=0,i=n.length;e<i;++e){let i=n[e],o=i.getAttribute("src");o&&(o.indexOf("newappmsgvote")>-1||o.indexOf("appmsgvote")>-1)&&t(i)}},"getElementsByClassName"in document){let e=document.getElementsByClassName("video_iframe");for(let t,n=0;t=e.item(n++);)t.setAttribute("scrolling","no"),t.style.overflow="hidden"}e.video_iframe.length>0&&setTimeout((function(){let t=e.video_iframe,n=document.getElementById("js_article");for(let i=0,o=t.length;i<o;i++){let o=t[i];if(!o||!o.dom)return;let a=o.dom,s=parseFloat(getComputedStyle(a).getPropertyValue("height")),r=0;for(;a&&n!==a;)r+=a.offsetTop,a=a.offsetParent;e.video_top.push({start:r+s/2,end:r+s/2+S.getInnerHeight(),reported:!1,vid:o.vid})}a(),j.on(window,"scroll",a)}))}const oo=[];function ao(e){let t=e.getAttribute("data-src")||e.getAttribute("src"),n=z.getQuery("vid",t),i=e.getAttribute("data-vw"),o=e.getAttribute("data-vh"),a=e.getAttribute("data-ratio"),s=document.createElement("span");s.setAttribute("data-ratio",a),s.id="js_tx_video_container_"+Math.random(),s.className="js_tx_video_container",s.style.cssText=e.style.cssText,s.style.display="none";let r=e.parentNode;if(r)return r.lastChild===e?r.appendChild(s):r.insertBefore(s,e.nextSibling),je.createTxVideo({containerId:s.id,vid:n,width:i,height:o,autoplay:!1,allowFullScreen:!0,onSuccess:function(e){s.playerObj=e.player,function(e,t){if(!t||!e)return;let n=e.parentNode;if(!n)return;let i=[];for(let o=0,a=n.children.length;o<a;o++){let e=n.children[o];e.className.indexOf("img_loading")>=0&&e.getAttribute("data-vid")==t&&i.push(e)}for(let o=0,a=i.length;o<a;o++)n.removeChild(i[o]);e.style.display="block"}(s,n),s.style.display="block"},onError:function(){}}),r.removeChild(e),s}function so(){let e="27613";V.getData({biz:biz,appmsg_type:appmsg_type,mid:mid,sn:sn,idx:idx,scene:source,title:msg_title,ct:ct,abtest_cookie:abtest_cookie,devicetype:devicetype,version:window.clientversion,is_need_ticket:oo&&oo.length>0?1:0,is_need_ad:0,comment_id:comment_id,is_need_reward:is_need_reward,both_ad:0,reward_uin_count:is_need_reward?3*Vi({can_reward:!0})-1:0,send_time:window.send_time||"",msg_daily_idx:msg_daily_idx,item_show_type:window.item_show_type,is_original:0,is_only_read:is_only_read,req_id:window.req_id||"",pass_ticket:pass_ticket,is_temp_url:window.is_temp_url||0,rtId:e,rtKey:"50",appmsg_like_type:window.appmsg_like_type,is_pay_subscribe:window.isPaySubscribe,pay_subscribe_uin_count:window.isPaySubscribe?3*be.getCountPerLine():0,has_red_packet_cover:window.__appmsgCgiData.has_red_packet_cover,onSuccess:function(t){if(t)try{if(h.commit("SET_EXT_RES",t),window.__second_open__&&t.pay_subscribe_info&&1*t.pay_subscribe_info.is_paid!=isPaid)return ve.report110809(11),(new Image).src="https://badjs.weixinbridge.com/badjs?id=244&level=4&from="+window.encodeURIComponent(window.location.host)+"&msg="+window.encodeURIComponent(window.location.href),void O.invoke("handleMPPageAction",{action:"paySuccess",fullUrl:window.location.href,itemShowType:window.item_show_type},(e=>{e.err_msg.indexOf("ok")>-1?ve.report110809(19):ve.report110809(20),window.localStorage&&window.localStorage.setItem&&window.localStorage.setItem(`isPaid-${window.biz}-${window.mid}-${window.idx}`,"1"),window.location.href=window.location.href+"&r="+Math.random()+"#wechat_redirect"}));if(t&&t.base_resp&&t.base_resp.wxtoken&&(window.wxtoken=t.base_resp.wxtoken),window.fromWeixinCached&&io(),function(e){if(!e||!e.img_copy_info||!e.img_copy_info.list)return;let t={},n=e.img_copy_info.list,i=window.__appmsgCgiData.copyright_stat,o=window.__appmsgCgiData.source_biz;for(let s=0,r=n.length;s<r;s++){let e=n[s];if(2==e.type){if(2==i&&o==e.source_uin)continue;t[e.img_url]={source_nickname:e.source_nickname,source_uin:e.source_uin,source_encode_biz:e.source_encode_biz||""}}}let a=document.getElementsByTagName("img");for(let s=0,r=a.length;s<r;s++){let e=a[s],n=e.getAttribute("data-src")||e.getAttribute("data-backsrc")||"";if(t[n]){let i=document.createElement("div");i.innerHTML=q.tmpl('<span class="original_img_wrp">            \n<span class="tips_global">来自: <#=source_nickname#></span>\n</span>',t[n],!1);let o=i.children[0],a=e.parentNode.insertBefore(o,e),s=a.children[0];!function(e,t){j.on(t,"click",(function(t){let n="https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz="+e.source_encode_biz+"&scene=112#wechat_redirect";return N.isWindowsWechat||N.isMacWechat?(location.href=n,!1):(O.invoke("openUrlWithExtraWebview",{url:n,openType:1},(function(e){-1==e.err_msg.indexOf("ok")&&(location.href=n)})),!1)}))}(t[n],s),a.insertBefore(e,s)}}}(t),t.ret)return;if(t.red_packet_cover_data&&t.red_packet_cover_data.cover_uri_data&&t.red_packet_cover_data.cover_uri_data.length>0&&(Jn(),Fn({list:t.red_packet_cover_data.cover_uri_data})),window.isFans=t.is_fans,t.pay_subscribe_info&&(window.payEduTips={firstWecoinRecharge:1*t.pay_subscribe_info.first_wecoin_recharge,userImgUrl:t.pay_subscribe_info.user_img_url,userNickname:t.pay_subscribe_info.user_nick_name},window.payGlobal={enable_custom_recharge:t.pay_subscribe_info.enable_custom_recharge,agreement_url:t.pay_subscribe_info.agreement_url,agreement_version:t.pay_subscribe_info.agreement_version,agreement_status:t.pay_subscribe_info.agreement_status,recharge_product_id:t.pay_subscribe_info.recharge_product_id,price:t.pay_subscribe_info.price},t.pay_subscribe_info.wecoin_tips&&(N.isIOS||N.isAndroid)&&!N.isWxWork)){let e;const t=N.isIOS?7:10,n=document.createElement("div");n.innerHTML=`<div class="pay__wecoin-edu"><div class="pay__wecoin-title"><div class="pay__icon-wecoin"></div><div>付费内容需用微信豆支付</div></div><div class="pay__wecoin-edu-desc">微信豆是用于购买微信内虚拟物品和服务的道具。<span>1元 = ${t}微信豆。</span>微信豆还可用于购买直播间的虚拟礼物等。</div></div>`;const i=document.createElement("a");i.innerText="常见问题",i.className="pay__wecoin-edu-link",j.on(i,"tap",(t=>{t&&t.preventDefault(),ve.reportPayAppmsg(17),O.invoke("openUrlWithExtraWebview",{url:"https://kf.qq.com/touch/product/WXDB_app.html",openType:1}),e.hide()})),e=new et(n,{title:"",extClass:"pay__wecoin-edu-modal",top:window.innerHeight-375+"px",footerEl:i}),e.show()}!function(e){let t=e.appmsgstat||{};const n=e.appmsgact||{},i=e.paySubscribeInfo||{};window.paySubscribeInfo=i,window.isFans=e.is_fans,window.appmsgstat||(window.appmsgstat=t),Ie(),se.setBackgroundClass(),$i(Object.assign({isFans:e.is_fans},e.reward),{reward_entrance_enable_for_preview:e.reward_entrance_enable_for_preview,reward_wording:e.reward_wording,reward_author_head:e.reward_author_head}),window.isPaySubscribe&&be.init(i,{rewardTotal:e.reward.reward_total||0,rewardTotalCut:e.reward.is_reward_total_count_cut});let o=[];const{old_liked_before:a,seen_before:s,favorite_before:r,share_before:d,reward_before:c,pay_before:l}=n,{old_liked:p,liked:_}=t;(p||a)&&o.push("like"),(_||s)&&o.push("zaikan"),r&&o.push("collect"),d&&o.push("share"),c&&o.push("reward"),l&&o.push("pay"),J&&(o.length>0||F.isFromRecommend)&&J.renderLikeProfile(o),F&&(t.old_liked||n.old_liked_before?F.render("praise",!0):t.liked||n.seen_before?F.render("like",!0):n.favorite_before?F.render("favorite",!0):n.share_before?F.render("share",!0):F.isFromRecommend||!window.is_login?F.render("other",!0):n.reward_before?F.render("reward",!0):n.pay_before&&F.render("pay",!0))}({appmsgstat:t.appmsgstat,appmsgact:t.appmsgact,comment_enabled:t.comment_enabled,comment_count:t.comment_count,only_fans_can_comment:t.only_fans_can_comment,only_fans_days_can_comment:t.only_fans_days_can_comment,is_fans_days:t.is_fans_days,reward:{reward_total:t.reward_total_count,is_reward_total_count_cut:t.is_reward_total_count_cut,reward_head_imgs:t.reward_head_imgs||[],can_reward:t.can_reward,user_can_reward:t.user_can_reward,reward_qrcode_ticket:t.reward_qrcode_ticket,timestamp:t.timestamp,reward_author_head:t.reward_author_head,rewardsn:t.rewardsn,scene:source,is_need_reward:is_need_reward,title:msg_title,author_id:author_id,appmsgextRtId:e,appmsgextRtKey:"50",can_whisper:t.can_whisper},reward_entrance_enable_for_preview:t.reward_entrance_enable_for_preview,reward_wording:t.reward_wording,reward_author_head:t.reward_author_head,comment_entrance_enable_for_preview:t.comment_entrance_enable_for_preview,share_redirect_url:t.share_redirect_url||"",logo_url:t.logo_url,nick_name:t.nick_name,is_fans:t.is_fans,paySubscribeInfo:t.pay_subscribe_info,share_flag:t.share_flag,test_flag:t.test_flag}),t.appmsg_album_extinfo&&to.init(t.appmsg_album_extinfo)}catch(n){return oe.log("[Appmsg] error parse async data, biz="+biz+", mid="+mid),(new Image).src=("http://mp.weixin.qq.com/mp/jsreport?1=1&key=1&content=biz:"+biz+",mid:"+mid+",uin:"+uin+"[key1]"+encodeURIComponent(n.toString())+"&r="+Math.random()).substr(0,1024),console&&console.error(n),void(void 0!==window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&WX_BJ_REPORT.BadJs.onError(n))}},onError:function(){(new Image).src="http://mp.weixin.qq.com/mp/jsreport?1=1&key=2&content=biz:"+biz+",mid:"+mid+",uin:"+uin+"[key2]ajax_err&r="+Math.random()},onComplete:function(){window.ext_complete=!0,ae.emit("ext-complete")}})}function ro(){!function(){let e=document.getElementsByTagName("iframe"),t=[];for(let o=0,a=e.length;o<a;++o)t.push(e[o]);e=null;let n=document.getElementById("js_content").offsetWidth,i=n/ee.getRatio();window.logs.video_cnt=0;for(let o=0,a=t.length;o<a;++o){let e=t[o],a=e.getAttribute("data-src")||"",s=e.getAttribute("src")||a;if(s)if(0==s.indexOf("http://z.weishi.com/weixin/player.html"))s=s.replace(/width=\d+/g,"width="+n),s=s.replace(/height=\d+/g,"height="+i),e.width=n,e.height=i,e.style.setProperty&&(e.style.setProperty("width",n+"px","important"),e.style.setProperty("height",i+"px","important")),e.setAttribute("src",s),window.__addIdKeyReport&&window.__addIdKeyReport("28307",10),window.logs.video_cnt++;else{if(/http(s)*\:\/\/v\.qq\.com\/iframe\/(preview|player)\.html\?/.test(s)){if(!ne.isShowMpVideo()){const t=ao(e);t&&oo.push(t),"function"==typeof window.__addIdKeyReport&&(window.__addIdKeyReport("28307",10),N.isWechat&&N.isWindowsWechat?window.__addIdKeyReport("110644",0):N.isWechat&&N.isMacWechat&&window.__addIdKeyReport("110644",1))}window.logs.video_cnt++;continue}/^http(s)*\:\/\/mp\.weixin\.qq\.com\/mp\/readtemplate\?t=pages\/video_player_tmpl/.test(s)&&window.logs.video_cnt++}}oo.length>0&&"function"==typeof window.__getVideoWh&&j.on(window,"resize",(function(){try{for(let e=0,t=oo.length;e<t;e++){let t=oo[e],n=t.playerObj;if(n){let e=window.__getVideoWh(t);t.style.width=e.w+"px",t.style.height=e.h+"px",n.resize({width:e.vw,height:e.vh})}}}catch(e){}}),!1)}(),so()}function co(){const e=document.getElementById("js_read_container"),t={player:null,srcId:`__wxtag__${window.biz}-${window.mid}-${window.idx}`,mediaId:"",tag:"===mediaId-sep===",playDuration:0,playTime:0,maxNum:5,curNum:0,format:"",type:6,speed:100,voiceInfo:{title:"",nickname:"",appmsgUrl:"",duration:0},voiceOpt:null,lock:!1,status:"stop",currentTime:0,beginTime:0,leaveNeedReport:!1,pause2PlayNeedReport:!1,isSeek:!1,loadingTimer:null},n=e=>`${e}&uin=${window.uin}&key=${window.key}&pass_ticket=${encodeURIComponent(window.pass_ticket)}`,i=()=>{if(t.curNum>10)return(e=>{if(!e&&null!==t.loadingTimer)return clearTimeout(t.loadingTimer),void(t.loadingTimer=null);O.invoke("handleMPPageAction",{action:"showToast",status:e?"loading":"dismissloading"})})(!1),t.lock=!1,void weui.alert("系统繁忙，请稍后再试");t.curNum++;const e=t.curNum>t.maxNum?5e3:1e3;R({url:`/mp/msgvoice?action=getvoiceinfo&__biz=${window.biz}&mid=${window.mid}&idx=${window.idx}&sn=${window.sn}&type=${t.type}&speed=${t.speed}`,type:"GET",dataType:"json",async:!0,success:a=>{if(a&&a.base_resp&&0===a.base_resp.ret)if(a.mediaid){t.mediaId=a.mediaid;const e=encodeURIComponent(`__biz=${window.biz}&mid=${window.mid}&idx=${window.idx}`),i=t.voiceInfo;t.voiceOpt={protocol:2===a.format?"hls":"",src:n(`https://mp.weixin.qq.com/mp/msgvoice?action=get_voice&mediaid=${a.mediaid}&devicetype=${window.devicetype}&_type=${t.type}&speed=${t.speed}&encodeurl=${e}`),lowbandUrl:n(`https://mp.weixin.qq.com/mp/msgvoice?action=get_voice&mediaid=${a.mediaid}&devicetype=${window.devicetype}&_type=${t.type}&speed=${t.speed}&encodeurl=${e}`),title:i.title,epname:"来自文章",singer:i.nickname?`${i.nickname}的语音`:"公众号语音",srcId:t.srcId+t.tag+t.mediaId,coverImgUrl:"",webUrl:i.appmsgUrl,musicbar_url:`https://mp.weixin.qq.com/mp/msgvoice?action=ttspage&__biz=${window.biz}&mid=${window.mid}&idx=${window.idx}&sn=${window.sn}&type=${t.type}#wechat_redirect`,needStartMusicUI:0},o()}else setTimeout(i,1e3);else console.log("getvoiceinfo err",a),setTimeout(i,e)},error:t=>{console.log("getvoiceinfo err",t),setTimeout(i,e)}})},o=()=>{t.player=me.init({protocal:"hls",wxIndex:t.voiceOpt.srcId,type:7,comment_id:"",src:t.voiceOpt.src,jsapi2Src:t.voiceOpt.src+"&voice_type=1",allowPause:!0,duration:t.voiceInfo.duration,title:t.voiceOpt.title,singer:t.voiceOpt.singer,epname:t.voiceOpt.epname,coverImgUrl:t.voiceOpt.coverImgUrl,playingCss:"share_audio_playing",playCssDom:e.getElementsByClassName("js_read_main")[0],playArea:e.getElementsByClassName("js_read_play")[0],progress:e.getElementsByClassName("js_read_progress")[0],fileSize:0,playtimeDom:e.getElementsByClassName("js_read_playtime")[0],bufferDom:e.getElementsByClassName("js_read_buffer")[0],playdotDom:e.getElementsByClassName("js_read_playdot")[0],seekRange:e.getElementsByClassName("js_read_seekRange")[0],seekContainer:e.getElementsByClassName("js_read_main")[0],loadingDom:e.getElementsByClassName("js_read_loading")[0],detailArea:"",detailUrl:t.voiceOpt.musicbar_url,webUrl:t.voiceOpt.musicbar_url})};R({url:`/mp/msgvoice?action=ttspage&__biz=${window.biz}&mid=${window.mid}&idx=${window.idx}&sn=${window.sn}&type=${t.type}&f=json`,type:"GET",dataType:"json",async:!0,success:n=>{n&&n.base_resp&&0===n.base_resp.ret?(t.voiceInfo={title:n.title,nickname:n.nickname,appmsgUrl:n.appmsg_url,duration:1*n.voice_info.duration},i(),e.getElementsByClassName("js_read_duration")[0].innerHTML=(e=>{const t=e=>e>=10?e:`0${e}`;return`${t(Math.floor(e/60))}:${t(e%60)}`})(1*n.voice_info.duration)):weui.alert("系统繁忙，请稍后再试")},error:e=>{console.log("ttspage err: ",e),weui.alert("网络不可用，请检查网络设置")}})}const lo={adapter:{1:ue,2:we},musicList:{},musicLen:0};function po(e,t,n){if(t.media_id=me.encodeStr(e.getAttribute("mid")||"").replace(/^\s/,"").replace(/\s$/,""),t.musictype=parseInt(e.getAttribute("musictype"))||1,t.musictype>2&&(t.musictype=2),t.albumid=me.encodeStr(e.getAttribute("albumid")||"").replace(/^\s/,"").replace(/\s$/,""),t.otherid=me.encodeStr(e.getAttribute("otherid")||"").replace(/^\s/,"").replace(/\s$/,""),t.jumpurlkey=me.encodeStr(e.getAttribute("jumpurlkey")||"").replace(/^\s/,"").replace(/\s$/,""),t.duration=parseInt(e.getAttribute("play_length")||0,10),t.posIndex=n,t.albumurl=me.encodeStr(e.getAttribute("albumurl")||"").replace(/^\s/,"").replace(/\s$/,""),t.audiourl=me.encodeStr(e.getAttribute("audiourl")||"").replace(/^\s/,"").replace(/\s$/,""),t.singer=me.encodeStr(e.getAttribute("singer")||"").replace(/^\s/,"").replace(/\s$/,""),!t.singer||"undefined"==t.singer){let n=e.getAttribute("src")||"",i=decodeURIComponent(z.getQuery("singer",n)||"");t.singer=me.encodeStr(i).replace(/^\s/,"").replace(/\s$/,""),t.singer&&"undefined"!=t.singer||(t.singer="")}t.music_name=me.encodeStr(e.getAttribute("music_name")||"").replace(/^\s/,"").replace(/\s$/,""),lo.adapter[t.musictype]&&"function"==typeof lo.adapter[t.musictype].initData&&(t=lo.adapter[t.musictype].initData(t,{scene:0})),me.renderPlayer('<span id="qqmusic_main_<#=musicid#>_<#=posIndex#>" class="js_wap_qqmusic db pages_reset music_area <#if(!musicSupport){#> unsupport<#}#>">\n  <span class="tc tips_global unsupport_tips" <#if(show_not_support!==true){#>style="display:none;"<#}#>>\n  当前浏览器不支持播放音乐或语音，请在微信或其他浏览器中播放\n  </span>\n  <span class="db music_card appmsg_card_context wx_tap_card js_wx_tap_highlight">\n    <a role="none" id="qqmusic_home_<#=musicid#>_<#=posIndex#>" class="music_card_bd">\n      <span role="link" tabindex="0" aria-labelledby="music_title_tips_<#=musicid#>_<#=posIndex#> music_link_<#=musicid#>_<#=posIndex#> js_a11y_comma music_singer_<#=musicid#>_<#=posIndex#> js_a11y_comma music_source_<#=musicid#>_<#=posIndex#>" id="music_link_<#=musicid#>_<#=posIndex#>" class="music_card_title"><#=music_name#></span>\n      <span aria-hidden="true" id="music_title_tips_<#=musicid#>_<#=posIndex#>" class="weui-hidden_abs">音乐：</span>\n      <span aria-hidden="true" class="music_card_desc" id="music_singer_<#=musicid#>_<#=posIndex#>"><#=singer#></span>\n      <span class="music_card_source <#if(musictype==2){#>music_card_source_kugou<#}#>">\n        <img aria-hidden="true" id="music_source_<#=musicid#>_<#=posIndex#>" src="<#=musicIcon#>" alt="<#if(musictype==2){#>来自酷狗音乐<#}else{#>来自QQ音乐<#}#>">\n      </span>\n    </a>\n    <span role="button" aria-label="播放" id="qqmusic_play_<#=musicid#>_<#=posIndex#>" class="music_card_ft">\n      <i class="weui-play-btn"></i>\n      <img src="<#=albumurl#>" data-autourl="<#=audiourl#>" data-musicid="<#=musicid#>" class="music_card_thumb" alt="">\n    </span>\n  </span>\n</span>',t,e);let i=t.musicid+"_"+t.posIndex,o=e.parentNode.querySelector('[data-preloadingid="'+i+'"]');o&&o.parentNode.removeChild(o),function(e){let t=e.musicid+"_"+e.posIndex;oe.log("[Music] init "+e.detailUrl);let n=me.decodeStr(e.music_name);e.player=me.init({allowPause:!0===e.allowPause,wxIndex:e.posIndex,type:e.type||0,comment_id:"",mid:e.media_id,otherid:e.otherid,albumid:e.albumid,songId:e.musicid,jumpurlkey:e.jumpurlkey,duration:e.duration,title:n,singer:window.nickname?window.nickname+"推荐的歌":"公众号推荐的歌",epname:"音乐",coverImgUrl:e.albumurl,playingCss:"qqmusic_playing",pauseCss:e.pauseCss||"",playCssDom:_o("qqmusic_main_"+t),playArea:_o("qqmusic_play_"+t),detailUrl:e.detailUrl||"",webUrl:e.webUrl||"",detailArea:_o("qqmusic_home_"+t)})}(t),lo.musicList[t.musicid+"_"+t.posIndex]=t}function _o(e){return document.getElementById(e)}function mo(){(function(){let e=_o("js_content");return!(!e||(lo._oElements=e.getElementsByTagName("qqmusic")||[],lo._oElements.length<=0))})()&&(lo.musicLen=lo._oElements.length,function(){let e=0;for(let t=0;t<lo.musicLen;t++){let n=lo._oElements[t],i={};i.musicid=me.encodeStr(n.getAttribute("musicid")||"").replace(/^\s/,"").replace(/\s$/,""),i.musicid&&"undefined"!=i.musicid&&(po(n,i,e),e++)}}())}const uo={musicList:{},musicLen:0,srcRoot:location.protocol+"//res.wx.qq.com/voice/getvoice?mediaid=#meidaid#"};function wo(e,t,n){t.duration=parseInt((1*e.getAttribute("play_length")||0)/1e3,10),t.duration_str=me.formatTime(t.duration),t.posIndex=n;var i=e.getAttribute("name")||"";try{i=decodeURIComponent(i)}catch(o){}if(t.title=me.encodeStr(i).replace(/^\s/,"").replace(/\s$/,""),t.fileSize=1*e.getAttribute("high_size")||0,t.nickname=window.nickname,t.voiceTag="v",1===window.is_temp_url){const{transState:e,voiceVerifyState:n}=window.voice_in_appmsg[t.voiceid];t.transState=e,t.voiceVerifyState=n}me.renderPlayer('<span class="js_audio_frame db pages_reset audio_area <#if(!!albumLink){#>audio_area_tag<#}#>">\n  <#if(show_not_support===true){#>\n  <span class="db">当前浏览器不支持播放音乐或语音，请在微信或其他浏览器中播放</span>\n  <#}#>\n\n  <span tabindex="0" id="voice_main_<#=voiceid#>_<#=posIndex#>" class="wx_tap_card js_wx_tap_highlight appmsg_card_context db audio_card <# if (!!errMsg) { #> pages_ban_msg_wrp <# } #>" <#if(!musicSupport){#>style="display:none;"<#}#>>\n    <span id="audio_card_bd_<#=voiceid#>_<#=posIndex#>" class="audio_card_bd" <# if (!!errMsg) { #> style="visibility: hidden;"<# } #>>\n      <strong  id="voice_title_<#=voiceid#>_<#=posIndex#>" class="audio_card_title" role="link" tabindex="0" aria-labelledby="js_a11y_audio_title_tips_<#=voiceid#>_<#=posIndex#> voice_title_<#=voiceid#>_<#=posIndex#>"><#=title#></strong>\n      <span class="weui-hidden_abs" id="js_a11y_audio_title_tips_<#=voiceid#>_<#=posIndex#>" aria-hidden="true">音频：</span>\n\n      <span class="weui-flex weui-flex_align-center">\n        <span class="weui-flex__item">\n          <span class="audio_card_opr">\n            <span id="voice_seekRange_<#=voiceid#>_<#=posIndex#>" class="audio_card_progress_wrp">\n              <span class="audio_card_progress">\n                <span id="voice_progress_<#=voiceid#>_<#=posIndex#>" style="width:0%" class="audio_card_progress_inner"></span>\n                <span id="voice_buffer_<#=voiceid#>_<#=posIndex#>" class="audio_card_progress_buffer" style="width:0%;"></span>\n                <span id="voice_loading_<#=voiceid#>_<#=posIndex#>" class="audio_card_progress_loading" style="display:none;"></span>\n              </span>\n              <span tabindex="0" role="option" title="按住可调" id="voice_playdot_<#=voiceid#>_<#=posIndex#>" class="audio_card_progress_handle weui-wa-hotarea" style="display:none;left:0%;">\n                <span class="weui-hidden_abs">\n                  <span id="voice_percent_desc_<#=voiceid#>_<#=posIndex#>">进度条</span>\n                  <span id="voice_percent_<#=voiceid#>_<#=posIndex#>"></span>\n                </span>\n              </span>\n            </span>\n            <span role="option" aria-labelledby="voice_playtime_<#=voiceid#>_<#=posIndex#> js_a11y_space voice_duration_<#=voiceid#>_<#=posIndex#>" class="audio_card_tips">\n              <em aria-hidden="true" id="voice_playtime_<#=voiceid#>_<#=posIndex#>" class="audio_card_length_current">00:00</em>\n              <em aria-hidden="true" id="voice_duration_<#=voiceid#>_<#=posIndex#>" class="audio_card_length_total"><#=duration_str#></em>\n            </span>\n          </span>\n        </span>\n        <span tabindex="0" role="button" aria-label="播放" id="voice_play_<#=voiceid#>_<#=posIndex#>" class="audio_card_switch"><em id="audio_play_btn" class="weui-wa-hotarea weui-audio-btn"></em></span>\n      </span>\n\n      <span id="audio_card_control_<#=voiceid#>_<#=posIndex#>" class="weui-flex weui-flex_align-center audio_card_playtool" style="display: none;">\n        <button type="button" id="audio_fast_back_<#=voiceid#>_<#=posIndex#>" class="reset_btn audio_card_playbtn js_wx_tap_highlight"><span class="weui-hidden_abs">后退15秒</span></button>\n        <button type="button" id="audio_double_speed_<#=voiceid#>_<#=posIndex#>" class="weui-btn weui-btn_mini audio_card_playbtn_multiple weui-wa-hotarea js_wx_tap_highlight">倍速</button>\n        <button type="button" id="audio_fast_forward_<#=voiceid#>_<#=posIndex#>" class="reset_btn audio_card_playbtn js_wx_tap_highlight"><span class="weui-hidden_abs">快进15秒</span></button>\n      </span>\n    </span>\n\n    <#if(!!albumLink){#>\n      <span class="audio_card_ft" <# if (!!errMsg) { #> style="visibility: hidden;"<# } #>>\n        <span id="voice_album_<#=voiceid#>_<#=posIndex#>" class="audio__tag wx_tap_card" data-link="<#=albumLink#>" data-title="<#=albumTitle#>" data-album="<#=albumid#>" target="_blank">\n          <span role="link" tabindex="0" aria-labelledby="js_a11y_voice_album_link_<#=voiceid#>_<#=posIndex#> js_a11y_voice_album_link_title_<#=voiceid#>_<#=posIndex#> js_a11y_voice_album_link_num_<#=voiceid#>_<#=posIndex#>" id="js_a11y_voice_album_link_<#=voiceid#>_<#=posIndex#>" class="audio__tag-title">话题</span>\n          <span class="weui-flex__item" id="js_a11y_voice_album_link_title_<#=voiceid#>_<#=posIndex#>" aria-hidden="true">\n            <span class="audio__tag-name"><span aria-hidden="true">#</span><#=albumTitle#></span>\n          </span>\n          <span class="audio__tag-num" id="js_a11y_voice_album_link_num_<#=voiceid#>_<#=posIndex#>" aria-hidden="true"><#=albumNum#>个</span>\n        </span>\n      </span>\n    <#}#>\n\n    <# if (!!errMsg) { #>\n      \x3c!-- 违规处理提示 --\x3e\n      \x3c!-- 在需要处理的模块加上pages_ban_msg_wrp，然后加一个msg的子元素 --\x3e\n      <span class="pages_ban_msg"><#=errMsg#></span>\n    <# } #>\n  </span>\n</span>',t,e,void 0,(()=>{let n=t.voiceid+"_"+t.posIndex,i=e.parentNode.querySelector('[data-preloadingid="'+n+'"]');i&&i.parentNode.removeChild(i),function(e){var t=e.voiceid+"_"+e.posIndex,n="";if(window.voice_in_appmsg&&window.voice_in_appmsg[e.voiceid]){var i=window.voice_in_appmsg[e.voiceid],o=window.biz||"",a=window.mid||"",s=window.idx||"";i.bizuin&&i.appmsgid&&i.idx&&(o=i.bizuin,a=i.appmsgid,s=i.idx),n=(window.location.protocol||"https:")+"//mp.weixin.qq.com/mp/audio?_wxindex_=#_wxindex_#&scene=104&__biz=#biz#&mid=#mid#&idx=#idx#&voice_id=#voice_id#&sn=#sn##wechat_redirect".replace("#_wxindex_#",e.posIndex).replace("#biz#",o).replace("#mid#",a).replace("#idx#",s).replace("#voice_id#",e.voiceid).replace("#sn#",i.sn||"")}oe.log("[Voice] init"+n);var r=me.decodeStr(e.title);e.player=me.init({wxIndex:e.posIndex,type:2,songId:e.voiceid,comment_id:"",src:e.src,jsapi2Src:e.jsapi2Src,allowPause:!0,duration:e.duration,title:r,singer:window.nickname?window.nickname+"的语音":"公众号语音",epname:"来自文章",coverImgUrl:window.__appmsgCgiData.hd_head_img,playingCss:"share_audio_playing",playCssDom:go("voice_main_"+t),playArea:go("voice_play_"+t),progress:go("voice_progress_"+t),fileSize:e.fileSize,playtimeDom:go("voice_playtime_"+t),bufferDom:go("voice_buffer_"+t),playdotDom:go("voice_playdot_"+t),playpercent:go("voice_percent_"+t),playpercentDesc:go("voice_percent_desc_"+t),seekRange:go("voice_seekRange_"+t),seekContainer:go("voice_main_"+t),loadingDom:go("voice_loading_"+t),detailArea:n?go("voice_main_"+t):"",albumDom:go("voice_album_"+t),detailUrl:n,webUrl:n,speedList:[1,1.25,1.5,2],audioCardBody:go(`audio_card_bd_${t}`),ctrlArea:go(`audio_card_control_${t}`),fastBackBtn:go(`audio_fast_back_${t}`),fastForwardBtn:go(`audio_fast_forward_${t}`),doubleSpeedBtn:go(`audio_double_speed_${t}`),isAudio:!0,userName:window.user_name||"",articleCoverCdnUrl1_1:window.cdn_url_1_1,tingExtInfo:{bizuin:1*window.atob(window.biz)||0,appmsgid:1*window.mid||0,idx:1*window.idx||0,audio_id:e.voiceid||"",is_album_page:!1},albumInfo:{albumId:e.albumid||"",albumName:e.albumTitle||"",albumUrl:e.albumLink||""}})}(t),uo.musicList[t.voiceid+"_"+t.posIndex]=t}))}function go(e){return document.getElementById(e)}function ho(e){var t;!(t=go("js_content"))||(uo._oElements=t.getElementsByTagName("mpvoice")||[],uo._oElements.length<=0)||(uo.musicLen=uo._oElements.length,function(e){for(var t=0,n=0;n<uo.musicLen;n++){var i=uo._oElements[n],o={},a=i.getAttribute("voice_encode_fileid")||"";try{a=decodeURIComponent(a)}catch(s){}if(o.voiceid=me.encodeStr(a),o.voiceid=o.voiceid.replace(/&#61;/g,"=").replace(/^\s/,"").replace(/\s$/,""),o.isaac=1*i.getAttribute("isaac2")||0,o.src=uo.srcRoot.replace("#meidaid#",o.voiceid),1===o.isaac&&(o.jsapi2Src=o.src+"&voice_type=1"),o.voiceid&&"undefined"!=o.voiceid){if(o.albumLink="",e&&e.length>0&&e.forEach((e=>{if(e.voice_id===a)return e.appmsgalbuminfo&&(o.albumTitle=e.appmsgalbuminfo.title,o.albumLink=e.appmsgalbuminfo.link.replace("#wechat_redirect","")+"#wechat_redirect",o.albumNum=e.appmsgalbuminfo.tag_content_num||0,o.albumid=e.appmsgalbuminfo.album_id||0),!1})),wo(i,o,t),"undefined"!=typeof voiceid&&a&&voiceid&&a===voiceid){let e=i.offsetTop+122-40;setTimeout((()=>{window.scrollTo(0,e)}),0)}t++}}}(e))}const fo={tagName:"mppoi",isWechat:(N.isAndroid||N.isIOS)&&N.isWechat&&!N.isWxWork,screen_height:S.getInnerHeight(),commonReportData:{bizuin:1*d(window.biz),msgid:1*window.mid,itemidx:1*window.idx,sessionidnew:window.sessionid,enterid:1*window.enterid},poiDom:[]},yo=e=>{fo.isWechat?O.invoke("openLocation",{latitude:1*e.latitude,longitude:1*e.longitude,name:e.name,address:e.address,infoUrl:""},(function(e){-1!==e.err_msg.indexOf("ok")?U.setSum(110809,53,1):U.setSum(110809,54,1)})):new _e({msg:"请使用移动端微信打开。"})},bo=()=>{for(let e=0;e<fo.poiDom.length;e++){const t=fo.poiDom[e];if(1*t.getAttribute("data-hasreport")!=1){t.setAttribute("data-hasreport",1);const e=document.documentElement.scrollTop||document.body.scrollTop;t.clientHeight+t.offsetTop>=e+t.clientHeight/2&&t.clientHeight+t.offsetTop<=e+t.clientHeight/2+fo.screen_height&&("A"===t.tagName?(B.report(19937,Object.assign({},fo.commonReportData,{type:1,actiontype:1})),U.setSum(110809,58,1)):(B.report(19937,Object.assign({},fo.commonReportData,{type:2,actiontype:1})),U.setSum(110809,56,1)))}}},vo=(e={})=>{if(e.node&&e.data&&e.data.img){const t=function(e){let t=e.node,n=e.data;return function(){let e=document.createElement("div");e.innerHTML=q.tmpl('<div class="ct_geography_loc_card weapp_card app_context appmsg_card_context wx_tap_card" data-id="<#=data.id#>" data-latitude="<#=data.latitude#>" data-longitude="<#=data.longitude#>">\n  <div id="poi_name_<#=data.id#>" role="link" tabindex="0" aria-labelledby="poi_name_tips_<#=data.id#> poi_name_<#=data.id#> js_a11y_comma poi_addr_<#=data.id#>" class="location_title line-clamp1"><#=data.name#></div>\n  <div class="weui-hidden_abs" id="poi_name_tips_<#=data.id#>" aria-hidden="true">位置：</div>\n  <div id="poi_addr_<#=data.id#>" class="location_detail line-clamp1" aria-hidden="true"><#=data.address#></div>\n  <div class="location_img_wrp" style="background-image:url(<#=data.img#>);"></div>\n</div>',{data:n},!0).replace(/>\s*</g,"><").replace(/^\s+/,"").replace(/\s+$/,"");let i=e.firstChild;t.parentNode.insertBefore(i,t.nextSibling);let o=t.parentNode.querySelector('[data-preloadingid="'+n.id+'"]');o&&o.parentNode.removeChild(o),((e={})=>{const t=e.dom,n=e.poiInfo;j.on(t,"tap",(function(e){K.highlightEle(t),e.stopPropagation(),e.preventDefault(),B.report(19937,Object.assign({},fo.commonReportData,{type:2,actiontype:2})),U.setSum(110809,55,1),yo(n)}),!0),j.on(t,"click",(e=>{e.preventDefault(),e.stopPropagation()}),!0)})({dom:i,poiInfo:n}),fo.poiDom.push(i),bo()}}(e),n=function(){this.onload=null,this.onerror=null,t()};let i=new Image;i.onload=n,i.onerror=n,i.src=e.data.img}};const xo={tagName:"mpsearch",isWechat:(N.isAndroid||N.isIOS)&&N.isWechat&&!N.isWxWork,keywords:[],screen_height:S.getInnerHeight(),exposeHasReport:0,commonReportData:{BizUin:window.biz,MsgId:1*window.mid,ItemIdx:1*window.idx,SearchKeyWord:"",SessionId:window.sessionid,EnterId:1*window.enterid,Scene:1*window.source,SubScene:1*window.subscene}},ko=(e={})=>{j.on(e.dom,"click",(function(){let e=xo.keywords.map((e=>e.label)).join(";");if(B.report(19453,Object.assign({},xo.commonReportData,{SearchKeyWord:e,EventType:2})),U.setSum(110809,47,1),xo.isWechat){if(N.isIOS&&N.ltVersion("7.0.12")||N.isAndroid&&N.ltVersion("7.0.12"))return void new _e({msg:"当前微信版本不支持展示该内容，请升级至最新版本。"});const e=[];for(let t=0;t<xo.keywords.length;t++)e.push({hotword:xo.keywords[t].label,id:t,optype:1});O.invoke("openWXSearchPage",{query:"",thirdExtParam:JSON.stringify({data:[{items:e,title:window.nickname+"推荐搜索",type:4}],from:"mpWidget",bizUserName:window.user_name,bizNickName:window.nickname,id:`mpWidget_${xo.commonReportData.BizUin}:${xo.commonReportData.MsgId}:${xo.commonReportData.ItemIdx}`})},(function(e){-1!==e.err_msg.indexOf("ok")?U.setSum(110809,48,1):U.setSum(110809,49,1)}))}else new _e({msg:"请使用移动端微信打开。"})}));const t=()=>{if(!xo.exposeHasReport){xo.exposeHasReport=1;const t=document.documentElement.scrollTop||document.body.scrollTop;if(e.dom.clientHeight+e.dom.offsetTop>=t+e.dom.clientHeight/2&&e.dom.clientHeight+e.dom.offsetTop<=t+e.dom.clientHeight/2+xo.screen_height){let e=xo.keywords.map((e=>e.label)).join(";");B.report(19453,Object.assign({},xo.commonReportData,{SearchKeyWord:e,EventType:1})),U.setSum(110809,46,1)}}};j.on(window,"scroll",t),t()},Io=(e={})=>{if(e.node&&e.data&&e.data.keywords){(function(e){let t=e.node,n=e.data;return function(){let e=document.createElement("div");e.innerHTML=q.tmpl('<span class="appmsg_card_context wx_tap_card appmsg_search_card js_wx_tap_highlight">\n  \x3c!-- 搜索推荐 --\x3e\n  <span class="appmsg_search_hd weui-flex" id="js_appmsg_search_keywords_head" role="link" tabindex="0" aria-labelledby="js_appmsg_search_keywords_head" aria-describedby="appmsg_search_keywords_tips appmsg_search_keywords_keywords_list">\n    <img class="appmsg_search_avatar" src="<#==data.avatar#>" alt="">\n    <span class="weui-flex__item" role="option">\n      <span class="appmsg_search_nickname_wrp"><span id="appmsg_search_keywords_nickname" class="appmsg_search_nickname"><#==data.nickname#></span><span id="appmsg_search_keywords_title">推荐搜索</span></span>\n    </span>\n  </span>\n  <span class="appmsg_search_bd">\n    <span class="appmsg_search_keywords_area">\n      <span class="appmsg_search_keywords_hd">\n        <i class="weui-icon-search"></i>\n      </span>\n      <span class="weui-hidden_abs" aria-hidden="true" id="appmsg_search_keywords_tips">关键词列表：</span>\n      <span id="appmsg_search_keywords_keywords_list" aria-hidden="true" class="appmsg_search_keywords_list">\n        <# data.keywords.forEach(function (k, index) { #>\n        <span class="appmsg_search_keywords"><#=k.label#></span>\n        <# }); #>\n      </span>\n    </span>\n  </span>\n</span>',{data:n},!0).replace(/>\s*</g,"><").replace(/^\s+/,"").replace(/\s+$/,"");let i=e.firstChild;t.parentNode.insertBefore(i,t.nextSibling);let o=t.parentNode.querySelector('[data-preloadingid="mpsearch"]');o&&o.parentNode.removeChild(o),ko({dom:i,keywords:n.keywords})}})(e)()}};const Ao=e=>{const t=e+"";return t.length>=2?t:"0"+t},Eo=e=>{const t=new Date(1e3*e);return t.getFullYear()<=(new Date).getFullYear()?`${Ao(t.getMonth()+1)}月${Ao(t.getDate())}日 ${Ao(t.getHours())}:${Ao(t.getMinutes())}`:`${t.getFullYear()}年${Ao(t.getMonth()+1)}月${Ao(t.getDate())}日 ${Ao(t.getHours())}:${Ao(t.getMinutes())}`};var To=(e,t)=>{let n;switch(e=parseInt(e,10),t=parseInt(t,10),e){case 0:n=0===t?"预约":"已预约";break;case 1:n="已失效";break;case 2:n="观看";break;case 3:n="已结束";break;default:n="预约"}return n},jo=(e,t)=>{let n;switch(t=parseInt(t,10)){case 0:n=`将在${Eo(e)} 直播`;break;case 1:case 3:n=`${Eo(e)} 直播`;break;default:n="正在直播"}return n};var Co=(e,t,n,i)=>{let o=0;try{o=1*window.atob(window.biz)}catch(a){}B.report(22035,{BizUin:o,AppMsgID:window.parseInt(window.mid,10)||0,ItemIndex:window.parseInt(window.idx,10)||0,Scene:window.parseInt(window.scene,10)||0,Enterid:window.parseInt(window.enterid,10)||0,Action:e,Status:i||"",ActionTS:Math.ceil(Date.now()/1e3),Noticeid:t||"",Username:n||""})};var So=(e,t)=>{let n=0;try{n=1*window.atob(window.biz)}catch(i){}B.report(24980,{BizUin:n,AppMsgID:window.parseInt(window.mid,10)||0,ItemIndex:window.parseInt(window.idx,10)||0,Scene:window.parseInt(window.scene,10)||0,Enterid:window.parseInt(window.enterid,10)||0,Action:e,ActionTS:Math.ceil(Date.now()/1e3),EventId:t||""})};let Bo=[],Ro=[],No=[],qo=[],Po=[],Mo=[],Oo=1,zo=0;try{zo=1*window.atob(window.biz)}catch(es){}function Lo(){return!!P.os.pc&&(!(!N.isMac||!N.cpVersion("3.1.0",1,!0,"mac"))||!!(N.isWindows&&N.getWindows()>="63030000"))}function Wo(e,t,n){B.report(21146,{BizUin:zo,AppMsgID:window.parseInt(window.mid,10)||0,ItemIndex:window.parseInt(window.idx,10)||0,ExportId:t||"",Action:e,Username:n||"",Scene:window.parseInt(window.scene,10)||0,Subscene:window.parseInt(window.subscene,10)||0,EnterId:window.parseInt(window.enterid,10)||0})}function Do(e){"live"!==e&&"topic"!==e?("1"!==e&&0!==e||N.isInMiniProgram&&window.weui.alert("暂不支持从小程序进入视频号"),N.isAndroid&&window.clientversion>"2700135F"&&window.clientversion<"27001400"?window.weui.alert("当前版本暂不支持查看"):(N.isWechat&&P.os.pc?window.weui.alert("当前版本暂不支持查看，请在手机上查看"):N.isWechat&&!N.isWxWork||alert("请使用微信手机客户端打开"),!N.isWechat||P.os.pc||N.isWxWork||C.jumpUrl("https://support.weixin.qq.com/update/",!0))):N.isAndroid&&window.clientversion<"2700143c"||N.isIOS&&window.clientversion<"17001228"?window.weui.alert("请升级微信客户端版本后查看"):N.isWechat&&P.os.pc?window.weui.alert("当前版本暂不支持查看，请在手机上查看"):N.isInMiniProgram?window.weui.alert("暂不支持从小程序进入直播间"):N.isWechat&&!N.isWxWork||alert("请使用微信手机客户端打开")}function Ho(e){if(!N.isWechat||P.os.pc||N.isWxWork||N.isAndroid&&window.clientversion<"2700143c"||N.isIOS&&window.clientversion<"17001228")Do("profile");else{let t={action:"openFinderProfile",finderUserName:e,commentScene:5,reportExtraInfo:JSON.stringify({scenenote:{bizUin:zo,msgid:window.parseInt(window.mid,10)||0,idx:window.parseInt(window.idx,10)||0,scene:window.parseInt(window.scene,10)||0,enterid:window.parseInt(window.enterid,10)||0,action:5,status:Oo,actionTS:Math.ceil(Date.now()/1e3),url:window.msg_link}})};O.invoke("openFinderView",{extInfo:t},(e=>{console.log("openFinderView",e)}))}}function Uo(e,t){if(!N.isWechat||P.os.pc||N.isWxWork||N.isAndroid&&window.clientversion<"2700143c"||N.isIOS&&window.clientversion<"17001228"||window.is_teenager&&(window.weui.alert("青少年模式下，不支持观看直播"),1))if(Lo())if(t){let e=(window.location.protocol||"https:")+`//channels.weixin.qq.com/web/pages/live?eid=${t=encodeURIComponent(t)}`;O.invoke("openUrlWithExtraWebview",{url:e,openType:1},(e=>{console.log("openUrlWithExtraWebview",e)}))}else Do();else Do("live");else O.invoke("openFinderView",{extInfo:{action:"autoOpenFinderLive",finderUserName:e,commentScene:5,reportExtraInfo:JSON.stringify({scenenote:{bizUin:zo,msgid:window.parseInt(window.mid,10)||0,idx:window.parseInt(window.idx,10)||0,scene:window.parseInt(window.scene,10)||0,enterid:window.parseInt(window.enterid,10)||0,action:4,status:Oo,actionTS:Math.ceil(Date.now()/1e3),url:window.msg_link}})}},(e=>{console.log("openFinderLive",e)}))}function $o(e,t,n,i,o){if(Wo(2,e,n),!N.isWechat||P.os.pc||N.isWxWork||N.isIOS&&N.ltVersion("7.0.15",!1)||N.isAndroid&&window.clientversion<="27001337"||N.isAndroid&&window.clientversion>"2700135F"&&window.clientversion<"27001400")if(Lo())if(o){let e=(window.location.protocol||"https:")+`//channels.weixin.qq.com/web/pages/feed?eid=${o=encodeURIComponent(o)}`;O.invoke("openUrlWithExtraWebview",{url:e,openType:1},(e=>{console.log("openUrlWithExtraWebview",e)}))}else Do(i);else Wo(3,e,n),Do(i);else{let n={action:"openFinderFeed",feedID:e,nonceID:t,notGetReleatedList:9===i?"1":0,shareScene:11,requestScene:16,reportExtraInfo:JSON.stringify({mp:{scene:1},bizUin:zo,url:window.msg_link})};O.invoke("openFinderView",{extInfo:n},(e=>{console.log("openFinderDetailView",e)}))}}function Vo(e,t){!N.isWechat||P.os.pc||N.isWxWork||N.isAndroid&&window.clientversion<"28000130"||N.isIOS&&window.clientversion<"18000622"||window.is_teenager&&(window.weui.alert("青少年模式下，不支持观看直播"),1)?Do("topic"):O.invoke("openFinderTopicView",{extInfo:{title:e,topicType:7,eventEncryptedTopicId:t,entryScene:5}},(e=>{console.log("openFinderTopicView",e)}))}function Jo(e){return Ro.filter((t=>t.export_id===e))}function Fo(e){return No.filter((t=>t.notice_id===e))}function Xo(e){return qo.filter((t=>t.event_id===e))}function Go(e){let t=e.parentNode;if(t){let e,n=t.getAttribute("data-id"),i=Jo(n);i&&i.length>0&&(e=i[0]);let o=e&&e.nonce_id?e.nonce_id:t.getAttribute("data-nonceid"),a=e&&e.flag||0,s=e&&e.username?e.username:t.getAttribute("data-username"),r=e&&e.media_type?e.media_type:t.getAttribute("data-mediatype"),d=e&&e.export_id;0===a&&$o(n,o,s,r,d)}}function Ko(e){let t=e.parentNode;if(t){let e=t.getAttribute("data-eventid")||"event/UzFfAgtgekIEAQAAAAAA8PsgAc-cEgAAAAstQy6ubaLX4KHWvLEZgBPE8KNsXHhHYfj-zNPgMI5VOd7tKLpk98zswwl8bF9v",n=Xo(e),i=n.length>0?n[0]:{event_info:{}};0===i.event_info.flag?(Vo(i.event_info.name,e),So(2,e)):So(3,e)}}function Qo(e){let t=Fo(e);t&&t.length>0&&(t=t[0]);let n=t.status,i=t.reservation;return 0===n?0===i?1:2:1===n?5:2===n?3:3===n?4:1}function Yo(e,t,n){!N.isWxWork&&N.isWechat?window.is_teenager?window.weui.alert("青少年模式下，不支持预约直播"):R({url:"/mp/appmsg_video_snap?action=reserve_live",type:"POST",dataType:"json",async:!0,data:{username:e,notice_id:t,reserve_status:n},success:function(e){if(e&&e.base_resp&&0===e.base_resp.ret){let e=document.querySelectorAll(`.js_channel_btn_operation[data-noticeid="${t}"]`);for(let t=0;t<e.length;t++){let i=e[t];i.setAttribute("data-reservation",1===n?1:0),i.querySelector(".js_channel_btn_operation_wording").innerHTML=1===n?"已预约":"预约",1===n?T.addClass(i,"weui-btn_disabled"):T.removeClass(i,"weui-btn_disabled")}let i=Fo(t);i&&i.length>0&&i.forEach((e=>{e.reservation=1===n?1:0}))}else window.weui.alert("系统繁忙，请稍后再试")},error:function(){window.weui.alert("操作失败")}}):window.weui.alert("请在微信内操作")}function Zo(){if(Bo&&Bo.length&&Po.length===Bo.length)j.off(window,"scroll",Zo);else for(let e=0;e<Bo.length;e++){let t=Bo[e],n=t.firstChild;if(n&&n.getBoundingClientRect().top>0&&n.getBoundingClientRect().top+n.getBoundingClientRect().height/2<=S.getInnerHeight()){let e=t.getAttribute("data-id")||t.getAttribute("data-noticeid")||t.getAttribute("data-eventid"),n=t.getAttribute("data-username"),i=t.getAttribute("data-type");-1===Po.indexOf(e)&&(Po.push(e),"live"===i?Co(1,e,n,Qo(e)):"topic"===i?So(1,Qo(e)):Wo(1,e,n))}}}function ea(e,t,n,i){let o=document.querySelectorAll(`.js_wechannel_live_card[data-noticeid="${e}"]`);for(let a=0;a<o.length;a++){let s=o[a],r=s.querySelector(`.js_channel_btn_operation[data-noticeid="${e}"]`),d=To(t,n),c=jo(i,t);r&&(r.querySelector(".js_channel_btn_operation_wording").innerHTML=d,r.setAttribute("data-reservation",n),r.setAttribute("data-status",t),s.querySelector(".js_wechannel_live_desc").innerHTML=c,0!==t&&2!==t||0!==n?T.addClass(r,"weui-btn_disabled"):T.removeClass(r,"weui-btn_disabled"),r.querySelector(".js_wechannnel_live").style.display=2===t?"block":"none")}}function ta(){j.bindVisibilityChangeEvt((e=>{e&&function(){let e={__biz:window.biz||"",mid:window.mid||"",idx:window.idx||"",uin:window.uin||"",key:window.key||"",pass_ticket:window.pass_ticket||"",video_snap_num:No.length};for(let n=0;n<No.length;n++){let t=No[n].notice_id,i=No[n].username;e[`notice_id_${n}`]=t,e[`username_${n}`]=i}let t="/mp/appmsg_video_snap?action=batch_get_flag_info";for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t+="&"+n+"="+encodeURIComponent(e[n]));R({url:t,type:"GET",dataType:"json",async:!0,success:function(e){if(e&&e.base_resp&&0===e.base_resp.ret&&e.live_info&&e.live_info.length>0)for(let t=0;t<e.live_info.length;t++){let n=e.live_info[t],i=Fo(n.notice_id);if(i&&i.length>0){let e=i[0];n.status===e.status&&n.reservation===e.reservation||(e.reservation=n.reservation,e.status=n.status,ea(n.notice_id,n.status,n.reservation,e.start_time))}}},error:function(){}})}()}))}function na(){!function(){let e=document.getElementsByClassName("js_wechannel_img_card");for(let t=0;t<e.length;t++){let n=e[t];j.on(n,"click",(()=>{K.highlightEle(n),Go(n)}))}}(),function(){let e=document.getElementsByClassName("js_wechannel_video_card");for(let t=0;t<e.length;t++){let n=e[t];j.on(n,"click",(()=>{K.highlightEle(n),Go(n)}))}}(),function(){let e=document.getElementsByClassName("js_channel_btn_operation"),t=e=>{let t=e.currentTarget,n=t.getAttribute("data-noticeid"),i=t.getAttribute("data-username"),o="";return No instanceof Array&&No.forEach((e=>{e.notice_id===n&&(o=e.export_id)})),Co(4,n,i,Qo(n)),Oo=Qo(n),Uo(i,o),!1};for(let n=0;n<e.length;n++){let i=e[n],o=parseInt(i.getAttribute("data-status"),10);2===o?j.on(i,"click",t):0===o&&j.on(i,"click",(()=>{if(K.highlightEle(i),window.is_temp_url)return window.weui.alert("预览状态下无法操作"),!1;let e=i.getAttribute("data-noticeid"),t=i.getAttribute("data-reservation"),n=i.getAttribute("data-username");return Co("0"===t?2:3,e,n,Qo(e)),Yo(n,e,"0"===t?1:2),!1}))}}(),function(){let e=document.getElementsByClassName("js_wechannel_live_card");const t=e=>{let t=e.currentTarget,n=t.getAttribute("data-username"),i=t.getAttribute("data-noticeid");Co(5,i,n,Qo(i)),Oo=Qo(i),K.highlightEle(t),Ho(n)};for(let n=0;n<e.length;n++){let i=e[n];j.on(i,"click",t)}}(),function(){let e=document.getElementsByClassName("js_wechannel_topic_card");for(let t=0;t<e.length;t++){let n=e[t];j.on(n,"click",(()=>{K.highlightEle(n),Ko(n)}))}}(),ta(),j.on(window,"scroll",Zo)}function ia(e,t){if(t){if(t.isSaveEnter)return e.replace(/\n/g,"<br>");if(t.isDecodeEnter)return e.replace(/&lt;br&gt;/g,"<br>")}return e}function oa(){let e=document.getElementById("js_content");if(e){Bo=e.getElementsByTagName("mpvideosnap")||[];for(let e=0;e<Bo.length;e++){let t,n=Bo[e],i=n.getAttribute("data-id")||n.getAttribute("data-noticeid")||"",o=n.getAttribute("data-type")||"video";if("live"===o){let e=Fo(n.getAttribute("data-noticeid")||""),i=e.length>0?e[0]:{};t={snapType:"live",headImgUrl:i.head_url||n.getAttribute("data-headimgurl")||"",nickname:i.nickname||n.getAttribute("data-nickname")||"",desc:jo(i.start_time,i.status)||n.getAttribute("data-desc")||"",reservation:i.reservation||0,status:i.status||0,username:i.username||n.getAttribute("data-username")||"",noticeid:i.notice_id||n.getAttribute("data-noticeid")||"",liveWording:To(i.status||0,i.reservation||0),flag:1===i.spam_flag||2===i.spam_flag?1:0,intro:ia(i.introduction||"",{isSaveEnter:!0})},Mo.push({noticeid:i.notice_id||n.getAttribute("data-noticeid")||"",status:i.status||0})}else if("video"===o||"image"===o){let e=Jo(i),o=e.length>0?e[0]:{},a=4===o.media_type||9===o.media_type?"video":"image";t={snapType:o&&o.media_type?a:n.getAttribute("data-type"),url:o.feed_cover_url||o.feed_thumb_url||n.getAttribute("data-url")||"",headImgUrl:o.head_url||n.getAttribute("data-headimgurl")||"",nickname:o.nickname||n.getAttribute("data-nickname")||"",desc:o.feed_desc||n.getAttribute("data-desc")||"",flag:o.flag||0},"image"===t.snapType&&(t=Object.assign(t,{imgCount:parseInt(o.media_num||"0",10)||parseInt(n.getAttribute("data-imgcount")||"0",10)||0}))}else if("topic"===o){let e=Xo(n.getAttribute("data-eventid")||"event/UzFfAgtgekIEAQAAAAAA8PsgAc-cEgAAAAstQy6ubaLX4KHWvLEZgBPE8KNsXHhHYfj-zNPgMI5VOd7tKLpk98zswwl8bF9v"),i=e.length>0?e[0]:{event_info:{}},o=p.unix(i.event_info.end_time).format("YYYY年MM月DD日 HH:mm");t={snapType:"topic",headImgUrl:i.event_info.head_url,nickname:i.event_info.nickname,desc:i.event_info.desc,flag:i.event_info.flag,endTime:o,closeFlag:i.event_info.close_flag,title:i.event_info.name}}const a=document.createElement("div");let s=q.tmpl('<# if(snapType === \'video\'){ #>\n<div role="link" tabindex="0" class="wxw_wechannel_card appmsg_card_context js_wechannel_video_card js_wechannel_video_context">\n  <div role="option" class="wxw_wechannel_card_bd">\n    <div aria-label="视频号，" class="wxw_wechannel_video_context" style="background-image:url(<#=url#>)">\n      <i class="weui-play-btn_primary"></i>\n    </div>\n    <div class="wxw_wechannel_profile weui-flex">\n      <# if(headImgUrl){ #>\n      <img alt="" class="wxw_wechannel_avatar" src="<#=headImgUrl#>" data-disable-preview="1">\n      <# }else{ #>\n      <img class="wxw_wechannel_avatar" src="http://mmbiz.qpic.cn/mmbiz/a5icZrUmbV8p5jb6RZ8aYfjfS2AVle8URwBt8QIu6XbGewB9wiaWYWkPwq4R7pfdsFibuLkic16UcxDSNYtB8HnC1Q/0" data-disable-preview="1">\n      <# } #>\n      <strong class="wxw_wechannel_nickname"><#=nickname#></strong>\n      <span class="weui-hidden_abs">，</span>\n    </div>\n    <# if(desc){ #>\n    <div class="wxw_wechannel_desc">\n      <#=desc#>\n    </div>\n    <# } #>\n    \x3c!-- 不可引用时show出来即可 --\x3e\n    <# if(flag === 1){ #>\n    <div class="wxw_wechannel_msg">\n      该视频号动态已删除\n    </div>\n    <# } else if (flag === 2) { #>\n      <div class="wxw_wechannel_msg">\n        无法浏览该视频号动态\n      </div>\n    <# } else if (flag === 3) { #>\n      <div class="wxw_wechannel_msg">\n        无法浏览该视频号动态\n      </div>\n    <# } #>\n  </div>\n  <div class="wxw_wechannel_card_ft weui-flex" aria-hidden="true">\n    <i class="wxw_wechannel_logo"></i>视频号\n  </div>\n</div>\n<# } else if (snapType === \'image\'){  #>\n<div role="link" tabindex="0" class="wxw_wechannel_card appmsg_card_context js_wechannel_img_card js_wechannel_img_context">\n  <div role="option" class="wxw_wechannel_card_bd">\n    <div aria-label="视频号，" class="wxw_wechannel_img_context">\n        <ul class="wxw_wechannel_img_list js_wechannel_img_list" id="js_wechannel_img_list" data-poster-src="<#=url#>" data-disable-preview="1">\n            <li class="wxw_wechannel_img js_wechannel_img" data-w="1000" data-ratio="1" style="background-image:url(<#=url#>)" data-disable-preview="1"></li>\n        </ul>\n        <ul class="wxw_wechannel_img_navs js_wechannel_img_navs">\n          <# for(var i = 0; i < imgCount; i++){ #>\n            <li class="wxw_wechannel_img_nav <# if(i === 0){ #>  wxw_wechannel_img_nav_current <# } #> "></li>\n          <# } #>\n        </ul>\n    </div>\n    <div class="wxw_wechannel_profile weui-flex">\n      <# if(headImgUrl){ #>\n        <img alt="" class="wxw_wechannel_avatar" src="<#=headImgUrl#>" data-disable-preview="1">\n        <# }else{ #>\n        <img alt="" class="wxw_wechannel_avatar" src="http://mmbiz.qpic.cn/mmbiz/a5icZrUmbV8p5jb6RZ8aYfjfS2AVle8URwBt8QIu6XbGewB9wiaWYWkPwq4R7pfdsFibuLkic16UcxDSNYtB8HnC1Q/0" data-disable-preview="1">\n        <# } #>\n      <strong class="wxw_wechannel_nickname"><#=nickname#></strong>\n      <span class="weui-hidden_abs">，</span>\n    </div>\n    <# if(desc){ #>\n    <div class="wxw_wechannel_desc">\n      <#=desc#>\n    </div>\n    <# } #>\n    <# if(flag === 1){ #>\n      <div class="wxw_wechannel_msg">\n        该视频号动态已删除\n      </div>\n    <# } else if (flag === 2) { #>\n      <div class="wxw_wechannel_msg">\n        无法浏览该视频号动态\n      </div>\n    <# } else if (flag === 3) { #>\n      <div class="wxw_wechannel_msg">\n        无法浏览该视频号动态\n      </div>\n    <# } #>\n  </div>\n  <div class="wxw_wechannel_card_ft weui-flex" aria-hidden="true">\n    <i class="wxw_wechannel_logo"></i>视频号\n  </div>\n</div>\n<# } else if (snapType === \'live\') { #>\n<div class="wxw_wechannel_card appmsg_card_context wxw_wechannel_card_live js_wechannel_live_card" data-noticeid="<#=noticeid#>" data-username="<#=username#>">\n  <div class="wxw_wechannel_card_bd">\n    <div class="wxw_wechannel_live_context">\n      <div class="weui-flex wxw_wechannel_live_overview">\n        <div class="wxw_wechannel_live_hd">\n          <img class="wxw_wechannel_live_avatar" src="<#=headImgUrl#>" alt="">\n        </div>\n        <div class="wxw_wechannel_live_bd weui-flex__item">\n          <strong class="wxw_wechannel_live_nickname"><#=nickname#></strong>\n          <div class="wxw_wechannel_live_desc js_wechannel_live_desc"><#=desc#></div>\n        </div>\n        <div class="wxw_wechannel_live_ft js_wechannel_operation_area">\n          <button class="weui-btn weui-btn_mini wxw_wechannel_live_btn js_channel_btn_operation <# if((status !== 0 && status !== 2)|| reservation === 1){ #>weui-btn_disabled<# } #>" data-reservation="<#=reservation#>" data-noticeid="<#=noticeid#>" data-username="<#=username#>" data-status="<#=status#>" type="button">\n            <i class="icon_wxw_wechannel_live js_wechannnel_live" <#if (status !== 2){ #> style="display:none" <# } #>></i>\n            <span class="js_channel_btn_operation_wording"><#=liveWording#></span>\n          </button>\n        </div>\n      </div>\n      <div class="wxw_wechannel_live_tips"><#=intro#></div>\n    </div>\n    <# if (flag === 1) { #>\n      <div class="wxw_wechannel_msg">\n        无法浏览该视频号动态\n      </div>\n    <# } else if (flag === 2) { #>\n      <div class="wxw_wechannel_msg">\n        无法浏览该视频号动态\n      </div>\n    <# } else if (flag === 3) { #>\n      <div class="wxw_wechannel_msg">\n        无法浏览该视频号动态\n      </div>\n    <# } #>\n  </div>\n  <div class="wxw_wechannel_card_ft weui-flex" id="wxw_wechannel_logo_<#=noticeid#>" aria-hidden="true">\n    <i class="wxw_wechannel_logo"></i>视频号\n  </div>\n</div>\n<# } else if (snapType === \'topic\') { #>\n<div class="wxw_wechannel_card appmsg_card_context wxw_wechannel_card_topic js_wechannel_topic_card js_wx_tap_highlight wx_tap_card">\n  <div class="wxw_wechannel_card_bd">\n    <div class="wxw_wechannel_topic_context">\n      <div class="weui-flex weui-flex_align-center wxw_wechannel_topic_profile">\n        <div class="wxw_wechannel_topic_hd">\n          <img class="wxw_wechannel_topic_avatar" src="<#=headImgUrl#>" alt="">\n        </div>\n        <div class="wxw_wechannel_topic_bd weui-flex__item">\n          <strong class="wxw_wechannel_topic_nickname"><#=nickname#></strong>\n        </div>\n      </div>\n      <div class="weui-flex weui-flex_align-center">\n        <div class="wxw_wechannel_topic_bd weui-flex__item">\n          <strong class="wxw_wechannel_topic_name"><#=title#></strong>\n        </div>\n        <div class="wxw_wechannel_topic_ft js_wechannel_operation_area">\n          <button class="weui-btn weui-btn_mini wxw_wechannel_topic_btn" <# if(closeFlag){ #>disabled<# } #> type="button"><# if(closeFlag){ #>已结束<# } else { #>参与<# } #></button>\n        </div>\n      </div>\n      <div class="wxw_wechannel_topic_tips"><#=desc#></div>\n      <div class="wxw_wechannel_topic_tips">结束时间：<#=endTime#></div>\n    </div>\n    <# if (flag === 3) { #>\n      <div class="wxw_wechannel_msg">\n        无法浏览该视频号动态\n      </div>\n    <# } else if (flag !== 0) { #>\n      <div class="wxw_wechannel_msg">\n        此视频号活动因违规无法查看\n      </div>\n    <# } #>\n    <# if (flag === 3453464560) { #>\n      <div class="wxw_wechannel_msg">\n        <span role="img" aria-label="加载中" class="weui-primary-loading">\n          <span class="weui-primary-loading__dot"></span>\n        </span>\n      </div>\n    <# } #>\n  </div>\n  <div class="wxw_wechannel_card_ft weui-flex" id="wxw_wechannel_logo_<#=noticeid#>" aria-hidden="true">\n    <i class="wxw_wechannel_logo"></i>视频号<span class="wxw_wechannel_logo_tail">活动</span>\n  </div>\n</div>\n<# } #>',t,!0);a.innerHTML=ia(s,{isDecodeEnter:!0}),a.firstElementChild&&n.appendChild(a.firstElementChild);let r=document.querySelector(`[data-preloadingid="${i}"]`);r&&n.parentNode.removeChild(r)}Zo(),na()}}function aa(){!function(){let e=[];try{e=JSON.parse(window.video_snap_json).list}catch(es){console.log(es)}let t={},n={__biz:window.biz||"",mid:window.mid||"",idx:window.idx||"",uin:window.uin||"",key:window.key||"",pass_ticket:window.pass_ticket||""};for(let i=0;i<e.length;i++){let o=e[i].export_id||e[i].notice_id||e[i].event_id,a=e[i].username;t[o]?t[o].push(i):(t[o]=[i],e[i].export_id?n[`exportid_${i}`]=o:e[i].notice_id?n[`notice_id_${i}`]=o:e[i].event_id&&(n[`export_event_id_${i}`]=o),n[`username_${i}`]=a)}n.video_snap_num=Object.keys(t).length,R({url:"/mp/appmsg_video_snap?action=batch_get_video_snap",type:"POST",dataType:"json",async:!0,data:n,success:function(e){e&&e.base_resp&&0===e.base_resp.ret&&(Ro=e.video_snap_info||[],No=e.live_info||[],qo=e.event_info||[]),oa()},error:function(){oa()}})}()}let sa={pvele:[],checkInScreenId:null,reportRandom:Math.random()};function ra(){if(console.log("weproduct init"),"function"!=typeof document.getElementsByClassName)return;let e=document.getElementsByClassName("js_product_container");e&&e.length>0&&(!function(e){try{for(let t=0,n=e.length;t<n;t++){let n=e[t];if(n.className.indexOf("js_list_container")>=0){let e=n.querySelector("img.js_cover");if(e){let t=e.parentNode.getBoundingClientRect();e.style.setProperty("width",t.width+"px","important"),e.style.setProperty("height",t.height+"px","important"),e.style.setProperty("background-size","unset","important"),"0"==e.getAttribute("data-fail")?da.call(e):e.getAttribute("data-fail")||(e.lazyLoadOnload=e.lazyLoadOnload||[],e.lazyLoadOnload.push(da))}}}}catch(es){}}(e),m.getAppidInfo({onSuccess:function(t){sa.data=t.data,function(e){for(let n=0,i=e.length;n<i;n++)!function(e,t){j.on(e,"tap",".js_product_loop_content",(function(e){let n=e.delegatedTarget,i=n.getAttribute("data-wxaappid"),o=n.getAttribute("data-wxapath"),a=n.getAttribute("data-pid"),s=n.getAttribute("data-appid"),r=n.querySelector(".cps_inner_info_title").innerHTML;return n&&K.highlightEle(n),m.jumpUrl({privateExtraData:{cookies:"cps_package=123456; expires=1538286412; busid=mmbiz_ad_cps; domain=*"},sourceAppId:s,appid:i,path:o,scene:1091,sceneNote:[encodeURIComponent(location.href),user_name,msg_title,encodeURIComponent(a),r,o].join(":"),beforeNonWechatWarn:function(){},beforeJumpBackupPage:function(){},onJsapiCallback:function(e){if("openWeApp:ok"===e.err_msg&&a){let e=2;2==n.getAttribute("data-pidtype")&&(e=4),la([{wxa_appid:i,pid:a,type:e,absolute_order:t+1,appid:n.getAttribute("data-appid")||"",templateid:n.getAttribute("data-templateid")||"",relative_order:1*n.getAttribute("data-order"),packid:n.getAttribute("data-packid")||""}])}}}),!1}))}(e[n],n);let t=document.getElementsByClassName("js_product_loop_content");if(t&&t.length>0&&S.getInnerHeight()){for(let e=0;e<t.length;e++)sa.pvele.push(t[e]);ca(),j.on(window,"scroll",ca)}}(e)}})),setTimeout((function(){let e=document.getElementsByClassName("js_product_loop_content").length,t=document.getElementsByClassName("js_product_err_container").length;U.setSum("64469","15",e+t),U.setSum("64469","16",e),U.setSum("64469","18",t)}),0)}function da(){let e=this.parentNode;if(!e)return;let t=document.createElement("span");t.className=this.className,t.style.background='url("'+this.src+'") no-repeat center',e.insertBefore(t,this),e.removeChild(this)}function ca(e){sa.checkInScreenId&&clearTimeout(sa.checkInScreenId),sa.checkInScreenId=setTimeout((function(){sa.checkInScreenId=null;let e=[];for(let t=0;t<sa.pvele.length;t++){let n=sa.pvele[t],i=n.getBoundingClientRect();if((i.height||i.bottom-i.top)>0&&i.top<S.getInnerHeight()&&i.bottom>0){let i=n.getAttribute("data-pid");if(i){let o=1;2==n.getAttribute("data-pidtype")&&(o=3),e.push({wxa_appid:n.getAttribute("data-wxaappid"),pid:i,type:o,absolute_order:t+1,appid:n.getAttribute("data-appid")||"",templateid:n.getAttribute("data-templateid")||"",relative_order:1*n.getAttribute("data-order"),packid:n.getAttribute("data-packid")||""})}sa.pvele.splice(t--,1)}}la(e),0==sa.pvele.length&&(j.off(window,"scroll",ca),ca=null)}),100)}function la(e){if(!e||0==e.length)return;let t={batch_no:z.getQuery("batch_no")||"",bizuin:window.biz||"",biz:window.biz||"",mid:window.mid||"",idx:window.idx||"",total:e.length};for(let n=0;n<e.length;n++){let i=e[n],o=n+1;for(let e in i)i.hasOwnProperty(e)&&(t[e+""+o]=i[e])}R({url:"/mp/productreport?",type:"POST",data:t,dataType:"json",async:!0})}const pa=window.location.protocol+"//support.weixin.qq.com/update/";let _a=[],ma=1,ua=z.getQuery("fontScale");function wa(e){ua=e.fontScale,setTimeout((()=>{let e=document.getElementsByTagName("wx-open-subscribe")||[];for(let t=0;t<e.length;t++)e[t].setAttribute("size",ma),e[t].setAttribute("scale",ua),ma++}),50)}function ga(){if(document.getElementById("js_content")){_a=document.getElementsByTagName("mpsubscribe")||[];for(let e=0;e<_a.length;e++){let t=_a[e],n=t.getAttribute("data-templateidlist")||[],i=t.getAttribute("data-index")||0;const o=document.createElement("div");o.innerHTML=q.tmpl('<#if(supportWxOpen){#>\n<wx-open-subscribe template="<#=templateIdList#>" scene="<#=scene#>" username="<#=username#>" scale="<#=scale#>" appmsgindex="<#=appmsgIndex#>"> \n  <template slot="style">\n    <style>\n    .reset_btn{\n      -webkit-appearance: none;\n      -webkit-tap-highlight-color:rgba(0,0,0,0);\n      outline: 0;\n      background-color: transparent;\n      border: 0;\n      font-family:inherit;\n      display: inline-block;\n      vertical-align: middle;\n    }\n    .subsc_btn {\n      font-size:inherit;\n      display: -ms-flexbox;\n      display: flex;\n      -ms-flex-align: center;\n      align-items: center;\n      padding: 0;\n      margin: 0;\n      color: #576b95;\n    }\n    .icon_subsc {\n      display: -ms-flexbox;\n      display: flex;\n      width: 20px;\n      height: 20px;\n      -ms-flex-align: center;\n      align-items: center;\n      -ms-flex-pack: center;\n      justify-content: center;\n      margin-right: 4px;\n      box-sizing: border-box;\n      border-radius: 100%;\n      box-shadow: 0 0 3px 0 rgba(0, 0, 0, 0.1);\n    }\n    .icon_subsc:before {\n      content: "";\n      display: inline-block;\n      vertical-align: middle;\n      width: 14px;\n      height: 14px;\n      -webkit-mask: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'14\' height=\'14\' viewBox=\'0 0 14 14\'%3E  %3Cpath fill=\'%23576B95\' d=\'M7 1.167a1.167 1.167 0 0 1 1.15 1.36 3.501 3.501 0 0 1 2.35 3.306v2.334c0 .857.315 1.714.945 2.571a.583.583 0 0 1-.47.929H7.582v.116a.583.583 0 0 1-1.166 0v-.116H3.025a.583.583 0 0 1-.47-.929c.63-.857.944-1.714.944-2.571V5.833c0-1.53.982-2.83 2.35-3.306A1.167 1.167 0 0 1 7 1.167zm0 1a.167.167 0 0 0-.167.166l.003.03.139.831-.797.277a2.501 2.501 0 0 0-1.672 2.185l-.006.177v2.334c0 .833-.23 1.653-.678 2.45l-.029.049h6.413l-.028-.048c-.403-.719-.63-1.454-.671-2.202l-.007-.25V5.834a2.5 2.5 0 0 0-1.515-2.298l-.163-.064-.797-.277.14-.832A.167.167 0 0 0 7 2.166z\'/%3E%3C/svg%3E") no-repeat 50% 50%;\n      mask: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'14\' height=\'14\' viewBox=\'0 0 14 14\'%3E  %3Cpath fill=\'%23576B95\' d=\'M7 1.167a1.167 1.167 0 0 1 1.15 1.36 3.501 3.501 0 0 1 2.35 3.306v2.334c0 .857.315 1.714.945 2.571a.583.583 0 0 1-.47.929H7.582v.116a.583.583 0 0 1-1.166 0v-.116H3.025a.583.583 0 0 1-.47-.929c.63-.857.944-1.714.944-2.571V5.833c0-1.53.982-2.83 2.35-3.306A1.167 1.167 0 0 1 7 1.167zm0 1a.167.167 0 0 0-.167.166l.003.03.139.831-.797.277a2.501 2.501 0 0 0-1.672 2.185l-.006.177v2.334c0 .833-.23 1.653-.678 2.45l-.029.049h6.413l-.028-.048c-.403-.719-.63-1.454-.671-2.202l-.007-.25V5.834a2.5 2.5 0 0 0-1.515-2.298l-.163-.064-.797-.277.14-.832A.167.167 0 0 0 7 2.166z\'/%3E%3C/svg%3E") no-repeat 50% 50%;\n      -webkit-mask-size: cover;\n      mask-size: cover;\n      background-color: currentColor;\n    }\n    @media (prefers-color-scheme: dark) {\n      .subsc_btn {\n        color: #7d90a9;\n      }\n      .icon_subsc {\n        box-shadow: 0 0 3px 0 rgba(255, 255, 255, 0.1);\n      }\n    }\n    </style>\n  </template>\n  <template>\n    <div class="subsc_context">\n      <button class="subsc_btn reset_btn" type="button"><i class="icon_subsc"></i>订阅通知</button>\n    </div>\n  </template>\n</wx-open-subscribe>\n<#}else{#>\n  <div class="subsc_context js_subsc_btn">\n    <button class="subsc_btn reset_btn" type="button"><i class="icon_subsc"></i>订阅通知</button>\n  </div>\n<#}#>',{templateIdList:n,username:window.user_name,scene:window.is_temp_url?3:2,scale:ua,supportWxOpen:window.__is_support_wxOpen,appmsgIndex:i}),o.firstElementChild&&t.appendChild(o.firstElementChild)}re(wa),function(){let e=document.getElementsByClassName("js_subsc_btn")||[];for(let t=0;t<e.length;t++){let n=e[t];j.on(n,"click",(()=>{window.uin&&window.key&&N.isWechat&&!N.isWindowsWechat&&!N.isMacWechat?document.getElementById("js_update_dialog").style.display="block":window.weui.alert("请在手机微信内操作")}))}j.on(document.getElementById("js_update_cancel"),"click",(()=>{document.getElementById("js_update_dialog").style.display="none"})),j.on(document.getElementById("js_update_confirm"),"click",(()=>{C.jumpUrl(pa,!0)}))}()}}function ha(){if(!networkType)return;let e=window.performance||window.msPerformance||window.webkitPerformance;if(!e||void 0===e.getEntries)return;let t,n=document.getElementsByTagName("img"),i=n.length;function o(e){let t=[];for(let n in e)t.push(n+"="+encodeURIComponent(e[n]||""));return t.join("&")}let a,s=navigator.userAgent,r=!1;/micromessenger\/(\d+\.\d+)/i.test(s),a=RegExp.$1;for(let d=0,c=n.length;d<c;d++){if(t=parseInt(100*Math.random()),t>100)continue;let s=n[d].getAttribute("src");if(!s||s.indexOf("mp.weixin.qq.com")>=0)continue;let c,l=e.getEntries();for(let e=0;e<l.length;e++)if(c=l[e],c.name==s){let e=n[d].getAttribute("data-fail");R({type:"POST",url:"/mp/appmsgpicreport?__biz="+biz+"#wechat_redirect",data:o({rnd:Math.random(),uin:uin,version:version,client_version:a,device:navigator.userAgent,time_stamp:parseInt(+new Date/1e3),url:s,img_size:n[d].fileSize||0,user_agent:navigator.userAgent,net_type:networkType,appmsg_id:window.appmsgid||"",sample:i>100?100:i,delay_time:parseInt(c.duration),from:window.isSg?"sougou":"",fail:e})}),r=!0;break}if(r)break}}let fa={"network_type:fail":"fail","network_type:edge":"2g/3g","network_type:wwan":"2g/3g","network_type:wifi":"wifi"};let ya=[],ba=[];function va(e){try{return 1*window.atob(e)}catch(es){}return 0}function xa(e,t,n,i){B.report(22316,{BizUin:va(window.biz),AppMsgID:window.parseInt(window.mid,10)||0,ItemIndex:window.parseInt(window.idx,10)||0,Itemshowtype:0,SessionId:window.sessionid+"",EnterId:window.parseInt(window.enterid,10)||0,Scene:1*window.source,Subscene:1*window.subscene,ActionType:e,toBizuin:va(t),isBizBan:1*n,isMassSend:1*window.appmsg_type,CardType:i})}function ka(){if(ya&&ya.length&&ba.length===ya.length)j.off(window,"scroll",ka);else for(let e=0;e<ya.length;e++){let t=ya[e],n=t.querySelector(".js_wx_profile_card");if(n&&n.getBoundingClientRect().top>0&&n.getBoundingClientRect().top+n.getBoundingClientRect().height/2<=S.getInnerHeight()){let e=n.getAttribute("data-id"),i=n.getAttribute("data-index");if(-1===ba.indexOf(i)){ba.push(i),xa(0,e,n.getAttribute("data-isban"),1*t.getAttribute("data-from"))}}}}function Ia(e,t,n,i,o){e.addEventListener("click",(()=>{if(xa(1,n,i,o),i){let e=document.getElementById("js_profile_ban");"none"===e.style.display&&(e.style.display="block",setTimeout((()=>{e.style.display="none"}),2e3))}else!N.isWechat||N.isWxWork?window.weui.alert("请在微信内打开"):C.goProfile({biz:n,scene:124},{username:t,scene:"200"})}))}function Aa(){!function(){if(!document.getElementById("js_content"))return;ya=document.getElementsByTagName("mpprofile")||[];let e=window.mp_profile;for(let n=0;n<ya.length;n++){let t=ya[n],i=t.getAttribute("data-id"),o=1*t.getAttribute("data-from"),a=e[n],s=document.querySelector(`[data-preloadingid="${i}"]`);s&&t.parentNode.removeChild(s),a?(t.innerHTML=q.tmpl('<div class="appmsg_card_context wx_profile_card js_wx_profile_card js_wx_tap_highlight wx_tap_card" data-id="<#=id#>" data-isban="<#=isban#>" data-index="<#=index#>" \n  role="link" tabindex="0"\n  aria-labelledby="js_wx_profile_nickname js_a11y_comma js_wx_profile_signature js_a11y_comma js_profile_desc js_a11y_comma js_wx_profile_logo"\n  >\n  <div class="wx_profile_card_bd" aria-hidden="true">\n    <div class="wx_profile weui-flex">\n      <div class="wx_profile_hd">\n        <# if(round_head_img) { #>\n        <img class="wx_profile_avatar" src="<#=round_head_img#>" alt="">\n        <# } else {#>\n        <img class="wx_profile_avatar" src="http://mmbiz.qpic.cn/mmbiz/a5icZrUmbV8p5jb6RZ8aYfjfS2AVle8URwBt8QIu6XbGewB9wiaWYWkPwq4R7pfdsFibuLkic16UcxDSNYtB8HnC1Q/0" alt="">\n        <# } #>\n      </div>\n      <div class="wx_profile_bd weui-flex weui-flex__item">\n        <div class="weui-flex__item">\n          <strong class="wx_profile_nickname" id="js_wx_profile_nickname">\n              <#  if(nickname) { #>\n                <#=nickname#>\n\n              <# } else { #>\n                <#=alias#>\n              <#}#>\n          </strong>\n          <div class="wx_profile_desc" id="js_wx_profile_signature"><#=signature#></div>\n          <div class="wx_profile_tips" id="js_profile_desc">\n            <span class="wx_profile_tips_meta" id="js_profile_article" <#if (original_num === 0){ #> style="display:none" <# } #>><#=original_num#>篇原创内容</span>\n            \x3c!-- <span class="wx_profile_tips_meta" id="js_profile_friends"></span> --\x3e\n          </div>\n        </div>\n        <i class="weui-icon-arrow"></i>\n      </div>\n    </div>\n  </div>\n  <div class="wx_profile_card_ft" aria-hidden="true" id="js_wx_profile_logo">公众号</div>\n</div>',{index:n,id:a.fakeid,round_head_img:a.round_head_img,nickname:a.nickname.htmlDecode(),alias:a.alias.htmlDecode(),signature:a.signature.htmlDecode(),original_num:a.original_num,isban:a.is_biz_ban}),Ia(t,a.username,a.fakeid,a.is_biz_ban,o)):t.innerHTML=""}ka();let t=document.createElement("div");t.innerHTML=q.tmpl('<div id="js_profile_ban" style="display: none;">\n  <div class="weui-mask_transparent"></div>\n  <div class="weui-toast">\n    <i class="weui-icon-warn weui-icon_toast"></i>\n    <p class="weui-toast__content">该账号因违规无法跳转</p>\n  </div>\n</div>',{}),document.body.appendChild(t)}(),j.on(window,"scroll",ka)}function Ea(){window.addEventListener&&window.addEventListener("load",(function(){window.__moonsafe_mutation_report_keys||(window.__moonsafe_mutation_report_keys={});let e=window.moon&&moon.moonsafe_id||29715,t=window.moon&&moon.moonsafe_key||0,n=[],i={},o=function(e,t,o){o=o||1,i[e]||(i[e]=0),i[e]+=o,t&&(!function(e){return"[object Array]"==Object.prototype.toString.call(e)}(t)?n.push(t):n=n.concat(t)),setTimeout((function(){a()}),1500)},a=function(){let o=[],s=n.length,r=["r="+Math.random()];for(let n in i)i.hasOwnProperty(n)&&o.push(e+"_"+(1*n+1*t)+"_"+i[n]);for(let e=0;e<s&&!(e>=10);++e)r.push("log"+e+"="+encodeURIComponent(n[e]));if(0==o.length&&r.length<=1)return;let d,c="idkey="+o.join(";")+"&lc="+(r.length-1)+"&"+r.join("&");if(window.ActiveXObject)try{d=new ActiveXObject("Msxml2.XMLHTTP")}catch(es){try{d=new ActiveXObject("Microsoft.XMLHTTP")}catch(l){d=!1}}else window.XMLHttpRequest&&(d=new XMLHttpRequest);d&&(d.open("POST",location.protocol+"//mp.weixin.qq.com/mp/jsmonitor?",!0),d.setRequestHeader("cache-control","no-cache"),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.onreadystatechange=function(){4===d.readyState&&(n.length>10?(n=n.slice(10),a()):(n=[],i={}))},n=[],i={},d.send(c))};try{if(!window.__observer)return;let e=window.__observer_data;if(window.__observer.takeRecords){let t=window.__observer.takeRecords();if(t&&t.length){e.count++;let n=new Date;t.forEach((function(t){let n=t.addedNodes;for(let i=0;i<n.length;i++){let t=n[i];if("SCRIPT"===t.tagName){let n=t.src;!n||/qq\.com/.test(n)||/weishi\.com/.test(n)||e.list.push(n)}}})),e.exec_time+=new Date-n}}window.__observer.disconnect();let t=window.__moonsafe_mutation_report_keys.observer||2,n=window.__moonsafe_mutation_report_keys.script_src||8,i=window.__moonsafe_mutation_report_keys.setattribute||9,a=window.__moonsafe_mutation_report_keys.ajax||10,s=25;for(let d=0;d<e.list.length;d++){let n=e.list[d],i=["[moonsafe][observer][url]:"+location.href,"[moonsafe][observer][src]:"+n,"[moonsafe][observer][ua]:"+navigator.userAgent];e.list.length==d+1&&(i.push("[moonsafe][observer][count]:"+e.count),i.push("[moonsafe][observer][exec_time]:"+e.exec_time+"ms")),o(t,i),"inlinescript_without_nonce"==n&&o(s,i)}let r=window.__danger_src;if(r){let e=[{key:"xmlhttprequest",idkey:a},{key:"script_src",idkey:n},{key:"script_setAttribute",idkey:i}];for(let t=0;t<e.length;t++){let n=e[t].key,i=r[n];if(i&&i.length)for(let a=0;a<i.length;a++){let s=["[moonsafe]["+n+"][url]:"+location.href,"[moonsafe]["+n+"][src]:"+i[a],"[moonsafe]["+n+"][ua]:"+navigator.userAgent];o(e[t].idkey,s)}}}}catch(es){o(3,["[moonsafe][observer][exception]:"+es])}}),!1)}if(window.localStorage&&window.localStorage.getItem){const e=4500,t="loadSec-"+window.biz+"-"+window.mid+"-"+window.idx;let n=window.localStorage.getItem(t);n&&window.write_sceen_time-parseInt(n,10)>e&&(B.report(20801,{Bizuin:window.biz,MsgId:1*window.mid,ItemIdx:1*window.idx,Url:window.msg_source_url||"",Title:window.msg_title||""}),window.localStorage.removeItem(t))}const Ta=function(){let e=window.location.href.split("?")[1];if(e){let t=e.split("&");for(let e=0;e<t.length;e++){const[n,i]=t[e].split("=");if("imageIndex"===n)return parseInt(i,10)}return""}return""}();function ja(e){return e&&e.getBoundingClientRect?e.getBoundingClientRect().top+function(){let e=0;return void 0!==window.pageXOffset?e=window.pageXOffset:void 0!==document.compatMode&&"BackCompat"!==document.compatMode?e=document.documentElement.scrollTop:void 0!==document.body&&(e=document.body.scrollTop),e}():0}function Ca(){if(""===Ta)return;const e=function(){const e=[],t=document.getElementsByTagName("img");for(let n=0,i=t.length;n<i;n++){const i=t.item(n);i.getAttribute("data-src")&&e.push(i)}return e}();if(Ta>e.length)return;const t=ja(e[Ta]);window.scroll(0,t)}""!==Ta&&"scrollRestoration"in history&&(history.scrollRestoration="manual"),"loading"!==document.readyState?Ca():window.addEventListener("DOMContentLoaded",(function(){Ca()}));const Sa=[2390745668,3099420829,3872121626,3203738065,3072206507,3566970574,3002803029,3099387730,3559965496,3525314097,2390323860,3084276724,3289028514,3003793452,3003972371,2398512110,3071748654,3233018348,3095049467,3076061592,3273032305,3264278949,3086344434,3014829842,3294546013,2058310401,2397841479,2397640820,3282179238,3072107639,3521076442,3554888231,2397274880,2394106525,3077726226,2103095721,3593723769,2395186785,2393698643,3944000110,2397445840,2394144447,3082139483,3070806332,3016714421,3006879186,3213574124,3221398587,3078448935,3591999034,3551390431],Ba=_(window.user_uin),Ra=["testrd","otherrd"];let Na=0;try{Na=1*window.atob(window.biz)}catch(es){}let qa={report_action:2,share_type:5};function Pa(e,t,n){let i="",o="";try{""!=tid&&(o="tid="+tid+"&aid=54");let a=e.split("?")[1]||"";if(a=a.split("#")[0],""==a);else{let s=[a,"mpshare=1","scene="+t,"srcid="+srcid,"sharer_sharetime="+n,"sharer_shareid="+Ba];if(""!=o&&s.push(o),a=s.join("&"),2===t&&Sa&&Sa.indexOf(Na)>-1){let t=Math.floor(Math.random()*Ra.length),n=Ra[t];i=e.split("?")[0]+"?"+a+`&testtype=${n}#`+(e.split("#")[1]||"")}else i=e.split("?")[0]+"?"+a+"#"+(e.split("#")[1]||"")}}catch(es){i=""}return i||(i=location.href+"#wechat_redirect",U.setLogs({id:28307,key:47,value:1,lc:1,log0:"[share_link]["+encodeURIComponent(location.href)+"]["+encodeURIComponent(e)+"]["+encodeURIComponent(msg_link)+"]"})),i}O.call("hideToolbar"),O.call("showOptionMenu");let Ma=msg_title.htmlDecode(),Oa=cdn_url_1_1||msg_cdn_url||ori_head_img_url||round_head_img,za=Oa,La=msg_link.htmlDecode(),Wa=msg_desc.htmlDecode();function Da(e,t,n,i,o=0){ce.shareReport({link:e,action_type:n,sharer_sharetime:i,sharer_shareid:Ba,share_source:window.customShareSource||(0===o?1:2)})}function Ha(e,t){return e.isCDN()&&(e=z.addParam(e,"wxfrom",t,!0)),e}Wa=Wa||"",Wa=Wa.replace(/<br\/>/g,"\n"),idx>1&&document.getElementById("js_content")&&ct<1446652800&&(Wa=document.getElementById("js_content").innerHTML.replace(/<\/?[^>]*\/?>/g,"").htmlDecode().replace(/^(\s*)|(\s*)$/g,"").substr(0,54)),Oa.isCDN()&&(Oa=Oa.replace(/\/0$/,"/300"),Oa=Oa.replace(/\/0\?/,"/300?")),za.isCDN()&&(za=za.replace(/\/0$/,"/640"),za=za.replace(/\/0\?/,"/640?")),malicious_title_reason_id&&(Ma=b.maliciousTitleMap[malicious_content_type][malicious_title_reason_id]||Ma,Wa=b.maliciousDescMap[malicious_content_type][malicious_title_reason_id]||Wa,1!=malicious_content_type&&(Oa="https://mmbiz.qlogo.cn/mmbiz_png/cVgP5bCElFiayFgbgEB9iaDt7hLicfz9RrXGM0LpaQ0TUic2gP7lbbqU3jCD8ibonicgIa3p99yjx1f1P26HChraeRUg/0?wx_fmt=png")),"1"==is_limit_user&&O.call("hideOptionMenu"),window.is_temp_url&&O.invoke("hideMenuItems",{menuList:["menuItem:share:timeline","menuItem:share:qq","menuItem:share:weiboApp","menuItem:share:facebook","menuItem:share:qzone","menuitem:share:weibo","menuItem:share:WeiboApp","menuItem:share:QZone","menuitem:facebook","menuItem:copyUrl","menuItem:share:email","menuitem:copy_url","menuitem:share:haokan"]},(function(e){}));let Ua="https://res.wx.qq.com/op_res/Fwh9olR917lxUMxpJVM5sCCyrQOJSm68IEt-HfL7vpc5-_etzmyuLg1kPdU6RNRX";function $a(){let e=!1,t=window.performance||window.msPerformance||window.webkitPerformance;if(!(t&&t.timing&&t.timing.navigationStart))return!1;e=t.timing.navigationStart,function(){let t=window.performance&&window.performance.timing,n=window.write_sceen_time-e,i=window.first_sceen__time-e,o=window.page_endtime-e,a=(window.onload_endtime||+new Date)-e;-1!=navigator.userAgent.indexOf("MicroMessenger")&&(n=real_show_page_time-e,i=real_show_page_time-e);let s=window.logs.jsapi_ready_time?window.logs.jsapi_ready_time-e:void 0,r=window.logs.a8key_ready_time?window.logs.a8key_ready_time-e:void 0,d=t&&t.connectEnd-t.connectStart,c=t&&t.secureConnectionStart&&t.connectEnd-t.secureConnectionStart,l=t&&t.domainLookupEnd&&t.domainLookupStart&&t.domainLookupEnd-t.domainLookupStart;if(window.logs.pagetime.wtime=n,window.logs.pagetime.ftime=i,window.logs.pagetime.ptime=o,window.logs.pagetime.onload_time=a,window.logs.pagetime.jsapi_ready_time=s,window.logs.pagetime.a8key_ready_time=r,need_report_cost?R({url:"/mp/report_cost",type:"post",data:{id_key_list:["1|1|"+o,"1|2|"+i,"1|3|"+a,"1|4|"+s,"1|5|"+r,"1|6|"+d,"1|7|"+c,"1|8|"+l].join(";")}}):Math.random()<.01&&R({url:"/mp/report_cost",type:"post",data:{id_key_list:["#1|1|"+o,"1|2|"+i,"1|3|"+a,"1|4|"+s,"1|5|"+r,"1|6|"+d,"1|7|"+c,"1|8|"+l].join(";")}}),need_report_cost&&i>3e3){let e=new Image,t=(new Date).getTime();e.onload=function(){let e=(new Date).getTime()-t,n=(new Date).getTime(),i=new Image;i.onload=function(){let t=(new Date).getTime()-n;R({url:"/mp/report_cost",type:"post",data:{id_key_list:["^2|1|"+e,"2|2|"+t].join(";")}})},i.src="http://ugc.qpic.cn/adapt/0/7d8963bb-aace-df23-0569-f8a4e388eacb/100?r="+Math.random()},e.src="http://ugc.qpic.cn/adapt/0/7d8963bb-aace-df23-0569-f8a4e388eacb/100?r="+Math.random()}function p(){if(-1==navigator.userAgent.indexOf("NetType/"))return!1;let e=["2G","cmwap","cmnet","uninet","uniwap","ctwap","ctnet"];for(let t=0,n=e.length;t<n;++t)if(-1!=navigator.userAgent.indexOf(e[t]))return!0;return!1}Math.random()>.2||a<0||n<0||i<0||o<0||(s&&U.setAvg(27822,15,s),r&&U.setAvg(27822,17,r),o>=15e3?U.setAvg(27822,29,o):(U.setAvg(27822,1,o).setAvg(27822,3,a).setAvg(27822,5,i),window.isWeixinCached&&U.setAvg(27822,19,o),p()?(U.setAvg(27822,9,o),window.isWeixinCached&&U.setAvg(27822,23,o)):"wifi"==networkType?(U.setAvg(27822,7,o),window.isWeixinCached&&U.setAvg(27822,21,o)):"2g/3g"==networkType?(U.setAvg(27822,11,o),window.isWeixinCached&&U.setAvg(27822,25,o)):"4g"==networkType?(U.setAvg(27822,14,o),window.isWeixinCached&&U.setAvg(27822,26,o)):(U.setAvg(27822,13,o),window.isWeixinCached&&U.setAvg(27822,28,o)),window.moon&&moon.clearSample&&(U.setAvg(27822,71,o),p()?U.setAvg(27822,73,o):"wifi"==networkType?U.setAvg(27822,75,o):"2g/3g"==networkType?U.setAvg(27822,77,o):"4g"==networkType?U.setAvg(27822,78,o):U.setAvg(27822,79,o)),d&&U.setAvg(27822,65,d),c&&U.setAvg(27822,67,c),l&&U.setAvg(27822,69,l)))}(),window.logs.jsapi_ready_fail&&U.setSum(24729,55,window.logs.jsapi_ready_fail),function(){const e=document.getElementById("page-content");if(!e||Math.random()>.1)return;const n=function(){const i=document.getElementById("js_toobar3"),o=window.pageYOffset||document.documentElement.scrollTop,a=i.offsetTop;if(o+S.getInnerHeight()>=a){let i,o,a=e.getElementsByTagName("img"),s={},r=[],d=0,c=0,l=0;for(let e=0,t=a.length;e<t;++e){let t=a[e];i=t.getAttribute("data-src")||t.getAttribute("src"),o=t.getAttribute("src"),i&&(i.isCDN()?c++:l++,d++,s[o]={})}if(r.push("1="+1e3*d),r.push("2="+1e3*c),r.push("3="+1e3*l),t.getEntries){let e=t.getEntries(),n=window.logs&&window.logs.img&&window.logs.img.download;if(!n)return;let i=[0,0,0],o=[0,0,0];d=c=0;for(let t=0,r=e.length;t<r;++t){let n=e[t],a=n.name;a&&"img"==n.initiatorType&&s[a]&&(a.isCDN()&&(o[0]+=n.duration,c++),i[0]+=n.duration,d++,s[a]={startTime:n.startTime,responseEnd:n.responseEnd})}i[0]>0&&d>0&&(i[2]=i[0]/d),o[0]>0&&c>0&&(o[2]=o[0]/c);for(let t in n)if(n.hasOwnProperty(t)){let e=n[t],a=0,r=0,d=0,c=0;for(let t=0,n=e.length;t<n;++t){let n=e[t];if(s[n]&&s[n].startTime&&s[n].responseEnd){let e=s[n].startTime,t=s[n].responseEnd;a=Math.max(a,t),r=r?Math.min(r,e):e,n.isCDN()&&(d=Math.max(a,t),c=r?Math.min(r,e):e)}}i[1]+=Math.round(a-r),o[1]+=Math.round(d-c)}let a=4,l=7;for(let t=0;t<3;t++)i[t]=Math.round(i[t]),o[t]=Math.round(o[t]),i[t]>0&&(r.push(a+t+"="+i[t]),"wifi"==networkType?r.push(a+t+6+"="+i[t]):"2g/3g"!=networkType&&"4g"!=networkType||r.push(a+t+12+"="+i[t])),o[t]>0&&(r.push(l+t+"="+o[t]),"wifi"==networkType?r.push(l+t+6+"="+o[t]):"2g/3g"!=networkType&&"4g"!=networkType||r.push(l+t+12+"="+o[t]))}j.off(window,"scroll",n,!1)}};j.on(window,"scroll",n,!1)}(),function(){if(Math.random()>.001)return;const e=document.createElement("iframe"),t=Math.ceil(10*Math.random())-1,n=uin+mid+idx+Math.ceil(1e3*Math.random())+(new Date).getTime();e.style.display="none",e.id="js_ajax",e.setAttribute("data-time",t),e.src="/mp/iframetest?action=page&traceid="+n+"&devicetype="+devicetype+"&timeout="+[600,800,1e3,1200,1500,2e3,3e3,5e3,1e4,18e3][t];document.getElementById("js_article").appendChild(e)}()}O.on("menu:share:appmessage",(function(e){if(window.is_wash){let t=Date.now();O.invoke("sendAppMessage",{img_url:Ua,img_width:"640",img_height:"640",link:Pa(La,type,t),desc:"你可以阅读以下原创作者的内容",title:"原文存在洗稿行为"},(function(n){Da(La,fakeid,type,t,e.shareScene)}))}else{let t=1,n=Ha(Oa,"1");e&&"favorite"==e.scene&&(t=24,n=Ha(Oa,"4"),F&&F.render&&F.render("share")),1==malicious_content_type&&(n="https://mmbiz.qlogo.cn/mmbiz_png/cVgP5bCElFiayFgbgEB9iaDt7hLicfz9RrXGM0LpaQ0TUic2gP7lbbqU3jCD8ibonicgIa3p99yjx1f1P26HChraeRUg/0?wx_fmt=png");let i=Date.now(),o={appid:"",img_url:n,img_width:"640",img_height:"640",link:La,desc:Wa,title:Ma};if(window.customShareInfo&&"object"==typeof window.customShareInfo&&Object.assign(o,window.customShareInfo),"string"==typeof o.forbid_msg){let t=o.forbid_msg.replace("#op#","favorite"===e.scene?"收藏":"分享");return void(window.weui||window).alert(t)}o.link=Pa(o.link,t,i),O.invoke("sendAppMessage",o,(function(n){Da(La,fakeid,t,i,e.shareScene),F&&F.render&&F.render("share"),o.vid&&(qa=Object.assign(qa,{vid:o.vid,share_type:2}),de.reportKanData(qa))}))}})),O.on("menu:share:timeline",(function(e){if(window.is_wash){let t=Date.now();O.invoke("shareTimeline",{img_url:Ua,img_width:"640",img_height:"640",link:Pa(La,2,t),desc:"",title:"原文存在洗稿行为，你可以阅读以下原创作者的内容"},(function(n){Da(La,fakeid,2,t,e.shareScene)}))}else{let t=Oa;N.isIOS||(t=Ha(Oa,"2"));let n=Date.now(),i={img_url:t,img_width:"640",img_height:"640",link:La,desc:Wa,title:Ma};if(window.customShareInfo&&"object"==typeof window.customShareInfo&&Object.assign(i,window.customShareInfo),"string"==typeof i.forbid_msg){let e=i.forbid_msg.replace("#op#","分享");return void(window.weui||window).alert(e)}i.link=Pa(i.link,2,n),O.invoke("shareTimeline",i,(function(t){Da(La,fakeid,2,n,e.shareScene),F&&F.render&&F.render("share"),i.vid&&(qa=Object.assign(qa,{vid:i.vid,share_type:1}),de.reportKanData(qa))}))}})),O.on("menu:share:weiboApp",(function(e){let t=Date.now();O.invoke("shareWeiboApp",{img_url:Oa,link:Pa(La,3,t),title:Ma},(function(e){Da(La,fakeid,3,t)}))})),O.on("menu:share:facebook",(function(e){let t=Date.now();Da(La,fakeid,7,t),O.invoke("shareFB",{img_url:za,img_width:"640",img_height:"640",link:Pa(La,43,t),desc:Wa,title:Ma},(function(e){}))})),O.on("menu:share:QZone",(function(e){let t=Ha(Oa,"6"),n=Date.now();Da(La,fakeid,5,n),O.invoke("shareQZone",{img_url:t,img_width:"640",img_height:"640",link:Pa(La,22,n),desc:Wa,title:Ma},(function(e){}))})),O.on("menu:share:qq",(function(e){let t=Ha(Oa,"7"),n=Date.now();Da(La,fakeid,5,n),O.invoke("shareQQ",{img_url:t,img_width:"640",img_height:"640",link:Pa(La,23,n),desc:Wa,title:Ma},(function(e){}))})),O.on("menu:share:email",(function(e){let t=Date.now();Da(La,fakeid,5,t),O.invoke("sendEmail",{content:Pa(La,5,t),title:Ma},(function(e){}))})),O.on("sys:record",(function(e){O.invoke("recordHistory",{link:La,title:Ma,source:nickname,img_url:Oa},(function(e){}))})),j.on(window,"load",(function(){if(""==networkType&&window.isInWeixinApp()){let e={"network_type:fail":"fail","network_type:edge":"2g/3g","network_type:wwan":"2g/3g","network_type:wifi":"wifi"};JSAPI.invoke("getNetworkType",{},(function(t){networkType=e[t.err_msg],"network_type:edge"!=t.err_msg&&"network_type:wwan"!=t.err_msg||(t.detailtype&&"4g"==t.detailtype||t.subtype&&"4g"==t.subtype)&&(networkType="4g"),$a()}))}else $a()}),!1),window.page_endtime=+new Date,c.config.errorHandler=function(e,t,n){e._info=n,window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.onError(e),console.error("Vue errorHandler",n,e.stack)},console.info("[图文信息] 三元组:",window.biz,window.mid,window.idx),console.info("[用户信息] 设备信息: 是否安卓",P.os.android,"是否IOS",P.os.ios,"是否秒开场景",window.__second_open__,"系统版本",P.os.version,"用户uin",window.user_uin,"是否小程序内打开",N.isInMiniProgram),Ce.set({bottom:[Se["BG-0"],Be["BG-0"]]});let Va=-1,Ja=!1;function Fa(e){let t=window.location.search,n=t.substring(1,t.length).split("&");for(let i=0;i<n.length;i++){let t=n[i].split("=");if(t[0].toUpperCase()===e.toUpperCase())return t[1]}return""}let Xa=window.user_uin||0,Ga=Math.floor(Xa/100)%1e3,Ka=0!==Xa&&Ga<1001,Qa="",Ya=[];if(window.logs.pagetime.jsapi_ready_time=+new Date,window.logs.idkeys={},oe.log("[Appmsg] start run index.js init"),function(){let e=(new Date).getHours(),t=function(e,t){t=t||"",window.isSg?(t=["uin:sougou","resp:"+t].join("|"),(new Image).src="/mp/jsreport?key="+e+"&content="+t+"&r="+Math.random()+"&from=sougou"):(t=["uin:"+window.user_uin,"resp:"+t].join("|"),(new Image).src="/mp/jsreport?key="+e+"&content="+t+"&r="+Math.random())},n=e>=11&&e<=17&&Math.random()<1;window.__report=t,window.__commonVideoReport=function(e,i){n&&t(e,i)},window.__addIdKeyReport=function(e,t,n){let i=e+"_"+t;n=n||1,window.logs.idkeys[i]||(window.logs.idkeys[i]={val:0}),window.logs.idkeys[i].val+=n}}(),S.initWebCompt(["wxOpen"],(e=>{window.__is_support_wxOpen=e.err_msg.indexOf(":ok")>-1,document.getElementsByTagName("mpsubscribe")&&document.getElementsByTagName("mpsubscribe").length&&ga()})),function(){try{Ya=document.getElementsByTagName("mpcps"),window.__addIdKeyReport("64469","15",Ya.length);for(let e=0;e<Ya.length;e++){Ya[e].setAttribute("data-cpsstatus","hide"),Ya[e].setAttribute("data-showed","no");let t={cps_isready:!1,cps_state:"",pid_type:"",img_url:"",title:"",desc:"",source_name:"",source_logo_url:"",is_ad:1},n=ge.attr(Ya[e],"data-templateid");window.is_teenager||("list"==n?Ya[e].innerHTML=q.tmpl(qe,t,!1):"banner"==n?Ya[e].innerHTML=q.tmpl(Re,t,!1):"card"==n&&(Ya[e].innerHTML=q.tmpl(Ne,t,!1)))}}catch(es){console.log(es)}setTimeout((()=>{let e=document.getElementsByClassName("wx-edui-video_source_link");e=Array.prototype.slice.call(e),e.forEach((e=>{e&&e.addEventListener("click",(()=>{const t=e.dataset.hitUsername,n=e.dataset.hitBiz;C.goProfile({biz:n},{username:t})}))}))}),500);try{Le.init(document.getElementById("js_tags"))}catch(es){console.log(es)}let e,t=!1;function n(e){if(!e||0==e.length)return;let t={batch_no:z.getQuery("batch_no")||"",bizuin:window.biz||"",biz:window.biz||"",mid:window.mid||"",idx:window.idx||"",total:e.length};for(let n=0;n<e.length;n++){let i=e[n],o=n+1;for(let e in i)i.hasOwnProperty(e)&&(t[e+""+o]=i[e])}R({url:"/mp/productreport?",type:"POST",data:t,dataType:"json",async:!0})}(()=>{try{const e=S.getParam("anchor_list");let n=!1;if(e&&2!==window.copyright_stat){t=!0;const i=document.getElementById("js_content"),o=v(i,{ignoreNotWriteableChildren:!0});let a=decodeURIComponent(e).split("#");for(let e=0;e<a.length;e++){let t=a[e].split(",");if(t&&3===t.length){let e=o[t[0]],i=1*t[1],a=1*t[2];window.__addIdKeyReport("306353","3");const s=Kn(e,i,a);n||(window.__addIdKeyReport("306353","1"),window.scrollTo(0,s.getBoundingClientRect().top+S.getScrollTop()-68),n=!0)}}}}catch(e){window.__addIdKeyReport("306353","2"),console.error(e)}})();let i=null;function o(){i&&clearTimeout(i),i=setTimeout((function(){try{i=null;for(let e=0;e<Ya.length;e++){let t=Ya[e];if("no"==ge.attr(t,"data-showed")){let i=t.getElementsByClassName("js_product_loop_content");if(i.length>0){i=i[0];let o=i.getBoundingClientRect();if((o.height||o.bottom-o.top)>0&&o.top<S.getInnerHeight()&&o.bottom>0){t.setAttribute("data-showed","yes");let o=i.getAttribute("data-pid");o&&n([{wxa_appid:i.getAttribute("data-wxaappid"),pid:o,type:3,absolute_order:e+1,appid:i.getAttribute("data-appid")||"",templateid:i.getAttribute("data-templateid")||"",relative_order:1*i.getAttribute("data-order"),packid:i.getAttribute("data-packid")||""}])}}}}}catch(es){}}),100)}function a(e){try{let e=window.pageYOffset||document.documentElement.scrollTop;for(let t=0;t<Ya.length;t+=5){let i=Ya[t];if(!(i.offsetTop>e+S.getInnerHeight()+100)&&"hide"==ge.attr(i,"data-cpsstatus")){i.setAttribute("data-cpsstatus","loading");let e=""+t,a=1;for(let n=t+1;n<Ya.length&&n<t+5;n++)e=e+"%2c"+n,a++;let s=Math.ceil(1e7*Math.random()),r="/mp/cps_product_info?biz="+window.biz+"&mid="+window.mid+"&idx="+window.idx+"&cpslist="+e+"&sn="+window.sn+"&istempurl="+(window.is_temp_url||0)+"&random="+s;if(""!==Fa("mockcps")&&(r="/mp/cps_product_info?biz="+window.biz+"&mid="+window.mid+"&idx="+window.idx+"&cpslist="+e+"&sn="+window.sn+"&mockcps="+Fa("mockcps")),window.is_teenager)return void U.setSum(286024,0,1);if(window.is_care_mode)return void U.setSum(286024,1,1);!function(e,t,i){R({url:t,type:"GET",dataType:"json",async:!0,error:function(e){try{window.__addIdKeyReport("64469","18",i)}catch(t){}},success:function(e){try{window.__addIdKeyReport("64469","16",e.product_list.length),e.product_list.length<i&&window.__addIdKeyReport("64469","18",i-e.product_list.length);for(let t=0;t<e.product_list.length;t++){e.product_list[t].data.cps_isready=!0,e.product_list[t].data.pid_type=e.product_list[t].data.pid_type||e.product_list[t].attr.pid_type;let i=Ya[e.product_list[t].index],o=e.product_list[t].template_id;"list"==o?i.innerHTML=q.tmpl(qe,e.product_list[t].data):"banner"==o?i.innerHTML=q.tmpl(Re,e.product_list[t].data):"card"==o&&(i.innerHTML=q.tmpl(Ne,e.product_list[t].data)),e.product_list[t].weapp_username&&(e.product_list[t].attr.weapp_username=e.product_list[t].weapp_username),e.product_list[t].weapp_version&&(e.product_list[t].attr.weapp_version=e.product_list[t].weapp_version),i.setAttribute("data-cpsstatus","complete");let a=i.getElementsByClassName("js_product_loop_content");for(let n=0;n<a.length;n++)for(let i in e.product_list[t].attr)a[n].setAttribute("data-"+i,e.product_list[t].attr[i]);let s=i.getElementsByTagName("img");for(let e=0;e<s.length;e++)s[e].src=ge.attr(s[e],"data-src");!function(e,t){j.on(e,"tap",".js_product_loop_content",(function(i){try{let o=i.delegatedTarget,a=o.getAttribute("data-wxaappid"),s=o.getAttribute("data-wxapath"),r=o.getAttribute("data-pid"),d=o.getAttribute("data-appid"),c=o.getAttribute("data-cpspackage"),l=Math.floor((new Date).getTime()/1e3)+5184e3,p=o.getAttribute("data-weapp_username"),_=o.getAttribute("data-weapp_version"),u=e.querySelector(".minishop_card_title").innerHTML;o&&K.highlightEle(o),m.jumpUrl({cps_weapp_username:p,cps_weapp_version:_,privateExtraData:{cookies:"cps_package="+encodeURIComponent(c)+"; expires="+l+"; busid=mmbiz_ad_cps; domain=*; spread=*"},sourceAppId:d,appid:a,path:s,scene:1091,sceneNote:[encodeURIComponent(location.href),user_name,msg_title,encodeURIComponent(r),u,s].join(":"),beforeNonWechatWarn:function(){},beforeJumpBackupPage:function(){},onJsapiCallback:function(e){"openWeApp:ok"===e.err_msg&&r&&n([{wxa_appid:a,pid:r,type:4,absolute_order:t+1,appid:o.getAttribute("data-appid")||"",templateid:o.getAttribute("data-templateid")||"",relative_order:1*o.getAttribute("data-order"),packid:o.getAttribute("data-packid")||""}])}})}catch(o){}return!1}))}(i,e.product_list[t].index)}o()}catch(t){window.__addIdKeyReport("64469","18",e.product_list.length)}}})}(0,r,a)}}}catch(t){console.error(t)}}if(o(),j.on(window,"scroll",o),a(),j.on(window,"scroll",(function(t){try{e&&clearTimeout(e),e=setTimeout((function(){a(t)}),300)}catch(n){}})),window.is_new_msg&&-1!=navigator.userAgent.indexOf("MicroMessenger")){if(window.title&&(window.title=window.title.replace(/&#39;/g,"'").replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")),window.msg_title&&(window.msg_title=window.msg_title.replace(/&#39;/g,"'").replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")),hd_head_img||W.jsmonitor({id:115849,key:26,value:1}),N.isAndroid){let e={userName:window.user_name,bizNickName:window.nickname,bizNickNameBackup:window.title,cover:"",title:window.msg_title,headImg:window.hd_head_img,digest:window.msg_desc,reportData:{BizUin:window.biz,AppMsgID:1*window.mid,ItemIndex:1*window.idx,Scene:1*window.source,SubScene:1*window.subscene,EnterId:1*window.enterid,SessionId:window.sessionid,ItemShowType:1*window.item_show_type}};le.init(e);let t=window.cdn_url_1_1||window.cdn_url_235_1||"",n=new Image;t&&(n.src=t,n.onload=()=>{n.width<2048&&n.height<2048&&(e.cover=t,le.init(e)),window.topbarInited=!0},n.onerror=()=>{window.topbarInited=!0})}else le.init({userName:window.user_name,bizNickName:window.nickname,bizNickNameBackup:window.title,title:window.msg_title,headImg:window.hd_head_img,cover:window.cdn_url_1_1||window.cdn_url_235_1||window.msg_cdn_url,digest:window.msg_desc,reportData:{BizUin:window.biz,AppMsgID:1*window.mid,ItemIndex:1*window.idx,Scene:1*window.source,SubScene:1*window.subscene,EnterId:1*window.enterid,SessionId:window.sessionid,ItemShowType:1*window.item_show_type}});j.on(window,"scroll",(()=>{Ja||N.isAndroid&&!window.topbarInited||(Ae(0),Ja=!0)})),O.invoke("createWebViewForFastLoad",{scene:1},(function(e){console.log(e)}))}let s=document.getElementsByTagName("body");if(!s||!s[0])return!1;s=s[0];(function(){let e=[],t=document.getElementById("js_content").getElementsByTagName("a");for(let s=0;s<t.length;s++)null!==t[s].getAttribute("data-itemshowtype")&&e.push(t[s]);let n=[];Array.prototype.map.call(document.getElementById("js_content").getElementsByClassName("h5_image_link"),(function(e){e.parentNode.getAttribute("href")&&e.parentNode.getAttribute("href").length>0&&n.push(e)}));let i=[];Array.prototype.map.call(document.getElementById("js_content").getElementsByClassName("weapp_image_link"),(function(e){i.push(e)}));let o=window.innerHeight||document.documentElement.clientHeight;function a(){!function(){if(e.length){let t=document.documentElement.scrollTop||document.body.scrollTop;for(let n=0;n<e.length;n++)if(1!=e[n].getAttribute("hasload")){let i=e[n].getBoundingClientRect();(i.top<o+t&&i.top>t||i.top+i.height>t&&i.top+i.height<o+t)&&e[n].getAttribute("href").length>0&&(e[n].setAttribute("hasload",1),O.invoke("downloadPageDataForFastLoad",{itemList:[{item_show_type:e[n].getAttribute("data-itemshowtype"),url:e[n].getAttribute("href")}]},(function(e){console.log(e)})),e.splice(n,1),n--)}}}(),function(){for(let e=0;e<n.length;e++){let t=n[e],i=t.getBoundingClientRect();(i.top<=0&&i.top+i.height>=0||i.top>0&&i.top<o)&&(n.splice(e,1),e--,E.report([1,E.getRedirectType(t.parentNode.getAttribute("href")),"",window.img_popup?1:0,window.source,E.getUrlData(t.parentNode.getAttribute("href"))]))}for(let e=0;e<i.length;e++){let t=i[e],n=t.getBoundingClientRect();(n.top<=0&&n.top+n.height>=0||n.top>0&&n.top<o)&&(i.splice(e,1),e--,E.report([1,1,"",window.img_popup?1:0,window.source,t.getAttribute("data-miniprogram-appid")]))}}()}j.on(window,"scroll",a),a()})(),(()=>{if(O.on("onScreenShot",(()=>{U.setSum(114217,15,1)})),oe.log("[Appmsg] pay process 1 isPaySubscribe="+window.isPaySubscribe),window.isPaySubscribe){O.on("onScreenShot",(()=>{ve.reportPayAppmsg(6)}));const e=N.isWindows||N.isMac&&!N.isIOS,t=document.getElementById("js_content"),n=e=>{"IMG"===e.target.tagName&&e.preventDefault()};if(e&&(t.addEventListener("dragstart",n),N.isWechat||t.addEventListener("contextmenu",n)),oe.log("[Appmsg] pay process 2 isPaid="+window.isPaid),!window.isPaid){const t=`isPaid-${window.biz}-${window.mid}-${window.idx}`,n=document.getElementById("js_pay_panel"),i=n.getElementsByClassName("js_pay_btn")[0],o=document.getElementById("js_pay_panel_bottom"),a=o.getElementsByClassName("js_pay_btn")[0],s=window.getComputedStyle(o),r=40+parseInt(s.paddingTop,10)+parseInt(s.paddingBottom,10);i.style.width=i.getBoundingClientRect().width+"px",a.style.width=a.getBoundingClientRect().width+"px";let d=N.isGooglePlay;if(N.isAndroid&&"1"===window.localStorage.getItem(t)&&ve.report110809(30),e){const e=document.getElementsByClassName("js_pay_qrcode"),t=`/mp/paysubqrcode?action=get_article_qrcode&__biz=${window.biz}&mid=${window.mid}&idx=${window.idx}&sn=${window.sn}#wechat_redirect`;for(let n=0,i=e.length;n<i;n++)e[n].src=t}if(N.isInMiniProgram&&(T.addClass(i,"btn_disabled"),T.addClass(o.getElementsByClassName("js_pay_btn")[0],"btn_disabled")),N.isIOS&&window.payShowIAPPrice&&!window.can_use_wecoin){let e=setTimeout((()=>{e=null,console.log("getIAPProductInfo timeout"),ve.reportOverseaPay("",0,1,0,"",2,"")}),3e3);const t=Date.now();O.invoke("handleMPPageAction",{action:"getIAPProductInfo",productId:window.payProductId},(i=>{if("number"!=typeof e)return;clearTimeout(e);const a=Date.now()-t;if(console.log("getIAPProductInfo",i,a+"ms"),-1!==i.err_msg.indexOf(":ok")){if(ve.report110809(38),window.payProductId!==i.productId)return void ve.report110809(44);const e={USD:"$",HKD:"HK$",CAD:"C$",AUD:"A$",TWD:"NT$",JPY:"JPY￥",EUR:"€",SGD:"S$",GBP:"£",NZD:"NZ$",MYR:"RM",KZT:"〒",KRW:"₩",THB:"฿",PHP:"₱",TRY:"₺",MXN:"Mex$",CNY:"￥"};[n.getElementsByClassName("js_pay_fee")[0],o.getElementsByClassName("js_pay_fee")[0]].forEach((t=>{const n=e[i.currencyCode]?e[i.currencyCode]:i.currencySymbol;t.innerHTML=n+i.price.toFixed(2),t.parentNode.dataset.ready=1})),window.iapPriceInfo&&window.iapPriceInfo.currency_code!==i.currencyCode&&R({url:"/mp/useriapinfo?action=update",type:"POST",dataType:"json",async:!0,data:{country_code:i.countryCode,currency_code:i.currencyCode,currency_symbol:i.currencySymbol,price:i.price,price_format_string:i.priceFormatString,iap_product_id:i.productId}}),window.oriProductFee?("CNY"!==i.currencyCode&&ve.report110809(40),ve.reportOverseaPay(i.currencyCode,100*i.price.toFixed(2),1,a,i.countryCode,0,i.err_msg+(i.err_desc?"__"+i.err_desc:""))):(window.IAPProductInfo=i,window.IAPProductInfo.invokeTime=a)}else ve.report110809(39),ve.reportOverseaPay("",0,1,0,"",1,i.err_msg+(i.err_desc?"__"+i.err_desc:""))}))}window.jump2pay&&j.on(window,"load",(()=>{window.scrollTo(0,n.getBoundingClientRect().top-S.getInnerHeight()/3)}));const c=()=>{if(i.getBoundingClientRect().top+r>window.innerHeight){if(1*window.previewPercent==0)return;o.className="pay pay__notice pay__notice_show"}else o.className="pay pay__notice",window.is_finished_preview=1};c(),j.on(window,"scroll",c);const l=e=>{1===e?X.show():2===e&&Array.prototype.forEach.call(document.getElementsByClassName("js_button_loading"),(e=>{e.style.display="",e.nextElementSibling.style.display="none"}))},p=e=>{1===e?X.hide():2===e&&Array.prototype.forEach.call(document.getElementsByClassName("js_button_loading"),(e=>{e.style.display="none",e.nextElementSibling.style.display=""}))},_=2;let m=!1,u=0,w=0,g=null,h=null,f=null,y=null,b=null,v=null,x=null,k=null;const I=()=>{ve.reportPayAppmsg(1),J.renderLikeProfile(["pay"]),F&&F.render&&F.render("pay"),O.invoke("handleMPPageAction",{action:"paySuccess",fullUrl:window.location.href,itemShowType:item_show_type},(e=>{m=!1,e.err_msg.indexOf("ok")>-1?ve.report110809(19):ve.report110809(20),window.localStorage&&window.localStorage.setItem&&window.localStorage.setItem(t,"1"),window.__second_open__?window.location.href=window.location.href+"&r="+Math.random()+"#wechat_redirect":window.location.reload()})),window.localStorage.setItem("paySuc","1")};let A=null,E=null;if(oe.log("[Appmsg] pay process 3 can_use_wecoin="+window.can_use_wecoin),window.can_use_wecoin){const e=document.createElement("div");e.innerHTML=q.tmpl('<div class="pay__wecoin">\n  <div id="js_wecoin_title" class="pay__wecoin-title" style="font-weight: normal;">购买全文</div>\n  <div class="pay__wecoin-content pay__wecoin-content-price">\n    <i class="pay__icon-wecoin"></i>\n    <span id="js_wecoin_price" class="price"><#=price#></span>\n  </div>\n  <div id="js_wecoin_tips" class="pay__wecoin-tips" style="display:none"></div>\n</div>',{price:wecoin_amount});const t=document.createElement("div"),n=document.createElement("div");n.className="weui-half-screen-dialog__btn-area",v=document.createElement("a"),v.innerText="支付",v.className="weui-btn weui-btn_primary";const i=document.createElement("div");i.className="weui-half-screen-dialog__attachment-area",i.innerHTML='<a href="javascript:;">常见问题</a>',x=document.createElement("div"),x.id="js_wecoin_term",x.className="pay__wecoin-term weui-cells_checkbox",x.style.display="none",x.innerHTML='<label for="js_wecoin_term_check"><input id="js_wecoin_term_check" type="checkbox" class="weui-check" /><i class="weui-icon-checked"></i>同意<a href="javascript:;">《微信豆充值协议》</a></label>',n.appendChild(v),t.appendChild(x),t.appendChild(n),t.appendChild(i),j.on(i,"tap",(e=>{e&&e.preventDefault(),ve.reportPayAppmsg(17),O.invoke("openUrlWithExtraWebview",{url:"https://kf.qq.com/touch/product/WXDB_app.html",openType:1})})),j.on(x,"click",(e=>{"A"===e.target.tagName&&O.invoke("openUrlWithExtraWebview",{url:window.paySubscribeInfo.agreement_url.htmlDecode(),openType:1})}));const o=()=>{X.show();const e=Math.round(new Date/1e3);O.invoke("consumeWCCoin",{buff:k},(t=>{if(console.log("consumeWCCoin res",t),m=!1,t&&t.err_msg&&t.err_msg.indexOf("ok")>-1){ve.reportPay(e,1,k);const t=()=>{R({url:`/mp/paysub?action=query_pay_status&product_type=1&product_id=${window.productPayPackage.product_id}`,type:"GET",dataType:"json",success:e=>{e&&e.base_resp&&0===e.base_resp.ret&&1*e.pay_status==1?(window.weui.toast("已购买",750),I()):setTimeout(t,200)}})};t()}else t&&t.err_msg&&t.err_msg.indexOf("fail")>-1&&(ve.reportPay(e,3,k,t.err_msg,t.err_code,t.err_domain),window.weui.alert("支付失败，请稍后重试"))}))};oe.log("[Appmsg] pay process 4 on payBtn tap"),j.on(v,"tap",(()=>{v.getAttribute("disabled")||(oe.log("[Appmsg] pay process 5 wecoinAmountRemain="+w+" wecoin_amount="+wecoin_amount),w<wecoin_amount?(A.hide(),setTimeout((()=>{ve.reportPayAppmsg(19),oe.log("[Appmsg] pay process 6.1 buyWCCoin");const e=e=>{X.hide(),e&&e.err_msg&&e.err_msg.indexOf("ok")>-1&&(g.innerText=e.balance,w=e.balance,f.innerText=window.wecoin_amount-w,w<window.wecoin_amount?A.show():o())},t={businessId:2,scene:4,panelShowType:"present"};N.isAndroid&&N.gtVersion("8.0.18",!0)&&(t.mode=2,t.agreementVersion=window.paySubscribeInfo.agreement_version,t.customCount=window.wecoin_amount-w,t.productId=window.paySubscribeInfo.recharge_product_id),O.invoke("buyWCCoin",t,(t=>{console.log(t),t&&t.err_msg&&(t.err_msg.indexOf("ok")>-1?N.isIOS&&N.ltVersion("8.0.17")||N.isAndroid&&N.ltVersion("8.0.17")?window.payEduTips.firstWecoinRecharge?E.show():(X.show(),O.invoke("getWCCoinBalance",{},e)):O.invoke("showWCCoinFirstBuyCoinTips",{alwaysDarkMode:!1},(()=>{X.show(),O.invoke("getWCCoinBalance",{},e)})):t.err_msg.indexOf("cancel")>-1&&A.show())}))}),250)):(A.hide(),o()))})),A=new et(e,{title:"",extClass:"pay__bottom-modal",hasBtn:!0,btnSlot:q.tmpl('<div class="pay__wecoin-entry">\n  <i class="pay__icon-wecoin"></i>\n  <span class="price" id="js_wecoin_remain"></span>\n</div>',{}),autoHeight:!0,footerEl:t,cb(){},onHide(){m=!1},btnClickCb(){A.hide();const e=e=>{X.hide(),e&&e.err_msg&&e.err_msg.indexOf("ok")>-1&&(g.innerText=e.balance,w=e.balance,w<window.wecoin_amount?(f.innerText=window.wecoin_amount-w,y.innerText=`售价 ${(window.wecoin_amount-w)/10}元`):(h.innerText="购买全文",f.innerText=window.wecoin_amount,y.style.display="none",x.style.display="none",v.innerText="支付"),A.show())};setTimeout((()=>{ve.reportPayAppmsg(14),O.invoke("buyWCCoin",{businessId:2,scene:3,panelShowType:"present"},(t=>{console.log(t),t&&t.err_msg&&(t.err_msg.indexOf("ok")>-1?N.isIOS&&N.ltVersion("8.0.17")||N.isAndroid&&N.ltVersion("8.0.17")?window.payEduTips.firstWecoinRecharge?E.show():(X.show(),O.invoke("getWCCoinBalance",{},e)):O.invoke("showWCCoinFirstBuyCoinTips",{alwaysDarkMode:!1},(()=>{X.show(),O.invoke("getWCCoinBalance",{},e)})):t.err_msg.indexOf("cancel")>-1&&A.show())}))}),250)}}),g=document.getElementById("js_wecoin_remain"),h=document.getElementById("js_wecoin_title"),f=document.getElementById("js_wecoin_price"),y=document.getElementById("js_wecoin_tips"),b=document.getElementById("js_wecoin_term_check"),b&&b.addEventListener("change",(e=>{e.target.checked?v.removeAttribute("disabled"):v.setAttribute("disabled","disabled")}))}const C=(n,i)=>{if(oe.log("[Appmsg] pay process payFunc call 1"),oe.log("[Appmsg] pay process payFunc call 2 isCheck="+i),!i){if(!e&&m)return;if(ve.report110809ForDevice(32),ve.reportPayAppmsg(9),N.isInMiniProgram)return void ve.reportPayAppmsg(18);if(d)return ve.reportPayAppmsg(18),void window.weui.alert("暂不支持Google Play支付，前往微信官网下载最新版微信，即可正常付费");if((N.isWxWork||!N.isWechat)&&!e)return ve.reportPayAppmsg(18),void window.weui.alert("请在微信内进行付费");m=!0,u=new Date}const o=n.currentTarget;if(!e&&1*o.dataset.ready==0)return i||(ve.report110809ForDevice(64),X.show()),new Date-u>6e4?(ve.report110809ForDevice(66),X.hide(),window.weui.alert("支付超时，请稍后重试"),void(m=!1)):setTimeout(C,100,{currentTarget:o},!0);if(i&&ve.report110809ForDevice(66),window.is_teenager)return ve.reportPayAppmsg(18),window.weui.alert("青少年模式下不可付费"),U.setSum(232209,0,1),void(m=!1);if(window.is_temp_url)ve.reportPayAppmsg(18),window.weui.alert("临时链接无需付费，请谨慎分享，避免内容泄露",(()=>{m=!1,location.replace(`${location.origin}${location.pathname}${location.search}&temp_is_paid=1${location.hash}`)}));else if(e){ve.reportPayAppmsg(18);const e="js_pay_qrcode_wrap",t=o.parentNode.getElementsByClassName("js_pay_fee_display")[0];if("block"===t.style.display)return;o.classList.contains("js_article_bottom")&&t.classList[o.getBoundingClientRect().top<300?"add":"remove"]("pay__notice-qrcode_bottom");const n=i=>{if("none"===t.style.display)return;let a=i.target;for(;!(null===a||a.classList&&a.classList.contains(e)||a===o);)a=a.parentNode;a!==o&&(null!==a&&a.classList.contains(e)||(t.style.display="none",j.off(window,"click",n)))};j.on(window,"click",n),t.style.display="block"}else{if(N.isIOS&&N.ltVersion("8.0.8")||N.isAndroid&&N.ltVersion("8.0.8")&&window.can_use_wecoin)return ve.reportPayAppmsg(18),void location.replace("https://support.weixin.qq.com/update/");if(N.isIOS&&N.ltVersion("7.0.10")||N.isAndroid&&N.ltVersion("7.0.10")&&!window.can_use_wecoin)return ve.reportPayAppmsg(18),void location.replace("https://support.weixin.qq.com/update/");if(N.isAndroid&&"1"===window.localStorage.getItem(t)&&ve.report110809(31),ve.report110809ForDevice(34),oe.log("[Appmsg] pay process payFunc call 3"),window.can_use_wecoin){const e=document.createElement("div");e.innerHTML=`<div class="pay__wecoin-edu-profile">\n                  <div class="pay__wecoin-edu-title">可在「我>个人信息>微信豆」页面，查看微信豆消费明细。</div>\n                  <div class="pay__wecoin-edu-pic">\n                    <div class="pay__wecoin-edu-avatar"><img src="${window.payEduTips.userImgUrl}"></div>\n                    <div class="pay__wecoin-edu-nic">${window.payEduTips.userNickname}</div>\n                  </div>\n                </div>`;const t=document.createElement("a");t.innerText="我知道了",t.className="weui-btn weui-btn_default";const n=()=>{E.hide(),X.show(),O.invoke("getWCCoinBalance",{},(e=>{X.hide(),e&&e.err_msg&&e.err_msg.indexOf("ok")>-1?(g.innerText=e.balance,w=e.balance,A.show()):m=!1})),window.payEduTips.firstWecoinRecharge=0};j.on(t,"tap",n),E=new et(e,{hasHeader:!1,top:window.innerHeight-467+"px",footerEl:t,extClass:"pay__edu-modal",onHide(){n()}}),l(_),R({url:"/mp/paysub?action=create_wecoin_order",type:"POST",dataType:"json",data:{__biz:window.biz,mid:window.mid,idx:window.idx,sn:window.sn,version:window.clientversion.htmlDecode(),is_from_pc:window.jump2pay},async:!0,success:e=>{if(e&&e.base_resp&&0===e.base_resp.ret)ve.report110809(13),ve.report110809ForDevice(36),k=e.encode_resp_buff,O.invoke("getWCCoinBalance",{},(e=>{p(_),console.log("getWCCoinBalance callback",e),e&&e.err_msg&&e.err_msg.indexOf("ok")>-1?e.balance>=window.wecoin_amount?(g.innerText=e.balance,w=e.balance,h.innerText="购买全文",f.innerText=window.wecoin_amount,y.style.display="none",x.style.display="none",v.innerText="支付",A.show(),ve.reportPayAppmsg(16)):(ve.reportPayAppmsg(15),console.log({businessId:2,scene:4,panelShowType:"present",mode:2,customCount:window.wecoin_amount-e.balance,productId:window.payGlobal.recharge_product_id,agreementVersion:window.payGlobal.agreement_version}),g.innerText=e.balance,w=e.balance,h.innerText="微信豆不足，购买全文还需支付",f.innerText=window.wecoin_amount-e.balance,N.isAndroid&&N.gtVersion("8.0.18",!0)?(y.innerText=`售价 ${(window.wecoin_amount-e.balance)/10}元`,y.style.display="",x.style.display="",b.checked=!!window.paySubscribeInfo.agreement_status,window.paySubscribeInfo.agreement_status||v.setAttribute("disabled","disabled")):v.innerText="去充值",A.show()):(m=!1,window.weui.alert("系统错误，请稍后重试"))}));else switch(m=!1,ve.reportPayAppmsg(18),e&&e.base_resp&&e.base_resp.ret){case 202600:window.weui.alert("文章已被删除");break;case 202601:window.weui.alert("由于文章被取消原创，不可付费阅读");break;case 202602:window.weui.alert("你已购买过该文章，无需重复购买",I);break;case 202604:e.appmsg_ban_reason_desc?window.weui.alert("此内容因"+e.appmsg_ban_reason_desc+"已被封禁，不支持付费"):window.weui.alert("此内容因违规已被封禁，不支持付费");break;case 202607:window.weui.alert("暂不支持Google Play支付，前往微信官网下载最新版微信，即可正常付费");break;case 202608:location.replace("https://support.weixin.qq.com/update/");break;case 202609:window.weui.alert("你已成为该公众号的黑名单用户，暂时无法付费");break;case 202612:window.weui.alert("此帐号付费功能已被封禁，不支持付费");break;case 202617:window.weui.alert("青少年模式下不可付费"),U.setSum(232209,0,1);break;case 202623:window.weui.alert("帐号迁移中，请稍后访问");break;case 202624:window.weui.alert("此内容来自于迁移前的帐号，不支持付费");break;default:ve.report110809(14),window.weui.alert("订单创建失败，请稍后重试")}},error(){m=!1,window.weui.alert("系统错误，请稍后重试")},complete(){X.hide()}})}else X.show("生成订单中"),R({url:"/mp/paysub?action=create_order",type:"POST",dataType:"json",data:{__biz:window.biz,mid:window.mid,idx:window.idx,sn:window.sn,version:window.clientversion.htmlDecode(),is_from_pc:window.jump2pay},async:!0,success:e=>{if(e&&e.base_resp&&0===e.base_resp.ret){ve.report110809(13),ve.report110809ForDevice(36);const t=Math.round(new Date/1e3);if(N.isIOS){const n=e.iap_info;if(O.invoke("requestVirtualPayment",{appID:n.appid,priceLevel:n.price_level,busiType:23,busiId:n.busi_id,productDesc:n.desc,sign:n.sign,extInfo:n.ext_info},(n=>{console.log("requestVirtualPayment res: ",n),n.err_msg.indexOf("ok")>-1?(ve.report110809(15),ve.reportPay(t,1,e.order_id),I()):n.err_msg.indexOf("cancel")>-1?(m=!1,ve.report110809(28),ve.reportPay(t,2,e.order_id),console.log("pay cancel")):n.err_msg.indexOf("fail")>-1?(m=!1,ve.report110809(16),ve.reportPay(t,3,e.order_id,n.err_msg,n.err_code,n.err_domain),window.weui.alert(n.err_msg.slice(n.err_msg.indexOf("fail")+4))):(m=!1,window.weui.alert(n.err_msg))})),window.payShowIAPPrice){let e=setTimeout((()=>{e=null,console.log("getIAPProductInfo timeout"),ve.reportOverseaPay("",0,2,0,"",2,"")}),3e3);const t=Date.now();O.invoke("handleMPPageAction",{action:"getIAPProductInfo",productId:window.payProductId},(n=>{if("number"!=typeof e)return;clearTimeout(e);const i=Date.now()-t;if(console.log("getIAPProductInfo",n,i+"ms"),-1!==n.err_msg.indexOf(":ok")){if(ve.report110809(41),window.payProductId!==n.productId)return void ve.report110809(44);window.IAPProductInfo?window.IAPProductInfo.currencyCode!==n.currencyCode&&ve.report110809(43):window.oriProductFee&&"CNY"!==n.currencyCode&&ve.report110809(43),ve.reportOverseaPay(n.currencyCode,100*n.price.toFixed(2),2,i,n.countryCode,0,n.err_msg+(n.err_desc?"__"+n.err_desc:""))}else ve.report110809(42),ve.reportOverseaPay("",0,2,0,"",1,n.err_msg+(n.err_desc?"__"+n.err_desc:""))}))}}else{const n=e.midas_info;window.h5sdk.directPay({sandbox:!!n.sandbox,ontimeout(){m=!1,window.weui.alert("支付超时，请稍后重试")},methods:{onPayEnd:(n,i)=>{console.log("directPay res: ",n,i),1===n?(ve.report110809(17),ve.reportPay(t,1,e.order_id,i,n),I()):-1===n&&/:cancel$/.test(i)?(m=!1,ve.report110809(29),ve.reportPay(t,2,e.order_id,i,n),console.log("pay cancel")):(m=!1,ve.report110809(18),ve.reportPay(t,3,e.order_id,i,n),window.weui.alert("支付失败，请稍后重试"))}}},{pf:n.pf,appid:n.appid,type:"goods",openid:n.openid,extend:{hideOfferName:1},goodstokenurl:n.url_params,usewxappid:"1",wx_h5pay:0,direct_pay_channel:"wechat"})}}else switch(m=!1,e&&e.base_resp&&e.base_resp.ret){case 202600:window.weui.alert("文章已被删除");break;case 202601:window.weui.alert("由于文章被取消原创，不可付费阅读");break;case 202602:window.weui.alert("你已购买过该文章，无需重复购买",I);break;case 202604:e.appmsg_ban_reason_desc?window.weui.alert("此内容因"+e.appmsg_ban_reason_desc+"已被封禁，不支持付费"):window.weui.alert("此内容因违规已被封禁，不支持付费");break;case 202607:window.weui.alert("暂不支持Google Play支付，前往微信官网下载最新版微信，即可正常付费");break;case 202608:location.replace("https://support.weixin.qq.com/update/");break;case 202609:window.weui.alert("你已成为该公众号的黑名单用户，暂时无法付费");break;case 202612:window.weui.alert("此帐号付费功能已被封禁，不支持付费");break;case 202617:window.weui.alert("青少年模式下不可付费"),U.setSum(232209,0,1);break;default:ve.report110809(14),window.weui.alert("订单创建失败，请稍后重试")}},error(){m=!1,window.weui.alert("系统错误，请稍后重试")},complete(){X.hide()}})}};j.tap(i,C),j.tap(o.getElementsByClassName("js_pay_btn")[0],C)}}})(),(()=>{try{if(anchor_tree_msg){const e=Date.now(),t=document.getElementById("js_content"),n=anchor_tree_msg?JSON.parse(anchor_tree_msg).anchor_tree:[];Sn.init(t,n),W.saveSpeeds({sample:1,uin:uin,pid:"https:"==protocol?462:417,speeds:{sid:38,time:Date.now()-e}}),W.send()}}catch(e){"undefined"!=typeof WX_BJ_REPORT&&WX_BJ_REPORT.BadJs&&WX_BJ_REPORT.BadJs.onError(e,{anchor_tree_msg:anchor_tree_msg})}})();let r=/^http(s)?:\/\/mp\.weixin\.qq\.com\//g;try{if(top!=window&&(!top||top&&location.href&&r.test(location.href))&&!window.isSg)throw new Error("in iframe")}catch(es){let t="";(new Image).src=("http://mp.weixin.qq.com/mp/jsreport?key=4&content=biz:"+biz+",mid:"+mid+",uin:"+uin+"[key4]"+t+"&r="+Math.random()).substr(0,1024)}if(window.isInWeixinApp()&&/#rd$/.test(location.href)&&!window.isWeixinCached&&!window.__second_open__&&!N.isWxWork){let e=-1!=location.href.indexOf("?")?"&":"?";location.replace(location.href.replace(/#rd$/,e+"rd2werd=1#wechat_redirect"))}const d=!N.isWp&&-1==navigator.userAgent.indexOf("MicroMessenger"),l=d?null:new ye({is_https_res:is_https_res});window.logs.webplog={lossy:0,lossless:0,alpha:0,animation:0,total:0};let p=-1!=navigator.userAgent.indexOf("TBS/"),_=function(e,t){!function(e,t){let n=new Image;n.onload=function(){let i=n.width>0&&n.height>0;t(e,i)},n.onerror=function(){t(e,!1)},n.src="data:image/webp;base64,"+{lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"}[e]}(e,(function(e,n){if(window.logs.webplog[e]=n?1:0,window.logs.webplog.total++,4==window.logs.webplog.total){let e=window.logs.webplog,n=Math.random();p&&n<=1&&(e.lossy=e.lossless=e.alpha=1,window.logs.webplog=e),t(!!!1)}}))};if(window.webp=!1,function(e){let t=document.getElementsByTagName("img"),n=!1,i=!1;for(let r=0,d=t.length;r<d;r++){let e=t[r].getAttribute("data-src");e&&e.canHevc()&&(n=!0),e&&e.isGif()&&(i=!0)}let o=N.gtVersion("6.5.13",!0)&&i,a=N.gtVersion("6.8.0",!0)&&n,s=!1;try{top.window.document}catch(es){s=!0}N.isIOS&&(o||a)&&!s?(console.info("[HEVC代理] 当前版本可以启用HEVC代理"),O.invoke("imageProxyInit",{},(function(t){t.err_msg.indexOf(":ok")>-1?(Qa=t.serverUrl,window.__addIdKeyReport("28307",117)):t.err_msg.indexOf(":fail")>-1&&window.__addIdKeyReport("28307",118),e()}))):e()}((function(){var e;_("lossy",e=function(e){window.webp=e,e&&window.localStorage&&window.localStorage.setItem&&window.localStorage.setItem("webp","1"),window.logs.img={download:{},read:{},load:{}};let t=document.getElementById("js_cover");if(t){let n=t.getAttribute("data-src");n&&(n.isCDN()&&(n=n.imgChange640(),e&&(n=z.addParam(n,"tp","webp",!0)),n=z.addParam(n,"wxfrom","5",!0),is_https_res||Ka?n=n.http2https():"http:"!=location.protocol&&-1==navigator.userAgent.indexOf("MicroMessenger")||(n=n.https2http())),setTimeout((function(){t.onload=function(){ge.setProperty(t,"height","auto","important"),ge.setProperty(t,"visibility","visible","important")},t.setAttribute("src",n)}),0),window.logs.img.read[n]=!0,window.logs.img.load[n]=!0,t.removeAttribute("data-src"))}function n(e){return parseInt(e,10)||0}function i(e,t,i){(i.width<40||i.height<40)&&(n(i.style.width)<40||n(i.style.height)<40)||(i.classList.remove("img_loading"),i.classList.contains("img_loadederror")||(i.classList.add("img_loadederror"),i.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",window.__addIdKeyReport("28307",51),i.bindRetry||(i.bindRetry=!0,j.on(i,"click",(()=>(window.__addIdKeyReport("28307",66),o(i),function(e){(e.width<40||e.height<40)&&(n(e.style.width)<40||n(e.style.height)<40)||e.classList.add("img_loading")}(i),e=e.https2http(),t.__retryload++,t.src=z.addParam(e,"retryload",t.__retryload,!0),!1))))))}function o(e){e.classList.remove("img_loading"),e.classList.remove("img_loadederror")}window.logs.outer_pic=0;let a=document.getElementsByTagName("img");for(let c=0,l=a.length;c<l;c++){let e=a[c].getAttribute("data-src");a[c].getAttribute("src"),e&&e.isGif()&&a[c].classList.add("__bg_gif")}let s=document.getElementsByClassName("__bg_gif");for(let c=0,l=s.length;c<l;++c)s[c].setAttribute("data-order",c);let r=function(e){try{let t=e.childNodes,n=getComputedStyle(e);(n.backgroundImage.match(/https\:\/\/mmbiz\.qpic\.cn/)||n.backgroundImage.match(/http\:\/\/mmbiz\.qpic\.cn/))&&window.__addIdKeyReport("111535",2);for(let e=0;e<t.length;e++)"a"!=t[e].tagName.toLowerCase()&&r(t[e])}catch(es){}};try{let e=document.getElementsByTagName("a");for(let t=0;t<e.length;t++){let n=e.item(t);null!=(n.getAttribute("href")||"").match(/^http/)&&r(n)}}catch(es){}let d=!1;window.isCartoonCopyright||window.is_care_mode||new he({attrKey:"data-src",imgOccupied:!0,crossOrigin:!0,accessibilityCallback:function(e){O.invoke("getUserConfig",{},(function(t){t.isAccessibilityMode&&(window.localStorage.setItem("isMpUserAccessibility","1"),e())}))},lazyloadHeightWhenWifi:function(){let e,t=1,n=1;e=window.svr_time?new Date(1e3*window.svr_time):new Date;let i=e.getHours();return i>=20&&i<23&&(t=.5,n=0),{bottom:t,top:n}},inImgRead:function(e,t){e&&(window.logs.img.read[e]=!0)},changeSrc:function(e,t){if(!t)return"";let n=t;if(t.isCDN()){n=n.imgChange640();let e,t=window.navigator.userAgent,i=/TBS\/([\d\.]+)/i,o=t.match(i);o&&o[1]&&(e=parseInt(o[1]));let a,s=/XWEB\/([\d\.]+)/i,r=t.match(s);r&&r[1]&&(a=parseInt(r[1]));let d=1e3,c=window.user_uin||0,l=0!==c&&Math.floor(c/100)%1e3<d,p=(e>=43305&&44206!=e||a>=16)&&n.isGif(),_=0!==c&&Math.floor(c/100)%1e3<=500,m=a>=564&&n.canHevc()&&N.gtVersion("6.8.0",!0)&&_;l&&(p||m)?(n=z.addParam(n,"tp","wxpic",!0),window.__addIdKeyReport("28307",91)):window.webp&&(n=z.addParam(n,"tp","webp",!0),window.__addIdKeyReport("28307",84)),n=z.addParam(n,"wxfrom","5",!0),is_https_res||Ka?(n=n.http2https(),window.__addIdKeyReport("28307",77)):"http:"!=location.protocol&&-1==navigator.userAgent.indexOf("MicroMessenger")||(n=n.https2http(),window.__addIdKeyReport("28307",70))}else try{new RegExp("^http(s)?://((mmbiz.qpic.cn/.*)|(m.qpic.cn/.*)|(mmsns.qpic.cn/.*)|(shp.qpic.cn/.*)|(wx.qlogo.cn/.*)|(mmbiz.qlogo.cn/.*)|((a|b)[0-9]*.photo.store.qq.com/.*)|(mp.weixin.qq.com/.*)|(res.wx.qq.com/.*))").test(t)||(window.__addIdKeyReport("28307",9),window.logs.outer_pic++)}catch(es){}n=n.replace(/^http\:\/\/(a|b)(\d)+\.photo\.store\.qq\.com/g,"http://m.qpic.cn"),/^http(s)?:\/\/m\.qpic\.cn([\/?].*)*$/i.test(n)&&!window.webp&&(n=z.addParam(n,"t","",!0)),n=z.addParam(n,"wx_lazy","1",!0);let i=N.gtVersion("6.5.13",!0)&&!N.eqVersion("7.0.9")&&n.isGif(),o=N.gtVersion("6.8.0",!0)&&n.canHevc()&&!(N.eqVersion("7.0.9")&&n.isGif());return Qa&&(i||o)&&(window.__addIdKeyReport("28307",106),n=z.addParam(n,"tp","wxpic",!0),n=Qa+"hevc?url="+encodeURIComponent(n)+"&type="+n.getOriginImgType()),"anonymous"==e.crossOrigin&&(n=z.addParam(n,"wx_co","1",!0)),window.logs.img.load[n]=!0,oe.log("[Appmsg] image_load_event_change_src. originsrc:"+t+"  ^^^ newsrc : "+n),e.start_load_time=+new Date,n},onerror:function(e,t,n){let o=t&&t.__retryload||0;if(o>=2&&i(e,t,n),!e||o>2)return;if(!e.isCDN()){if(!Qa)return;if(-1==e.indexOf(Qa))return}let a=0==e.indexOf("https://")?7:0;if(window.__addIdKeyReport("28307",72+a),o<=1&&window.__addIdKeyReport("28307",75+1*o+a),e.isWxpic()?(window.__addIdKeyReport("28307",93),window.WX_BJ_REPORT&&WX_BJ_REPORT.BadJs.report("imgError:hevc",e,{mid:"mmbizwap:imgMonitor",view:"wap_appmsg"}),o<=1&&window.__addIdKeyReport("28307",96+1*o)):e.isWebp()?(window.__addIdKeyReport("28307",86),window.WX_BJ_REPORT&&WX_BJ_REPORT.BadJs.report("imgError:webp",e,{mid:"mmbizwap:imgMonitor",view:"wap_appmsg"}),o<=1&&window.__addIdKeyReport("28307",89+1*o)):window.WX_BJ_REPORT&&WX_BJ_REPORT.BadJs.report("imgError",e,{mid:"mmbizwap:imgMonitor",view:"wap_appmsg"}),Qa&&e.indexOf(Qa)>-1&&window.__addIdKeyReport("28307",108),o<2){if(o++,t.__retryload=o,1==o&&e.indexOf("http://")>-1?(e=e.http2https(),window.__addIdKeyReport("28307",60),window.__addIdKeyReport("28307",77)):1==o&&e.indexOf("https://")>-1?(window.__addIdKeyReport("28307",61),window.__addIdKeyReport("28307",77)):2==o&&e.indexOf("mmbiz.qpic.cn")>-1&&(e=e.replace("mmbiz.qpic.cn","mmbiz.qlogo.cn")).indexOf(!1)&&(e=e.http2https()),Qa&&e.indexOf(Qa)>-1){let t=e.split("hevc?url=")[1];t=t.split("&type")[0],t=decodeURIComponent(t),t=t.replace("tp=wxpic",""),e=t.https2http()}t.start_load_time=+new Date,t.src=z.addParam(e,"retryload",o,!0)}window.__has_imgfailed||(window.__has_imgfailed=!0,window.__addIdKeyReport("28307",65)),oe.log("[Appmsg] image_load_event_on_error. src:"+e),t.setAttribute("data-fail",1);try{if("[object Array]"==Object.prototype.toString.call(t.lazyLoadOnerror))for(let e=0,n=t.lazyLoadOnerror.length;e<n;e++)"function"==typeof t.lazyLoadOnerror[e]&&t.lazyLoadOnerror[e].call(t)}catch(es){}let s=10;/tp\=webp/.test(e)&&(s=11),(new Image).src="http://mp.weixin.qq.com/mp/jsreport?key="+s+"&content="+encodeURIComponent(e)+"["+uin+"]&r="+Math.random()},onload:function(e,t){if(!window.__second_open__&&!d){let e=window.performance||window.msPerformance||window.webkitPerformance;if(!e||!e.timing)return;let t=window.location.protocol;W.saveSpeeds({uin:uin,pid:"https:"==t?462:417,speeds:{sid:35,time:Date.now()-window.performance.timing.navigationStart}}),W.send(),d=!0}o(t),l&&l.bindEvent(t),t.gray&&!t.loadGif&&((t.width||t.naturalWidth)<120||(t.height||t.naturalHeight)<120?t.autoTap&&t.autoTap():t.span&&t.span.children&&t.span.children.item(0)&&(t.span.children.item(0).style.display=""));let n=t&&t.__retryload||0;if(n>2)return;oe.log("[Appmsg] image_load_event_onload_image. src:"+e+"  ^^^  retryloadtimes: "+n),t.setAttribute("data-fail",0),function(e){try{let t=e,n=t.getAttribute("data-src");if(!/^https?\:\/\/mmbiz\.qpic\.cn/.test(n))return;let i=t.parentNode,o=!1;T.hasClass(i,"js_jump_icon")&&(o=!0);let a=!1;for(;i.tagName&&"body"!=i.tagName.toLowerCase();){if("a"==i.tagName.toLowerCase()){null!=(i.getAttribute("href")||"").match(/^http/)&&(a=!0);break}i=i.parentNode}if(o&&!a){let e=t.parentNode,n=e.parentNode;if(n){let t=document.createDocumentFragment();for(;e.firstChild;)t.appendChild(e.firstChild);n.insertBefore(t,e),n.removeChild(e)}}else if(!o&&a){let e=document.createElement("span"),n=getComputedStyle(t);"static"!=n.positon&&(e.style.position=n.positon),e.style.left=n.left,e.style.top=n.top,e.style.right=n.right,e.style.bottom=n.bottom,e.style.margin=n.margin,T.addClass(e,"js_jump_icon"),T.addClass(e,"h5_image_link"),t.style.position="static",t.style.margin="0px",t.parentNode.insertBefore(e,t),e.appendChild(t),window.__addIdKeyReport("111535",0)}}catch(es){}}(t);try{if("[object Array]"==Object.prototype.toString.call(t.lazyLoadOnload))for(let e=0,n=t.lazyLoadOnload.length;e<n;e++)"function"==typeof t.lazyLoadOnload[e]&&t.lazyLoadOnload[e].call(t)}catch(es){}let i=0==e.indexOf("https://")?7:0;window.__addIdKeyReport("28307",71+i),n<=1&&window.__addIdKeyReport("28307",73+1*n+i),e.isWxpic()?(window.__addIdKeyReport("28307",92),n<=1&&window.__addIdKeyReport("28307",94+1*n)):e.isWebp()&&(window.__addIdKeyReport("28307",85),n<=1&&window.__addIdKeyReport("28307",87+1*n)),Qa&&e.indexOf(Qa)>-1&&window.__addIdKeyReport("28307",107),window.__has_imgsucceed||(window.__has_imgsucceed=!0,window.__addIdKeyReport("28307",64)),1==n&&e.indexOf("http://")>-1&&window.__addIdKeyReport("28307",50),1==n&&e.indexOf("https://")>-1&&window.__addIdKeyReport("28307",52);let a=Math.random(),s=+new Date-t.start_load_time;s&&0==e.indexOf("https://")&&a<.5?(window.__addIdKeyReport("27822",121,s),window.__addIdKeyReport("27822",122)):s&&a<5e-4&&(window.__addIdKeyReport("27822",124,s),window.__addIdKeyReport("27822",125)),""===t.style.filter||"none"===t.style.filter||/translate(Z|3d)\(/.test(t.style.transform)||(t.style.transform+=" translateZ(0)",t.style.webkitTransform+=" translateZ(0)")},detect:function(e){if(!e||!e.time||!e.loadList)return;let t=e.time,n=e.loadList;window.logs&&window.logs.img&&window.logs.img.download&&(window.logs.img.download[t]=n)},container:document.getElementById("page-content")})}),_("lossless",e),_("alpha",e),_("animation",e)})),l){const e=document.getElementById("js_cover");l.add({container:document.getElementById("js_content"),imgs:e?[e]:[]})}ro(),new c({store:h,render:e=>e(ii)}).$mount("#content_bottom_area"),new c({store:h,render:e=>e(li)}).$mount("#page_bottom_area"),function(){let e=document.getElementById("profileBt"),t=document.getElementById("copyright_info"),n=[];if(e){let t="57";"28"==window.source&&(t="96"),"31"===window.source&&(t="103"),"30"===window.source&&(t="102"),"29"==window.source&&(t="39"),"15"==window.source&&(t="121"),n.push({dom:e,username:user_name,profileReportInfo:window.profileReportInfo||"",scene:t})}t&&source_encode_biz&&n.push({dom:t,source_encode_biz:source_encode_biz,scene:"161"});let i=document.getElementById("js_share_headimg");i&&n.push({dom:i,username:source_username,scene:"172"});let o=document.getElementById("js_share_author");o&&n.push({dom:o,username:source_username,scene:"172"});for(let a=0,s=n.length;a<s;a++)!function(e){j.on(e.dom,"click",(function(t){if("copyright_info"==e.dom.id&&source_encode_biz)Ln.card_click_report({scene:"0"}),C.goProfile({biz:e.source_encode_biz,scene:e.scene},{username:source_username,scene:e.scene+""});else{if(oe.log("[Appmsg] profile_click_before_loadprofile: username:"+e.username+", scene:"+e.scene),ce.profileReport({hotspotjson:JSON.stringify({hotspotinfolist:window.hotspotInfoList})}),profileReportInfo){let e=String(profileReportInfo).split("_");3==e.length&&R({url:"/mp/ad_biz_info?action=report&__biz="+window.biz+"&report_type=2&aid="+e[1]+"&tid="+e[2],type:"GET",dataType:"json",async:!0,success:function(e){}})}1==isprofileblock?O.invoke("openUrlWithExtraWebview",{url:"https://mp.weixin.qq.com/mp/profileblock?__biz="+window.biz+"#wechat_redirect",openType:1},(function(e){-1==e.err_msg.indexOf("ok")&&(location.href="https://mp.weixin.qq.com/mp/profileblock?__biz="+window.biz+"#wechat_redirect")})):O.invoke("profile",{username:e.username,profileReportInfo:e.profileReportInfo||"",scene:e.scene+"",bizuin:1*window.atob(window.biz)||0},(function(t){window.__addIdKeyReport("28307","1"),oe.log("[Appmsg] profile_click_after_loadprofile: username:"+e.username+", scene:"+e.scene+", profileReportInfo:"+e.profileReportInfo+", res.err_msg:"+t.err_msg)}))}t.preventDefault()})),N.isWp&&e.dom.setAttribute("href","weixin://profile/"+e.username)}(n[a])}(),function(){function e(){let e=function(){if("hidden"in document)return"hidden";let e=["webkit","moz","ms","o"];for(let t=0;t<e.length;t++)return e[t]+"Hidden";return null}();return!!e&&document[e]}function t(t){if(e())for(let e=0;e<window.originalVideoAdFrames.length;e++)window.originalVideoAdFrames[e].contentWindow.postMessage({action:"pauseAd",value:""},"*");else window.originalVideoAdCurrentFrame&&window.originalVideoAdCurrentFrame.contentWindow.postMessage({action:"playAd"},"*")}document.webkitVisibilityState?document.addEventListener("webkitvisibilitychange",t,!1):document.msVisibilityState?document.addEventListener("msvisibilitychange",t,!1):document.visibilityState&&document.addEventListener("visibilitychange",t,!1)}();try{let e=document.getElementById("js_author_name");if(e){let t="";j.on(e,"click",(function(n){return!!T.hasClass(e,"rich_media_meta_link")&&(window.is_temp_url?(window.weui.alert("预览状态下不能操作"),!1):!!e.getAttribute("data-rewardsn")&&(1==e.getAttribute("data-canreward")&&(t="https://mp.weixin.qq.com/mp/author?action=show&author_id="+author_id+"&rewardsn="+e.getAttribute("data-rewardsn")+"&timestamp="+e.getAttribute("data-timestamp")+"&__biz="+window.biz+"&appmsgid="+window.appmsgid+"&idx="+window.idx+"&scene=142&rscene=129&from_scene="+window.source+"&from_subscene="+window.subscene+"&from_enterid="+window.enterid+"&from_sessionid="+window.sessionid+"&is_fans="+window.isFans+"#wechat_redirect",!N.isInMiniProgram&&void(-1!=navigator.userAgent.indexOf("MicroMessenger")&&(N.isIOS||N.isAndroid||N.isWp)?(window.__addIdKeyReport("110809","1"),O.invoke("openUrlWithExtraWebview",{url:t,openType:1},(function(e){-1==e.err_msg.indexOf("ok")&&(location.href=t)}))):location.href=t))))}))}}catch(es){}new fe({container:document.getElementById("js_content"),changeHref:function(e,t){if(!e||0!=e.indexOf("http://mp.weixin.qq.com/")&&0!=e.indexOf("https://mp.weixin.qq.com/")){if(18==ban_scene)return"/mp/ban?action=check&__biz="+biz+"&mid="+mid+"&idx="+idx+"&scene="+ban_scene+"#wechat_redirect";if(0!=e.indexOf("http://mp.weixinbridge.com/mp/wapredirect")&&0!=e.indexOf("https://support.weixin.qq.com/cgi-bin/mmsupport-bin/showredpacket"))return"http://mp.weixinbridge.com/mp/wapredirect?url="+encodeURIComponent(e)+"&action=appmsg_redirect&uin="+uin+"&biz="+biz+"&mid="+mid+"&idx="+idx+"&type="+t+"&scene=0"}else{let t="&";-1==(e=(e=(e=e.replace(/#rd\s*$/,"")).replace(/#wechat_redirect\s*$/,"")).replace(/[\?&]scene=21/,"")).indexOf("?")&&(t="?"),e+=t+"scene=21#wechat_redirect"}return e}}),function(){if(!document.getElementsByClassName)return;let e=document.getElementsByClassName("js_product_section"),t=document.getElementsByClassName("js_product_a"),n=[];function i(e){let t=window.pageYOffset||document.documentElement.scrollTop;for(let i=0;i<n.length;++i){let e=n[i];if(!e.isReport){let n=e.offsetTop;t<=n&&t+S.getInnerHeight()>=n&&(e.isReport=!0,(new Image).src="/mp/appmsgreport?action=appmsg_recom&type=1&__biz="+biz+"&ascene="+(window.ascene||-1)+"&mid="+mid+"&idx="+idx+"&sn="+sn+"&product_id="+e.product_id+"&order="+e.order+"&r="+Math.random())}}}for(let o=0;o<e.length;++o){let t=e[o];t.dataset&&t.dataset.product_id&&t.dataset.order&&n.push({dom:t,offsetTop:t.offsetTop,product_id:t.dataset.product_id||"",order:t.dataset.order||"",isReport:!1})}n.length>0&&(j.on(window,"scroll",i),i());for(let o=0;o<t.length;++o)!function(e){j.on(e,"click",(function(t){let n=e.dataset||{};return(new Image).src="/mp/appmsgreport?action=appmsg_recom&type=2&__biz="+biz+"&ascene="+(window.ascene||-1)+"&mid="+mid+"&idx="+idx+"&sn="+sn+"&product_id="+(n.product_id||"")+"&order="+(n.order||"")+"&r="+Math.random(),!!n.href&&(setTimeout((function(){location.href="http://mp.weixinbridge.com/mp/wapredirect?url="+encodeURIComponent(n.href)+"&action=appmsg_redirect&uin="+uin+"&biz="+biz+"&mid="+mid+"&idx="+idx+"&scene=0"}),300),!1)}),!0)}(t[o])}(),x.init({hasSpAd:!0,disableScroll:window.isPaySubscribe&&!window.isPaid&&window.jump2pay||t}),function(){try{let e=document.getElementById("js_content");if(!e||!e.querySelectorAll)return;let t=function(e){let t=e.getAttribute("class");if(t){let n=t.split(/\s+/),i=[];for(let e=0,t=n.length;e<t;++e){let t=n[e];if(t&&-1!=window.whiteList.indexOf(t))i.push(t);else for(let e=0,n=window.whiteListReg.length;e<n;e++)if(window.whiteListReg[e].test(t)){i.push(t);break}}e.setAttribute("class",i.join(" "))}};Array.prototype.forEach.call(e.querySelectorAll("*"),(e=>{if(e&&e.tagName){"iframe"!==e.tagName.toLowerCase()?t(e):"video_ad_iframe"===e.getAttribute("class")&&e.setAttribute("class","")}}))}catch(es){console.error(es)}}(),window.originalVideoAdFrames=[],window.originalVideoAdCurrentFrame=null,window.originalVideoAdFramesUnsetList=[],window.addEventListener("message",(function(e){let t="",n=document.getElementsByTagName("iframe");if(e.data&&"originalVideoAdNeedData"==e.data.action&&e.data.vid)if(window.originalVideoAdFramesAdData){window.originalVideoAdFramesAdData&&window.originalVideoAdFramesAdData[e.data.vid]&&(t=window.originalVideoAdFramesAdData[e.data.vid]);for(let i=0;i<n.length;i++)n[i].dataset&&n[i].dataset.mpvid==e.data.vid&&n[i].contentWindow.postMessage({action:"receiveOriginalVideoData",vid:e.data.vid,adData:t},"*")}else console.log(e.data.vid," has no ad data yet"),window.originalVideoAdFramesUnsetList.push(e.data.vid)})),window.fromWeixinCached||io();k.getAdData(window.reportVid);let u=[];voiceList&&voiceList.voice_in_appmsg&&voiceList.voice_in_appmsg.length>0&&(u=voiceList.voice_in_appmsg);ho(u),mo(),(()=>{const e=document.querySelectorAll(xo.tagName);if(!(e.length<=0))for(let t=0,n=e.length;t<n;t++){let n=e[t],i=[];try{i=JSON.parse(window.decodeURIComponent(n.getAttribute("data-keywords")))}catch(es){U.setSum(110809,50,1)}if(i.length){let e={nickname:window.nickname,avatar:window.round_head_img,keywords:i};xo.keywords=i,Io({data:e,node:n})}}})(),(()=>{const e=document.querySelectorAll(fo.tagName);for(let n=0,i=e.length;n<i;n++){let t=e[n];const i={id:decodeURIComponent(t.getAttribute("data-id")||""),name:decodeURIComponent(t.getAttribute("data-name")||""),address:decodeURIComponent(t.getAttribute("data-address")||""),img:decodeURIComponent(t.getAttribute("data-img")||""),longitude:decodeURIComponent(t.getAttribute("data-longitude")||""),latitude:decodeURIComponent(t.getAttribute("data-latitude")||""),type:decodeURIComponent(t.getAttribute("data-type")||"")};vo({data:i,node:t})}const t=document.getElementsByClassName("js_poi_entry");for(let n=0;n<t.length;n++)(e=>{const n=t[e];fo.poiDom.push(n),j.on(n,"tap",(e=>{e.stopPropagation(),e.preventDefault(),T.addClass(n,"wx_tap_link"),K.highlightEle(n);const t={id:decodeURIComponent(n.getAttribute("data-id")||""),name:decodeURIComponent(n.getAttribute("data-name")||""),address:decodeURIComponent(n.getAttribute("data-address")||""),img:decodeURIComponent(n.getAttribute("data-img")||""),longitude:decodeURIComponent(n.getAttribute("data-longitude")||""),latitude:decodeURIComponent(n.getAttribute("data-latitude")||""),type:decodeURIComponent(n.getAttribute("data-type")||"")};return t.longitude&&t.latitude&&t.name&&t.address&&(B.report(19937,Object.assign({},fo.commonReportData,{type:1,actiontype:2})),U.setSum(110809,57,1),yo(t)),!1}),!0),j.on(n,"click",(e=>{e.preventDefault(),e.stopPropagation()}),!0)})(n);bo(),j.on(window,"scroll",bo)})(),Jn(),1===window.show_msg_voice&&(co(),console.log("load voicemsg"));!window.__appmsgCgiData||1!=window.__appmsgCgiData.wxa_product&&1!=window.__appmsgCgiData.wxa_cps||ra();I.init(),document.getElementsByTagName("mp-qa").length&&Dt.renderQaCard({mid:window.mid,idx:window.idx,isLogin:!!window.is_login,userUin:window.user_uin,biz:window.biz,itemShowType:window.item_show_type,sessionId:window.sessionid,enterId:window.enterid,scene:window.source,subScene:window.subscene});document.getElementsByTagName("mpvideosnap")&&document.getElementsByTagName("mpvideosnap").length&&aa();document.getElementsByTagName("mpprofile")&&document.getElementsByTagName("mpprofile").length&&Aa();if(document.getElementsByTagName("mp-wxaproduct").length){const e=window.__appmsgCgiData.minishopCardData?JSON.parse(decodeURIComponent(window.__appmsgCgiData.minishopCardData)):"";Ge({biz:window.biz,mid:window.mid,idx:window.idx,source:1*window.source,subscene:1*window.subscene,enterid:1*window.enterid,minishopCards:e})}function w(){let e=window.performance||window.msPerformance||window.webkitPerformance;if(e.timing){let t=e.timing;oe.log("[Appmsg] dns:"+(t.domainLookupEnd-t.domainLookupStart)+"^^^ ssl:"+(0==t.secureConnectionStart?0:t.connectEnd-t.secureConnectionStart)+"^^^ tcp:"+(t.connectEnd-t.connectStart)+"^^^ request:"+(t.responseStart-t.requestStart)+"^^^ getPackageTime:"+(t.responseEnd-t.responseStart)+"^^^ domCententLoaded:"+(t.domContentLoadedEventStart-t.domLoading)+"^^^ domComplete:"+(t.domComplete-t.domLoading)+"^^^ firstViewTime:"+(real_show_page_time-t.navigationStart)+"^^^ interactiveTime:"+(window.page_endtime-t.navigationStart)),window.navigator.userAgent,setTimeout((function(){t.loadEventEnd&&oe.log("[Appmsg] onload:"+(t.loadEventEnd-t.loadEventStart))}),100)}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),""==document.getElementById("js_content").innerHTML.trim()&&U.setSum(24729,94,1),Math.random()<.001&&document.getElementById("js_read_area3")&&document.getElementById("js_read_area3").innerText&&document.getElementById("js_read_area3").innerText.indexOf("Pageview")>-1&&U.setSum(24729,95,1),window.__wxjs_is_wkwebview&&U.setSum(28307,67,1)}O.invoke("getNetworkType",{},(function(e){networkType=fa[e.err_msg],"network_type:edge"!=e.err_msg&&"network_type:wwan"!=e.err_msg||(e.detailtype&&"4g"==e.detailtype||e.subtype&&"4g"==e.subtype)&&(networkType="4g"),ha()})),void j.on(window,"load",ha,!1),new Rn({biz:window.biz,isPaySubscribe:window.isPaySubscribe,container:document.getElementById("js_content"),logid:18504,baseData:["",window.biz,window.mid,window.idx,window.location.href,window.msg_title]}),setTimeout((function(){j.tap(document.getElementById("copyright_logo"),(function(){let e="http://kf.qq.com/touch/sappfaq/150211YfyMVj150326iquI3e.html";window.__second_open__?O.invoke("openUrlWithExtraWebview",{url:e,openType:1},(function(t){-1==t.err_msg.indexOf("ok")&&(location.href=e)})):location.href=e})),De(),A.init({dom:document.getElementById("js_report_article3"),title:window.msg_title.htmlDecode(),link:window.msg_link}),function(){if(d){document.title=window.msg_title.htmlDecode(),T.addClass(s,"not_in_mm");let e=document.getElementById("js_pc_qr_code_img");if(e){let t=10000004,n=document.referrer;if(0==n.indexOf("http://weixin.sogou.com")?t=10000001:0==n.indexOf("https://wx.qq.com")&&(t=10000003),window.isSg)e.setAttribute("src",sg_qr_code.htmlDecode());else{e.setAttribute("src","/mp/qrcode?scene="+t+"&size=102&__biz="+biz+"&mid="+mid+"&idx="+idx+"&sn="+sn+"&send_time="+send_time),(new Image).src="/mp/report?action=pcclick&__biz="+biz+"&uin="+uin+"&scene="+t+"&r="+Math.random()}document.getElementById("js_pc_qr_code").style.display="block"}let t=document.getElementById("js_profile_qrcode"),n=document.getElementById("js_profile_arrow_wrp"),i=document.getElementById("profileBt");if(t&&i&&n){let e=function(){let e=10000005,o=document.referrer;0==o.indexOf("http://weixin.sogou.com")?e=10000006:0==o.indexOf("https://wx.qq.com")&&(e=10000007);let a=document.getElementById("js_profile_qrcode_img");if(a)if(window.isSg)a.setAttribute("src",sg_qr_code.htmlDecode());else{a.setAttribute("src","/mp/qrcode?scene="+e+"&size=102&__biz="+biz+"&mid="+mid+"&idx="+idx+"&sn="+sn+"&send_time="+send_time),(new Image).src="/mp/report?action=pcclick&__biz="+biz+"&uin="+uin+"&scene="+e+"&r="+Math.random()}return t.style.display="block",n.style.left=i.offsetWidth/2-8+"px",!1};j.on(i,"click",e),j.on(t,"click",e),j.on(document,"click",(function(e){let n=e.target||e.srcElement;n!=i&&n!=t&&(t.style.display="none")}))}}else{let e=document.getElementById("js_report_article3");e&&(e.style.display="")}}();let e=document.getElementsByTagName("map");for(let n=0,i=e.length;n<i;++n)e[n].parentNode.removeChild(e[n]);if(Ln.card_pv_report(),Math.random()<.01)try{let e="https://js.aq.qq.com/js/aq_common.js",t=document.createElement("script");t.src=e,document.getElementsByTagName("head")[0].appendChild(t)}catch(es){}let t=document.getElementById("js_close_temp");j.on(t,"click",(function(){t.parentNode.parentNode.removeChild(t.parentNode),T.removeClass(document.getElementById("js_article"),"preview_appmsg")}))}),1e3),function(){if(!P.os.ios||!("onorientationchange"in window))return;let e=[],t="onorientationchange"in window?"orientationchange":"resize",n=!1,i=function(){return 90===Math.abs(window.orientation)?1:2};1!==i()||n||(ve.report110809(63),window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.report("horizontal screen report",`biz: ${"function"==typeof window.atob?window.atob(window.biz):window.biz} | mid: ${window.mid} | idx: ${window.idx} | url: ${location.href}`,{mid:"mmbizwap:horizontal_screen",view:"wap_business"}),n=!0),e.push({ori:i(),scroll:window.pageYOffset||document.documentElement.scrollTop,istouchmove:!1});let o=(new Date).getHours();j.on(window,t,(function(){let t=e.length-2,a=i();if(Va=+new Date,t>=0){let n=e[t];n.ori,e[e.length-1].istouchmove||(o>=11&&o<=17&&window.__report(63),setTimeout((function(){window.scrollTo(0,n.scroll)}),100))}e.push({ori:a,scroll:window.pageYOffset||document.documentElement.scrollTop,istouchmove:!1}),1!==a||n||(ve.report110809(63),window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.report("horizontal screen report",`biz: ${"function"==typeof window.atob?window.atob(window.biz):window.biz} | mid: ${window.mid} | idx: ${window.idx} | url: ${location.href}`,{mid:"mmbizwap:horizontal_screen",view:"wap_business"}),n=!0)})),j.on(window,"scroll",(function(){let t=e.length-1,n=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,o=+new Date;if(-1!=Va){if(console.log("[横屏滚动检测]",o-Va),o-Va<500)return void(Va=-1)}else Va=-1;e[t].ori==i()&&(e[t].scroll=n,e[t].istouchmove=!0)}))}(),oe.log("[Appmsg] href:"+location.href+"^^^ ua:"+window.navigator.userAgent),window.addEventListener?window.addEventListener("load",w,!1):window.attachEvent&&window.attachEvent("onload",w);void(window.addEventListener&&document.getElementsByTagName("body")[0].addEventListener("copy",(function(){U.setSum(28307,18,1),N.isIOS&&U.setSum(28307,19,1),N.isAndroid&&U.setSum(28307,20,1)}),!1)),window.__observer&&window.__observer_data&&Ea();"undefined"!=typeof isSg&&function(){if(document.getElementById("js_report_article3")&&(document.getElementById("js_report_article3").style.display="none"),document.getElementById("js_toobar3")&&(document.getElementById("js_toobar3").style.display="none"),function(){let e=document.createElement("div");e&&(e.innerHTML=q.tmpl('\x3c!-- 发表留言 --\x3e\n<#if(window.new_appmsg){#>\n  <div id="js_cmt_mine" class="discuss_container_wrp" style="display:none;">\n    <div class="discuss_container editing access">\n        <div class="discuss_container_inner">\n          <div class="discuss_container_hd">\n            <h2 class="rich_media_title">\n                <#if(window.item_show_type == 10){#>\n                    <#=textPageTitle#>\n                <#}else{#>\n                    <#=window.msg_title.html(1)#>\n                <#}#>\n            </h2>\x3c!-- 标题要转义 --\x3e\n            <span id="log"></span>\n            <div class="frm_textarea_box_wrp">\n                <span class="frm_textarea_box">\n                    <#if(window.friend_comment_enabled == 1){#>\n                    \x3c!-- <textarea id="js_cmt_input" class="frm_textarea" placeholder="留言对朋友可见，被公众号筛选后，将对所有人可见。"></textarea> --\x3e\n                    <textarea id="js_cmt_input" class="frm_textarea" placeholder="留言将由公众号筛选后显示，对所有人可见。"></textarea>\n                    <#}else{#>\n                    <textarea id="js_cmt_input" class="frm_textarea" placeholder="留言将由公众号筛选后显示，对所有人可见。"></textarea>\n                    <#}#>\n                    <div class="emotion_tool">\n                        <span class="emotion_switch" style="display:none;"></span>\n                        <span id="js_emotion_switch" class="pic_emotion_switch_wrp">\n                            <img class="pic_default" src="<#=window.icon_emotion_switch#>" alt="">\n                            <img class="pic_active" src="<#=window.icon_emotion_switch_active#>" alt="">\n                            <img class="pic_default_primary" src="<#=window.icon_emotion_switch_primary#>" alt="">\n                            <img class="pic_active_primary" src="<#=window.icon_emotion_switch_active_primary#>" alt="">\n                        </span>\n                    </div>\n                </span>\n            </div>\n            <div class="emotion_panel" id="js_emotion_panel">\n                <span class="emotion_panel_arrow_wrp" id="js_emotion_panel_arrow_wrp">\n                    <i class="emotion_panel_arrow arrow_out"></i>\n                    <i class="emotion_panel_arrow arrow_in"></i>\n                </span>\n                <div class="emotion_list_wrp" id="js_slide_wrapper">\n                    \x3c!--<ul class="emotion_list"></ul>--\x3e\n                    \x3c!--<li class="emotion_item"><i class="icon_emotion"></i></li>--\x3e\n                </div>\n                <ul class="emotion_navs" id="js_navbar">\n                    \x3c!--<li class="emotion_nav"></li>--\x3e\n                </ul>\n            </div>\n            <div class="discuss_btn_wrp"><a id="js_cmt_submit" class="btn btn_primary btn_discuss btn_disabled" href="##">留言</a></div>\n          </div>\n          <div class="discuss_container_bd">\n            <div class="" style="display:none">\n                <div class="mod_title_context">\n                    <strong class="mod_title">我的留言</strong>\n                </div>\n                <ul class="discuss_list" id="js_cmt_mylist"></ul>\n            </div>\n            <div class="weui-loadmore" id="js_mycmt_loading">\n                <i class="weui-loading"></i>\n                <span class="weui-loadmore__tips">正在加载</span>\n            </div>\n            <div id="js_cmt_toast" style="display: none;">\n                <div class="weui-mask_transparent"></div>\n                <div class="weui-toast">\n                    <i class="weui-icon-success-no-circle weui-icon_toast"></i>\n                    <p class="weui-toast__content">已留言</p>\n                </div>\n            </div>\n            <div class="weui-dialog__wrp weui-transition_opacity-hide" id="js_delete_panel_mobile">\n                <div class="weui-mask"></div>\n                <div class="weui-dialog">\n                    <div class="weui-dialog__bd">确定删除留言吗？</div>\n                    <div class="weui-dialog__ft">\n                    <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_default" id="js_delete_cancel_mobile">取消</a>\n                    <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary" id="js_delete_confirm_mobile">删除</a>\n                    </div>\n                </div>\n            </div>\n          </div>\n        </div>\n    </div>\n  </div>\n<#}else{#>\n    <div id="js_cmt_mine" class="discuss_container editing access" style="display:none;">\n        <div class="discuss_container_inner">\n            <h2 class="rich_media_title"><#=window.msg_title.html(1)#></h2>\x3c!-- 标题要转义 --\x3e\n            <span id="log"></span>\n            <div class="frm_textarea_box_wrp">\n                <span class="frm_textarea_box">\n                    <#if(window.friend_comment_enabled == 1){#>\n                    \x3c!-- <textarea id="js_cmt_input" class="frm_textarea" placeholder="留言对朋友可见，被公众号筛选后，将对所有人可见。"></textarea> --\x3e\n                    <textarea id="js_cmt_input" class="frm_textarea" placeholder="留言将由公众号筛选后显示，对所有人可见。"></textarea>\n                    <#}else{#>\n                    <textarea id="js_cmt_input" class="frm_textarea" placeholder="留言将由公众号筛选后显示，对所有人可见。"></textarea>\n                    <#}#>\n                    <div class="emotion_tool">\n                        <span class="emotion_switch" style="display:none;"></span>\n                        <span id="js_emotion_switch" class="pic_emotion_switch_wrp">\n                            <img class="pic_default" src="<#=window.icon_emotion_switch#>" alt="">\n                            <img class="pic_active" src="<#=window.icon_emotion_switch_active#>" alt="">\n                        </span>\n                        <div class="emotion_panel" id="js_emotion_panel">\n                            <span class="emotion_panel_arrow_wrp" id="js_emotion_panel_arrow_wrp">\n                                <i class="emotion_panel_arrow arrow_out"></i>\n                                <i class="emotion_panel_arrow arrow_in"></i>\n                            </span>\n                            <div class="emotion_list_wrp" id="js_slide_wrapper">\n                                \x3c!--<ul class="emotion_list"></ul>--\x3e\n                                \x3c!--<li class="emotion_item"><i class="icon_emotion"></i></li>--\x3e\n                            </div>\n                            <ul class="emotion_navs" id="js_navbar">\n                                \x3c!--<li class="emotion_nav"></li>--\x3e\n                            </ul>\n                        </div>\n                    </div>\n                </span>\n            </div>\n            <div class="discuss_btn_wrp"><a id="js_cmt_submit" class="btn btn_primary btn_discuss btn_disabled" href="##">留言</a></div>\n            <div class="discuss_list_wrp" style="display:none">\n                <div class="rich_tips with_line title_tips discuss_title_line">\n                    <span class="tips">我的留言</span>\n                </div>\n                <ul class="discuss_list" id="js_cmt_mylist"></ul>\n            </div>\n            <div class="rich_tips tips_global loading_tips" id="js_mycmt_loading">\n                <img src="<#=window.icon_loading_white#>" class="rich_icon icon_loading_white" alt="">\n                <span class="tips">加载中</span>\n            </div>\n            <div class="wx_poptips" id="js_cmt_toast" style="display:none;">\n                <img alt="" class="icon_toast" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGoAAABqCAYAAABUIcSXAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3NpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyMTUxMzkxZS1jYWVhLTRmZTMtYTY2NS0xNTRkNDJiOGQyMWIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTA3QzM2RTg3N0UwMTFFNEIzQURGMTQzNzQzMDAxQTUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTA3QzM2RTc3N0UwMTFFNEIzQURGMTQzNzQzMDAxQTUiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NWMyOGVjZTMtNzllZS00ODlhLWIxZTYtYzNmM2RjNzg2YjI2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjIxNTEzOTFlLWNhZWEtNGZlMy1hNjY1LTE1NGQ0MmI4ZDIxYiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pmvxj1gAAAVrSURBVHja7J15rF1TFMbXk74q1ZKHGlMkJVIhIgg1FH+YEpEQJCKmGBpThRoSs5jVVNrSQUvEEENIhGiiNf9BiERICCFIRbUiDa2qvudbOetF3Tzv7XWGffa55/uS7593977n3vO7e5+199p7v56BgQGh0tcmvAUERREUQVEERREUQVEERREUQVEERREUQVEERREUQVEERREUQVEERVAUQVEERVAUQbVYk+HdvZVG8b5F0xj4RvhouB+eCy8KrdzDJc1RtAX8ILxvx98V1GyCSkN98Cx4z/95/Wn4fj6j6tUEeN4wkFSnw1MJqj5NhBfAuwaUHREUg4lqNMmePVsHll/HFhVfe1t3FwpJI8DXCCquDrCWNN4B6Tb4M3Z98aTPmTvh0YHl18PXw29yZiKejoPvcUD6E74yFBJbVDk6Bb7K8aP/Hb4c/tRzEYIqprPhSxzlf4Uvhb/0Xoig8qnHAJ3lqPMzfDH8XZ4LEpRf2sVdA5/sqPO9Qfop70UJyn+/boaPddT5yrq7VUUvTIVJI7q74MMddXR8NB1eXcYvhBpZm0s2w72/o86HFoKvLau/pYaXzjLMdUJ6y0LwtWV9CIIaXtvA8+G9HHV03u5q+K+yH47U0NoRngPv7KjzHDwTLj0bS1BDazfJJlcnOOostC6ysnCT+q80G/sIvFVgeW09D8FPVT0uoP7VfvAD8NjA8pqmuAN+OcYAjso0RbIZ8DGB5TVNcRO8JMaHY9SXSdfa3eeANJimWBLrA7JFiZwIXye+NMUV8CcxP2SRFjXefok7NRjSGZJlWUPvw2/wtNiQirSoXWyMsR28wR7AzzYM0oXw+Y7yK+CLJGeaoqjyrJSdZJD6Ov4+z5y6NJc0Az7NUecHydIUy+v60KNyQHoM3nKI1y7YCFiq0i7uBvgER52vDdKqWn9djhY1Dn4G3n6Ecqm2rF74dvgoR53S0hQxW9RJAZAGW5bSn58QJA27dQ7uIEedjywEX5NKVxCqsY6y+qA+LxFI4+yZ6oH0trWkNan80jygtIUsc5SflgAsDXgehfdx1KkkTRE76tN+Xue2jnTU0Ru1oIbvpt30bBtKhOp5yaaRkts0lic8V1i6dPcIRx2d/l8Y8XtNNEg7OOo8bl1kmmOKnDsO88CaYzejau0hWZqiL7C83oCH4SeTHvwV2BqqsHRVztSEYOmWF80NeXZT6Hd4KflResE9vCnBOlCyGfDNAstHTVPUDWoQ1t3iW+9WNizvlhfd4aerXd+ThqiMfNR6+9LvOOro5OY5JX2H4+F7HZD+kGzlamMgldWiirQsjcwWFbjmqZJteekJLK9pisvgL6RhKvuciZiwzrWWGapfrPy30kBVcSBIrw0aD3PU0XB6cehntq7rTMf7/2iQlktDVdXJLXlg6VjmiYBn6rWSTRCH6hvJ0hQrpcGq8oidsmHpTP8t8DGO9/vcWt9qabiqPgup1yKyQwvC2tSefZ73SSpNkUJ4PlLorlHZ+446nc8f3fIyywlJhwrTuwVSjBa1ccvSxN0hjjoK5xVrYZMd9V6XbFfgBukixTwGLg8sDam3dZR/wZ6L/dJlin1en8LS+bgpFbz3Ygvzu1J1HKxYNqxGpCmaCEo12rrBorD6LRp8UbpcdR5VWhTW35KlKd6QFqjuM2XzwlpnMxTvSkuUwuG/Xlg6NtPjbT6WFimF/VG6LEvXgn8QGDjMbBukVECFwhpoS+CQatfX2Q1q6H7wENHdrfCr0lKleEB9JyxNneus+VJpsVL9TwI6W65LovWIGl3KtVJaLv7LBwYTFEERFEVQFEERFEVQFEERFEVQFEERFEVQFEERFEVQFEERFFWq/hFgADUMN4RzT6/OAAAAAElFTkSuQmCC">\n                <p class="toast_content">已留言</p>\n            </div>\n        </div>\n    </div>\n<#}#>\n<div class="weui-webview-nav" style="display:none;" id="js_fake_bar">\n    <button class="weui-webview-nav__btn_goback" id="js_cmt_goback">goback</button>\n    <button class="weui-webview-nav__btn_forward weui-webview-nav__btn_disabled" disabled="disabled">forward</button>\n</div>',{}),document.body.appendChild(e))}(),new L.Emotion({emotionPanel:D("#js_emotion_panel"),inputArea:D("#js_cmt_input"),emotionPanelArrowWrp:D("#js_emotion_panel_arrow_wrp"),emotionSwitcher:D("#js_emotion_switch"),emotionSlideWrapper:D("#js_slide_wrapper"),emotionNavBar:D("#js_navbar"),submitBtn:D("#js_cmt_submit")}),navigator.userAgent.toLowerCase().match(/ios/)){let t=navigator.userAgent.toLowerCase().match(/(?:sogousearch\/ios\/)(.*)/);if(t&&t[1]){let n=t[1].replace(/\./g,"");parseInt(n)>422&&e("ios")}}else e("android");function e(e){let t=document.getElementById("js_cover"),n=[];t&&n.push(t);let i=document.getElementById("js_content");if(i){let e=i.getElementsByTagName("img")||[];for(let t=0,i=e.length;t<i;t++)n.push(e.item(t))}let o=[];for(let a=0,s=n.length;a<s;a++){let t=n[a],i=t.getAttribute("data-src")||t.getAttribute("src");i&&(o.push(i),function(n){j.on(t,"click",(function(t){return"ios"==e?window.JSInvoker&&window.JSInvoker.openImageList&&window.JSInvoker.openImageList(JSON.stringify({index:n,array:o})):window.JSInvoker&&JSInvoker.weixin_openImageList&&window.JSInvoker.weixin_openImageList(JSON.stringify({index:n,array:o})),!1}))}(a))}}window.onerror=function(e){(new Image).src="/mp/jsreport?key=86&content="+e+"&r="+Math.random()}}();if(setTimeout((function(){let e=function(){U.setLogs({id:28307,key:49,value:1,lc:1,log0:"[28307_49_appmsg_fe_filter]"+encodeURIComponent(location.href)})},t=(window.appmsg_fe_filter||"").split(","),n=function(t,n){try{if(!t)return;if(t.querySelectorAll){let i=t.querySelectorAll("*["+n+"]");if(i&&i.length>0){e();for(let e=0;e<i.length;++e)i[e]&&i[e].removeAttribute&&i[e].removeAttribute(n)}return}let i=t.childNodes;if(t.hasAttribute&&t.hasAttribute(n)&&e(),t.removeAttribute&&t.removeAttribute(n),i&&i.length)for(let e=0;e<i.length;++e)filterContenteditable(i[e])}catch(es){}},i=document.getElementById("js_content");for(let o=0;o<t.length;++o)t[o]&&n(i,t[o])}),0),setTimeout((function(){let e=(new Date).getHours();if(e<11||e>16||Math.random()<.99)return;let t=new Image;t.onload=function(){let e=t.naturalWidth||t.width,n=t.naturalHeight||t.height;999==e&&636==n||window.__addIdKeyReport("28307","wifi"===window.networkType?120:123),window.__addIdKeyReport("28307","wifi"===window.networkType?121:124)},t.src="http://mmbiz.qpic.cn/mmbiz_png/7lG1x2vpicdic0p5bBthpD9lsJcINicsSzd6uKQQJyoj5oTl8lFIs9K0fIibgxCzms0enDLTRxTHLpDPCLpSvIExiag/0";let n=new Image;n.onload=function(){let e=n.naturalWidth||n.width,t=n.naturalHeight||n.height;999==e&&636==t||window.__addIdKeyReport("28307",126),window.__addIdKeyReport("28307",127)},n.src="https://mmbiz.qpic.cn/mmbiz_png/7lG1x2vpicdic0p5bBthpD9lsJcINicsSzd6uKQQJyoj5oTl8lFIs9K0fIibgxCzms0enDLTRxTHLpDPCLpSvIExiag/0"}),3e3),Math.random()<2e-4)try{let e=document.getElementsByTagName("img"),t=window.screen.height,n=window.screen.width,i=window.devicePixelRatio,o="";for(let a=0,s=e.length;a<s;a++){let s=e[a].getAttribute("data-src");if(s){let r=e[a].getBoundingClientRect();o+=n+"|"+t+"|"+r.left.toFixed(2)+"|"+(n-r.right).toFixed(2)+"|"+r.width.toFixed(2)+"|"+i.toFixed(2)+"|"+s+";"}}R({url:"/mp/wapreport?action=img_display_report",data:{key:o},type:"POST",dataType:"json",async:!0})}catch(es){}setTimeout((function(){qn&&qn("updatePageHeight")}),2e3),N.isIOS&&location.href.match(/fontScale=\d+/)&&G.isIPadOS13&&setTimeout((function(){if(window.ipados13_font_scale)return;const e=location.href.match(/fontScale=(\d+)/);window.ipados13_font_scale=parseFloat(e[1]),G.setFontSize(document.getElementsByTagName("html").item(0),window.ipados13_font_scale/100)}),500)}(),!window.__second_open__){let e=window.performance||window.msPerformance||window.webkitPerformance;if(e&&e.timing){let e=window.location.protocol;W.saveSpeeds({uin:uin,pid:"https:"==e?462:417,speeds:{sid:34,time:Date.now()-window.performance.timing.navigationStart}}),W.send()}Za={isPaySubscribe:window.isPaySubscribe},window.getWXLongPressImageEventConfig=()=>Za.isPaySubscribe?{forbidForward:1}:{forbidForward:0}}var Za;
